"use strict";(self.webpackChunklongyu_website=self.webpackChunklongyu_website||[]).push([[9645],{3905:function(e,n,t){t.d(n,{Zo:function(){return u},kt:function(){return A}});var r=t(7294);function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){l(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function d(e,n){if(null==e)return{};var t,r,l=function(e,n){if(null==e)return{};var t,r,l={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(l[t]=e[t]);return l}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}var o=r.createContext({}),p=function(e){var n=r.useContext(o),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},u=function(e){var n=p(e.components);return r.createElement(o.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},s=r.forwardRef((function(e,n){var t=e.components,l=e.mdxType,a=e.originalType,o=e.parentName,u=d(e,["components","mdxType","originalType","parentName"]),s=p(t),A=l,k=s["".concat(o,".").concat(A)]||s[A]||c[A]||a;return t?r.createElement(k,i(i({ref:n},u),{},{components:t})):r.createElement(k,i({ref:n},u))}));function A(e,n){var t=arguments,l=n&&n.mdxType;if("string"==typeof e||l){var a=t.length,i=new Array(a);i[0]=s;var d={};for(var o in n)hasOwnProperty.call(n,o)&&(d[o]=n[o]);d.originalType=e,d.mdxType="string"==typeof e?e:l,i[1]=d;for(var p=2;p<a;p++)i[p]=t[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,t)}s.displayName="MDXCreateElement"},3591:function(e,n,t){t.r(n),t.d(n,{assets:function(){return u},contentTitle:function(){return o},default:function(){return A},frontMatter:function(){return d},metadata:function(){return p},toc:function(){return c}});var r=t(7462),l=t(3366),a=(t(7294),t(3905)),i=["components"],d={},o="\u8bbe\u7f6e EXTRA_CFLAGS \u4ee5\u7f16\u8bd1 debug \u7248\u672c dpdk \u5e93",p={unversionedId:"\u6280\u672f\u535a\u5ba2/dpdk/\u4e0a\u624b dpdk/\u7f16\u8bd1\u95ee\u9898/\u8bbe\u7f6e EXTRA_CFLAGS \u4ee5\u7f16\u8bd1 debug \u7248\u672c dpdk \u5e93",id:"\u6280\u672f\u535a\u5ba2/dpdk/\u4e0a\u624b dpdk/\u7f16\u8bd1\u95ee\u9898/\u8bbe\u7f6e EXTRA_CFLAGS \u4ee5\u7f16\u8bd1 debug \u7248\u672c dpdk \u5e93",title:"\u8bbe\u7f6e EXTRA_CFLAGS \u4ee5\u7f16\u8bd1 debug \u7248\u672c dpdk \u5e93",description:"\u547d\u4ee4\u884c\u6307\u5b9a CFLAGS \u4e0d\u751f\u6548",source:"@site/docs/\u6280\u672f\u535a\u5ba2/dpdk/\u4e0a\u624b dpdk/\u7f16\u8bd1\u95ee\u9898/\u8bbe\u7f6e EXTRA_CFLAGS \u4ee5\u7f16\u8bd1 debug \u7248\u672c dpdk \u5e93.md",sourceDirName:"\u6280\u672f\u535a\u5ba2/dpdk/\u4e0a\u624b dpdk/\u7f16\u8bd1\u95ee\u9898",slug:"/\u6280\u672f\u535a\u5ba2/dpdk/\u4e0a\u624b dpdk/\u7f16\u8bd1\u95ee\u9898/\u8bbe\u7f6e EXTRA_CFLAGS \u4ee5\u7f16\u8bd1 debug \u7248\u672c dpdk \u5e93",permalink:"/longyu.github.io/\u6280\u672f\u535a\u5ba2/dpdk/\u4e0a\u624b dpdk/\u7f16\u8bd1\u95ee\u9898/\u8bbe\u7f6e EXTRA_CFLAGS \u4ee5\u7f16\u8bd1 debug \u7248\u672c dpdk \u5e93",draft:!1,editUrl:"https://github.com/longyuwlz/longyu.github.io/docs/\u6280\u672f\u535a\u5ba2/dpdk/\u4e0a\u624b dpdk/\u7f16\u8bd1\u95ee\u9898/\u8bbe\u7f6e EXTRA_CFLAGS \u4ee5\u7f16\u8bd1 debug \u7248\u672c dpdk \u5e93.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"\u8bb0\u5f55\u4e00\u6b21\u7f16\u8bd1\u5668\u7248\u672c\u8fc7\u4f4e\u5bfc\u81f4 dpdk \u65e0\u6cd5\u6210\u529f\u7f16\u8bd1\u7684\u95ee\u9898",permalink:"/longyu.github.io/\u6280\u672f\u535a\u5ba2/dpdk/\u4e0a\u624b dpdk/\u7f16\u8bd1\u95ee\u9898/\u8bb0\u5f55\u4e00\u6b21\u7f16\u8bd1\u5668\u7248\u672c\u8fc7\u4f4e\u5bfc\u81f4 dpdk \u65e0\u6cd5\u6210\u529f\u7f16\u8bd1\u7684\u95ee\u9898"},next:{title:"ethtool \u547d\u4ee4\u6307\u5b9a\u7684\u7f51\u7edc\u8bbe\u5907\u540d\u5728\u54ea\u91cc\u88ab\u4f7f\u7528\uff1f",permalink:"/longyu.github.io/\u6280\u672f\u535a\u5ba2/linux-kernel/ethtool \u547d\u4ee4\u6307\u5b9a\u7684\u7f51\u7edc\u8bbe\u5907\u540d\u5728\u54ea\u91cc\u88ab\u4f7f\u7528\uff1f"}},u={},c=[{value:"\u547d\u4ee4\u884c\u6307\u5b9a CFLAGS \u4e0d\u751f\u6548",id:"\u547d\u4ee4\u884c\u6307\u5b9a-cflags-\u4e0d\u751f\u6548",level:2},{value:"\u547d\u4ee4\u884c\u8bbe\u7f6e EXTRA_CFLAGS \u6807\u5fd7\u751f\u6210 debug \u7248",id:"\u547d\u4ee4\u884c\u8bbe\u7f6e-extra_cflags-\u6807\u5fd7\u751f\u6210-debug-\u7248",level:2},{value:"gcc \u540c\u65f6\u6307\u5b9a\u591a\u4e2a\u4f18\u5316\u9009\u9879\u7684\u95ee\u9898",id:"gcc-\u540c\u65f6\u6307\u5b9a\u591a\u4e2a\u4f18\u5316\u9009\u9879\u7684\u95ee\u9898",level:2},{value:"\u6700\u7ec8\u786e\u5b9a\u7684\u7f16\u8bd1 dpdk debug \u7248\u672c\u7684\u65b9\u6cd5",id:"\u6700\u7ec8\u786e\u5b9a\u7684\u7f16\u8bd1-dpdk-debug-\u7248\u672c\u7684\u65b9\u6cd5",level:2}],s={toc:c};function A(e){var n=e.components,t=(0,l.Z)(e,i);return(0,a.kt)("wrapper",(0,r.Z)({},s,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"\u8bbe\u7f6e-extra_cflags-\u4ee5\u7f16\u8bd1-debug-\u7248\u672c-dpdk-\u5e93"},"\u8bbe\u7f6e EXTRA_CFLAGS \u4ee5\u7f16\u8bd1 debug \u7248\u672c dpdk \u5e93"),(0,a.kt)("h2",{id:"\u547d\u4ee4\u884c\u6307\u5b9a-cflags-\u4e0d\u751f\u6548"},"\u547d\u4ee4\u884c\u6307\u5b9a CFLAGS \u4e0d\u751f\u6548"),(0,a.kt)("p",null,"dpdk \u7684 Makefile \u4e2d\u6709\u5bf9 CFLAGS \u7684\u8bbe\u5b9a\uff0c\u5728\u5f88\u591a Makefile \u5355\u72ec\u8bbe\u5b9a\u4e86 CFLAGS \u589e\u52a0 -O3 \u53c2\u6570\u3002"),(0,a.kt)("p",null,"\u4e0b\u9762\u662f dpdk-17.05 \u4e2d\u4e00\u4e9b Makefile \u5728 CFLAGS \u6807\u5fd7\u4e2d\u589e\u52a0 -O3 \u9009\u9879\u7684\u8bed\u53e5\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},".......\n./lib/librte_reorder/Makefile:37:CFLAGS += -O3\n./drivers/net/fm10k/Makefile:39:CFLAGS += -O3\n./drivers/net/tap/Makefile:42:CFLAGS += -O3\n./drivers/net/pcap/Makefile:40:CFLAGS += -O3\n./drivers/net/sfc/Makefile:38:CFLAGS += -O3\n./drivers/net/vhost/Makefile:41:CFLAGS += -O3\n./drivers/net/null/Makefile:39:CFLAGS += -O3\n./drivers/net/mlx4/Makefile:47:CFLAGS += -O3\n./drivers/net/af_packet/Makefile:45:CFLAGS += -O3\n........\n")),(0,a.kt)("p",null,"\u5168\u5c40\u8bbe\u5b9a ",(0,a.kt)("inlineCode",{parentName:"p"},'export CFLAGS=" -O0 0g"'),"\u540e\u91cd\u65b0\u7f16\u8bd1\u53d1\u73b0\u8fd8\u662f\u4f7f\u7528\u4e86 -O3 \u7f16\u8bd1\uff0c\u8fd9\u8868\u660e dpdk \u7684\u7f16\u8bd1\u811a\u672c\u4e2d\u5bf9 CFLAGS \u7684\u503c\u91cd\u65b0\u8fdb\u884c\u4e86\u8bbe\u5b9a\uff0c",(0,a.kt)("strong",{parentName:"p"},"\u4e0d\u80fd\u901a\u8fc7\u547d\u4ee4\u884c\u6307\u5b9a CFLAGS \u6765\u7f16\u8bd1\u51fa debug \u7248\u672c\u3002")),(0,a.kt)("p",null,"\u5728 doc \u76ee\u5f55\u4e0b\u627e\u5230\u4e86\u5982\u4e0b\u76f8\u5173\u5185\u5bb9\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-rst"},"331 Variables that Can be Set/Overridden in a Makefile Only\n332 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n333 \n334 *   VPATH: The path list that the build system will search for sources. By default, RTE_SRCDIR will be included in VPATH.\n335 \n336 *   CFLAGS: Flags to use for C compilation. The user should use +=  to append data in this variable.\n337 \n")),(0,a.kt)("p",null,"\u4ece\u4e0a\u9762\u7684\u5185\u5bb9\u4e2d\u53ef\u4ee5\u770b\u51fa\uff0c\u7528\u6237\u4e0d\u80fd\u901a\u8fc7\u547d\u4ee4\u884c\u8bbe\u5b9a CFLAGS\uff0c\u53ea\u80fd\u901a\u8fc7 Makefile \u6587\u4ef6\u6765\u8bbe\u5b9a\u3002"),(0,a.kt)("h2",{id:"\u547d\u4ee4\u884c\u8bbe\u7f6e-extra_cflags-\u6807\u5fd7\u751f\u6210-debug-\u7248"},"\u547d\u4ee4\u884c\u8bbe\u7f6e EXTRA_CFLAGS \u6807\u5fd7\u751f\u6210 debug \u7248"),(0,a.kt)("p",null,"\u7ee7\u7eed\u9605\u8bfb doc \u76ee\u5f55\u4e2d\u7684\u5e2e\u52a9\u6587\u6863\uff0c\u6211\u53d1\u73b0 EXTRA_CFLAGS \u6807\u5fd7\u53ef\u4ee5\u4f7f\u7528\u3002\u6587\u6863\u4e2d\u76f8\u5173\u7684\u5185\u5bb9\u6458\u53d6\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-rst"},"Variables that Can be Set/Overridden by the User in a Makefile or Command Line\n389 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n390 \n391 *   CFLAGS_my_file.o: Specific flags to add for C compilation of my_file.c.\n392 \n393 *   LDFLAGS_my_app: Specific flags to add when linking my_app.\n394     \n395 *   EXTRA_CFLAGS: The content of this variable is appended after CFLAGS when compiling.\n396 \n397 *   EXTRA_LDFLAGS: The content of this variable is appended after LDFLAGS when linking.\n398 \n399 *   EXTRA_LDLIBS: The content of this variable is appended after LDLIBS when linking.\n400 \n401 *   EXTRA_ASFLAGS: The content of this variable is appended after ASFLAGS when assembling.\n402 \n403 *   EXTRA_CPPFLAGS: The content of this variable is appended after CPPFLAGS when using a C preprocessor on assembly files.\n")),(0,a.kt)("p",null,"\u4e0a\u9762\u7684\u4ecb\u7ecd\u8868\u660e EXTRA_CFLAGS \u53d8\u91cf\u53ef\u4ee5\u901a\u8fc7\u547d\u4ee4\u884c\u8fdb\u884c\u8bbe\u5b9a\uff0c\u540c\u65f6\u5b83\u4f1a\u5728\u7f16\u8bd1\u65f6\u8ffd\u52a0\u5230 CFLAGS \u5185\u5bb9\u4e4b\u540e\u3002"),(0,a.kt)("p",null,'\u6267\u884c export EXTRA_CFLAGS="-O0 -g" \u540e\u91cd\u65b0\u7f16\u8bd1 dpdk \u7684\u5e93\uff0c\u4f7f\u7528 gdb \u8c03\u8bd5 app \u76ee\u5f55\u4e0b\u751f\u6210\u7684\u53ef\u6267\u884c\u6587\u4ef6\u53d1\u73b0 gdb \u80fd\u591f\u8bfb\u53d6\u5230\u8c03\u8bd5\u4fe1\u606f\u3002'),(0,a.kt)("p",null,"\u867d\u7136\u6709\u4e86\u8c03\u8bd5\u4fe1\u606f\uff0c\u4f46\u662f Makefile \u4e2d\u5bf9 CFLAGS \u53d8\u91cf\u589e\u52a0\u7684 -O3 \u9009\u9879\u53ef\u80fd\u610f\u5473\u7740\u7f16\u8bd1\u51fa\u6765\u7684\u662f O3 \u7248\u672c\u7684\u7a0b\u5e8f\uff0c\u8fd9\u6837\u5c31\u4e0d\u80fd\u7b97\u4f5c\u662f debug \u7248\u672c\u3002"),(0,a.kt)("p",null,"\u6211\u67e5\u770b\u7f16\u8bd1\u7f16\u8bd1\u76ee\u5f55\u4e2d *.o.cmd \u4e2d\u4fdd\u5b58\u7684\u7f16\u8bd1\u547d\u4ee4\uff0c\u53d1\u73b0\u5e93\u51fd\u6570\u7684\u7f16\u8bd1\u547d\u4ee4\u4e2d\u540c\u65f6\u8bbe\u5b9a\u4e86 -O3 \u4e0e -O0 -g \u53c2\u6570\u3002"),(0,a.kt)("p",null,"\u793a\u4f8b\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"[longyu@debian-10:22:02:09] x86_64-native-linuxapp-gcc $ cat ./build/lib/librte_eal/linuxapp/eal/.eal_alarm.o.cmd \ncmd_eal_alarm.o = gcc -Wp,-MD,./.eal_alarm.o.d.tmp  -m64 -pthread  -march=native -DRTE_MACHINE_CPUFLAG_SSE -DRTE_MACHINE_CPUFLAG_SSE2 -DRTE_MACHINE_CPUFLAG_SSE3 -DRTE_MACHINE_CPUFLAG_SSSE3 -DRTE_MACHINE_CPUFLAG_SSE4_1 -DRTE_MACHINE_CPUFLAG_SSE4_2 -DRTE_MACHINE_CPUFLAG_AES -DRTE_MACHINE_CPUFLAG_PCLMULQDQ -DRTE_MACHINE_CPUFLAG_AVX -DRTE_MACHINE_CPUFLAG_RDRAND -DRTE_MACHINE_CPUFLAG_FSGSBASE -DRTE_MACHINE_CPUFLAG_F16C -DRTE_MACHINE_CPUFLAG_AVX2  -I/home/longyu/Downloads/dpdk-stable-17.02.1/x86_64-native-linuxapp-gcc/include -include /home/longyu/Downloads/dpdk-stable-17.02.1/x86_64-native-linuxapp-gcc/include/rte_config.h -I/home/longyu/Downloads/dpdk-stable-17.02.1/lib/librte_eal/linuxapp/eal/include -I/home/longyu/Downloads/dpdk-stable-17.02.1/lib/librte_eal/common -I/home/longyu/Downloads/dpdk-stable-17.02.1/lib/librte_eal/common/include -W -Wall -Wstrict-prototypes -Wmissing-prototypes -Wmissing-declarations -Wold-style-definition -Wpointer-arith -Wcast-align -Wnested-externs -Wcast-qual -Wformat-nonliteral -Wformat-security -Wundef -Wwrite-strings -O3  -O0 -g  -o eal_alarm.o -c /home/longyu/Downloads/dpdk-stable-17.02.1/lib/librte_eal/linuxapp/eal/eal_alarm.c  \n")),(0,a.kt)("p",null,"\u67e5\u770b\u5230\u7f16\u8bd1\u547d\u4ee4\uff0c\u6211\u60f3\u5230\u4e86\u4e00\u4e2a\u95ee\u9898\u2014\u2014",(0,a.kt)("strong",{parentName:"p"},"\u6307\u5b9a\u4e86\u591a\u4e2a\u4f18\u5316\u9009\u9879\u65f6 gcc \u7f16\u8bd1\u65f6\u4f1a\u4f7f\u7528\u54ea\u4e2a\u5462\uff1f")),(0,a.kt)("h2",{id:"gcc-\u540c\u65f6\u6307\u5b9a\u591a\u4e2a\u4f18\u5316\u9009\u9879\u7684\u95ee\u9898"},"gcc \u540c\u65f6\u6307\u5b9a\u591a\u4e2a\u4f18\u5316\u9009\u9879\u7684\u95ee\u9898"),(0,a.kt)("p",null,"\u7ecf\u8fc7\u641c\u7d22\uff0c\u6211\u53d1\u73b0 gcc \u7684\u5b98\u65b9\u7f51\u9875\u4e2d\u5bf9\u8fd9\u4e2a\u95ee\u9898\u8fdb\u884c\u4e86\u63cf\u8ff0\u3002\u5f53 gcc \u7f16\u8bd1\u547d\u4ee4\u4e2d\u6307\u5b9a\u4e86\u591a\u4e2a\u4f18\u5316\u9009\u9879\u65f6\uff0c\u53ea\u6709\u6700\u540e\u4e00\u4e2a\u4f18\u5316\u9009\u9879\u751f\u6548\u3002"),(0,a.kt)("p",null,"-O3 \u662f\u5728 CFLAGS \u53d8\u91cf\u4e2d\u6307\u5b9a\u7684\uff0cEXTRA_CFLAGS \u662f\u6211\u4eec\u5728\u547d\u4ee4\u884c\u4e2d\u6307\u5b9a\u7684\uff0c\u6839\u636e dpdk \u7684\u5e2e\u52a9\u6587\u6863\u4e2d\u7684\u8bf4\u660e\uff0cEXTRA_CFLAGS \u7684\u503c\u4f1a\u5728\u7f16\u8bd1\u65f6\u8ffd\u52a0\u5230 CFLAGS \u7684\u503c\u540e\uff0c\u8fd9\u6837\u6211\u4eec\u5c31\u770b\u5230\u4e86\u6709 -O3 ..... -O0 -g \u8fd9\u6837\u7684\u7f16\u8bd1\u547d\u4ee4\u3002"),(0,a.kt)("p",null,"-O0 \u662f\u6700\u540e\u4e00\u4e2a\u6307\u5b9a\u7684\u4f18\u5316\u9009\u9879\uff0c\u5b9e\u9645\u751f\u6548\u7684\u662f -O0\uff0c\u800c\u975e -O3\uff0c\u8fd9\u6837\u6211\u4eec\u901a\u8fc7\u8bbe\u5b9a EXTRA_CFLAGS \u4e3a -O0 -g \u5c31\u80fd\u591f\u7f16\u8bd1\u51fa debug \u7248\u672c\u7684 dpdk\u3002"),(0,a.kt)("p",null,"\u5907\u6ce8: EXTRA_CFLAGS \u662f\u5728  mk/internal/rte.compile-pre.mk \u4e2d\u4f7f\u7528\u7684\u3002"),(0,a.kt)("h2",{id:"\u6700\u7ec8\u786e\u5b9a\u7684\u7f16\u8bd1-dpdk-debug-\u7248\u672c\u7684\u65b9\u6cd5"},"\u6700\u7ec8\u786e\u5b9a\u7684\u7f16\u8bd1 dpdk debug \u7248\u672c\u7684\u65b9\u6cd5"),(0,a.kt)("p",null,"\u547d\u4ee4\u884c\u4e2d\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u8bbe\u5b9a EXTRA_CFLAGS \u540e\u91cd\u65b0\u7f16\u8bd1\u5373\u53ef\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},'export EXTRA_CFLAGS="-O0 -g"\n')))}A.isMDXComponent=!0}}]);