"use strict";(self.webpackChunklongyu_website=self.webpackChunklongyu_website||[]).push([[8199],{3905:function(e,n,t){t.d(n,{Zo:function(){return _},kt:function(){return c}});var a=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function d(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var p=a.createContext({}),i=function(e){var n=a.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):d(d({},n),e)),t},_=function(e){var n=i(e.components);return a.createElement(p.Provider,{value:n},e.children)},s={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},f=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,l=e.originalType,p=e.parentName,_=o(e,["components","mdxType","originalType","parentName"]),f=i(t),c=r,u=f["".concat(p,".").concat(c)]||f[c]||s[c]||l;return t?a.createElement(u,d(d({ref:n},_),{},{components:t})):a.createElement(u,d({ref:n},_))}));function c(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var l=t.length,d=new Array(l);d[0]=f;var o={};for(var p in n)hasOwnProperty.call(n,p)&&(o[p]=n[p]);o.originalType=e,o.mdxType="string"==typeof e?e:r,d[1]=o;for(var i=2;i<l;i++)d[i]=t[i];return a.createElement.apply(null,d)}return a.createElement.apply(null,t)}f.displayName="MDXCreateElement"},3543:function(e,n,t){t.r(n),t.d(n,{assets:function(){return _},contentTitle:function(){return p},default:function(){return c},frontMatter:function(){return o},metadata:function(){return i},toc:function(){return s}});var a=t(7462),r=t(3366),l=(t(7294),t(3905)),d=["components"],o={},p="x710 offload QinQ \u62a5\u6587 vlan \u5e76\u652f\u6301 rss hash \u5230\u591a\u961f\u5217",i={unversionedId:"\u6280\u672f\u535a\u5ba2/dpdk/dpdk \u95ee\u9898\u6848\u4f8b/\u7f51\u5361\u786c\u4ef6/x710 offload QinQ \u62a5\u6587 vlan \u5e76\u652f\u6301 rss hash \u5230\u591a\u961f\u5217",id:"\u6280\u672f\u535a\u5ba2/dpdk/dpdk \u95ee\u9898\u6848\u4f8b/\u7f51\u5361\u786c\u4ef6/x710 offload QinQ \u62a5\u6587 vlan \u5e76\u652f\u6301 rss hash \u5230\u591a\u961f\u5217",title:"x710 offload QinQ \u62a5\u6587 vlan \u5e76\u652f\u6301 rss hash \u5230\u591a\u961f\u5217",description:"\u95ee\u9898\u63cf\u8ff0",source:"@site/docs/\u6280\u672f\u535a\u5ba2/dpdk/dpdk \u95ee\u9898\u6848\u4f8b/\u7f51\u5361\u786c\u4ef6/x710 offload QinQ \u62a5\u6587 vlan \u5e76\u652f\u6301 rss hash \u5230\u591a\u961f\u5217.md",sourceDirName:"\u6280\u672f\u535a\u5ba2/dpdk/dpdk \u95ee\u9898\u6848\u4f8b/\u7f51\u5361\u786c\u4ef6",slug:"/\u6280\u672f\u535a\u5ba2/dpdk/dpdk \u95ee\u9898\u6848\u4f8b/\u7f51\u5361\u786c\u4ef6/x710 offload QinQ \u62a5\u6587 vlan \u5e76\u652f\u6301 rss hash \u5230\u591a\u961f\u5217",permalink:"/longyu.github.io/\u6280\u672f\u535a\u5ba2/dpdk/dpdk \u95ee\u9898\u6848\u4f8b/\u7f51\u5361\u786c\u4ef6/x710 offload QinQ \u62a5\u6587 vlan \u5e76\u652f\u6301 rss hash \u5230\u591a\u961f\u5217",draft:!1,editUrl:"https://github.com/longyuwlz/longyu.github.io/docs/\u6280\u672f\u535a\u5ba2/dpdk/dpdk \u95ee\u9898\u6848\u4f8b/\u7f51\u5361\u786c\u4ef6/x710 offload QinQ \u62a5\u6587 vlan \u5e76\u652f\u6301 rss hash \u5230\u591a\u961f\u5217.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"x710 hash \u5206\u7247\u4e0e\u975e\u5206\u7247 tcp \u62a5\u6587\u5f02\u5e38\u95ee\u9898",permalink:"/longyu.github.io/\u6280\u672f\u535a\u5ba2/dpdk/dpdk \u95ee\u9898\u6848\u4f8b/\u7f51\u5361\u786c\u4ef6/x710 hash \u5206\u7247\u4e0e\u975e\u5206\u7247 tcp \u62a5\u6587\u5f02\u5e38\u95ee\u9898"},next:{title:"dpdk-19.11 armv8 l2fwd \u5728\u67d0 arm \u5185\u6838\u4e0a\u65e0\u6cd5\u8fd0\u884c\u95ee\u9898",permalink:"/longyu.github.io/\u6280\u672f\u535a\u5ba2/dpdk/dpdk-19.xx/dpdk-19.11 armv8 l2fwd \u5728\u67d0 arm \u5185\u6838\u4e0a\u65e0\u6cd5\u8fd0\u884c\u95ee\u9898"}},_={},s=[{value:"\u95ee\u9898\u63cf\u8ff0",id:"\u95ee\u9898\u63cf\u8ff0",level:2},{value:"QinQ \u62a5\u6587\u7684\u683c\u5f0f",id:"qinq-\u62a5\u6587\u7684\u683c\u5f0f",level:2},{value:"dpdk \u7a0b\u5e8f rx \u65f6\u5982\u4f55\u5b9e\u73b0\u7f51\u5361\u81ea\u52a8\u5265\u6389\u5916\u5c42 vlan\uff1f",id:"dpdk-\u7a0b\u5e8f-rx-\u65f6\u5982\u4f55\u5b9e\u73b0\u7f51\u5361\u81ea\u52a8\u5265\u6389\u5916\u5c42-vlan",level:2},{value:"dpdk \u7a0b\u5e8f\u5982\u4f55\u5728\u53d1\u5305\u65f6\u8ba9\u7f51\u5361\u81ea\u52a8\u6dfb\u52a0\u4e00\u4e2a\u6307\u5b9a\u7684 vlan \u5934\uff1fhttps://dev.dpdk.narkive.com/lCYIb96o/dpdk-vlan-header-insertion-and-removal",id:"dpdk-\u7a0b\u5e8f\u5982\u4f55\u5728\u53d1\u5305\u65f6\u8ba9\u7f51\u5361\u81ea\u52a8\u6dfb\u52a0\u4e00\u4e2a\u6307\u5b9a\u7684-vlan-\u5934httpsdevdpdknarkivecomlcyib96odpdk-vlan-header-insertion-and-removal",level:2},{value:"\u62a5\u6587 hash \u5230\u4e0d\u540c\u7684\u961f\u5217\u4e0a",id:"\u62a5\u6587-hash-\u5230\u4e0d\u540c\u7684\u961f\u5217\u4e0a",level:3},{value:"\u63d0\u95ee\u73af\u8282",id:"\u63d0\u95ee\u73af\u8282",level:2},{value:"\u53c2\u8003\u94fe\u63a5",id:"\u53c2\u8003\u94fe\u63a5",level:2}],f={toc:s};function c(e){var n=e.components,t=(0,r.Z)(e,d);return(0,l.kt)("wrapper",(0,a.Z)({},f,t,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"x710-offload-qinq-\u62a5\u6587-vlan-\u5e76\u652f\u6301-rss-hash-\u5230\u591a\u961f\u5217"},"x710 offload QinQ \u62a5\u6587 vlan \u5e76\u652f\u6301 rss hash \u5230\u591a\u961f\u5217"),(0,l.kt)("h2",{id:"\u95ee\u9898\u63cf\u8ff0"},"\u95ee\u9898\u63cf\u8ff0"),(0,l.kt)("p",null,"\u5bf9\u4e8e\u4e94\u5143\u7ec4\u968f\u673a\u53d8\u5316\u7684 QinQ \u62a5\u6587\uff0c\u9700\u8981\u5b9e\u73b0\u5982\u4e0b\u9700\u6c42\uff1a"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"dpdk \u7a0b\u5e8f rx \u65f6\u7f51\u5361\u81ea\u52a8\u5265\u6389\u5916\u5c42 vlan \u5934"),(0,l.kt)("li",{parentName:"ol"},"dpdk \u7a0b\u5e8f tx \u65f6\u7f51\u5361\u81ea\u52a8\u6dfb\u52a0\u4e00\u4e2a\u6307\u5b9a\u7684 vlan \u5934"),(0,l.kt)("li",{parentName:"ol"},"\u62a5\u6587\u80fd\u591f hash \u5230\u4e0d\u540c\u7684\u961f\u5217\u4e0a"),(0,l.kt)("li",{parentName:"ol"},"\u57fa\u4e8e dpdk-19.11 \u7248\u672c\u4e0e x710 \u7f51\u5361")),(0,l.kt)("h2",{id:"qinq-\u62a5\u6587\u7684\u683c\u5f0f"},"QinQ \u62a5\u6587\u7684\u683c\u5f0f"),(0,l.kt)("p",null,"\u5982\u4e0b\u56fe\u6240\u793a\uff0cQinQ \u5176\u5b9e\u53ef\u4ee5\u7b80\u5355\u7684\u7406\u89e3\u4e3a vlan \u91cc\u9762\u5957\u4e86 vlan \u7684\u5f62\u5f0f\uff0cQinQ \u5199\u6210 802.1Q in 802.1 Q \u53ef\u80fd\u66f4\u5f62\u8c61\u4e00\u70b9\u3002\n",(0,l.kt)("img",{parentName:"p",src:"https://img-blog.csdnimg.cn/bc76e9f19588499695bfd4399ddef2f3.png",alt:"![\u5728\u8fd9\u91cc\u63d2\u5165\u56fe\u7247\u63cf\u8ff0](https://img-blog.csdnimg.cn/4542618bf0424b6aa569f2cdeda5340f.png"}),"\u4e0a\u56fe\u6458\u81ea\uff1a",(0,l.kt)("a",{parentName:"p",href:"https://www.cnblogs.com/sddai/p/6204496.html"},"https://www.cnblogs.com/sddai/p/6204496.html")),(0,l.kt)("p",null,"\u5bf9 QinQ \u62a5\u6587\u6709\u57fa\u7840\u7684\u8ba4\u8bc6\u540e\uff0c\u7ee7\u7eed\u7814\u7a76\u76f8\u5173\u9700\u6c42\u5982\u4f55\u5b9e\u73b0\u3002"),(0,l.kt)("h2",{id:"dpdk-\u7a0b\u5e8f-rx-\u65f6\u5982\u4f55\u5b9e\u73b0\u7f51\u5361\u81ea\u52a8\u5265\u6389\u5916\u5c42-vlan"},"dpdk \u7a0b\u5e8f rx \u65f6\u5982\u4f55\u5b9e\u73b0\u7f51\u5361\u81ea\u52a8\u5265\u6389\u5916\u5c42 vlan\uff1f"),(0,l.kt)("p",null,"dpdk \u652f\u6301\u5982\u4e0b\u7f51\u5361 rx mode \u914d\u7f6e\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-c"},"#define DEV_RX_OFFLOAD_VLAN_STRIP  0x00000001\n#define DEV_RX_OFFLOAD_IPV4_CKSUM  0x00000002\n#define DEV_RX_OFFLOAD_UDP_CKSUM   0x00000004\n#define DEV_RX_OFFLOAD_TCP_CKSUM   0x00000008\n#define DEV_RX_OFFLOAD_TCP_LRO     0x00000010\n#define DEV_RX_OFFLOAD_QINQ_STRIP  0x00000020\n#define DEV_RX_OFFLOAD_OUTER_IPV4_CKSUM 0x00000040\n#define DEV_RX_OFFLOAD_MACSEC_STRIP     0x00000080\n#define DEV_RX_OFFLOAD_HEADER_SPLIT 0x00000100\n#define DEV_RX_OFFLOAD_VLAN_FILTER  0x00000200\n#define DEV_RX_OFFLOAD_VLAN_EXTEND  0x00000400\n#define DEV_RX_OFFLOAD_JUMBO_FRAME  0x00000800\n#define DEV_RX_OFFLOAD_SCATTER      0x00002000\n#define DEV_RX_OFFLOAD_TIMESTAMP    0x00004000\n#define DEV_RX_OFFLOAD_SECURITY         0x00008000\n#define DEV_RX_OFFLOAD_KEEP_CRC     0x00010000\n#define DEV_RX_OFFLOAD_SCTP_CKSUM   0x00020000\n#define DEV_RX_OFFLOAD_OUTER_UDP_CKSUM  0x00040000\n#define DEV_RX_OFFLOAD_RSS_HASH     0x00080000\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"DEV_RX_OFFLOAD_VLAN_STRIP")," \u8fd9\u4e2a offload \u4f7f\u80fd\u540e\u7f51\u5361\u4f1a",(0,l.kt)("strong",{parentName:"p"},"\u81ea\u52a8\u5265\u6389\u6700\u5916\u5c42\u7684 vlan"),"\uff0c\u540c\u65f6 ",(0,l.kt)("strong",{parentName:"p"},"vlan \u4fe1\u606f")," \u4f1a\u4fdd\u5b58\u5230",(0,l.kt)("strong",{parentName:"p"},"\u6536\u5305\u63cf\u8ff0\u7b26"),"\u7684\u7279\u5b9a\u5b57\u6bb5\u4e0a\u3002"),(0,l.kt)("p",null,"dpdk \u9a71\u52a8\u6536\u5305\u51fd\u6570\u4e2d\u4f1a\u5c06\u63cf\u8ff0\u7b26\u4e0a\u7684 vlan \u4fe1\u606f\u8f6c\u5316\u5e76\u4fdd\u5b58\u5230 mbuf \u4e2d\u7684 ",(0,l.kt)("strong",{parentName:"p"},"vlan_tci")," \u5b57\u6bb5\u4e2d\uff0c\u4e0a\u5c42\u7a0b\u5e8f\u901a\u8fc7\u8bbf\u95ee mbuf \u7684\u8fd9\u4e2a\u5b57\u6bb5\u5c31\u80fd\u591f\u83b7\u53d6\u5230\u62a5\u6587\u7684 ",(0,l.kt)("strong",{parentName:"p"},"vlan")," \u4e86\u3002"),(0,l.kt)("p",null,"\u8fd9\u4e9b rx offloads \u901a\u8fc7 rxmode \u914d\u7f6e\u3002dpdk \u7a0b\u5e8f\u8c03\u7528 rte_eth_dev_configure \u51fd\u6570\u65f6\u9a71\u52a8\u5c42\u5224\u6bb5 rxmode \u5e76\u6267\u884c\u76f8\u5173\u7684\u786c\u4ef6\u521d\u59cb\u5316\uff0c\u793a\u4f8b\u4ee3\u7801\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-c"},"local_port_conf.rxmode.offloads |=\n         DEV_RX_OFFLOAD_VLAN_STRIP;\nret = rte_eth_dev_configure(portid, 1, 1, &local_port_conf);\n")),(0,l.kt)("p",null,"dpdk i40e \u666e\u901a\u6536\u5305\u51fd\u6570\u4e2d\u6709\u5982\u4e0b\u5173\u952e\u4ee3\u7801\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-c"},' 116 i40e_rxd_to_vlan_tci(struct rte_mbuf *mb, volatile union i40e_rx_desc *rxdp)\n 117 {\n 118     if (rte_le_to_cpu_64(rxdp->wb.qword1.status_error_len) &\n 119         (1 << I40E_RX_DESC_STATUS_L2TAG1P_SHIFT)) {\n 120         mb->ol_flags |= RTE_MBUF_F_RX_VLAN | RTE_MBUF_F_RX_VLAN_STRIPPED;\n 121         mb->vlan_tci =\n 122             rte_le_to_cpu_16(rxdp->wb.qword0.lo_dword.l2tag1);\n 123         PMD_RX_LOG(DEBUG, "Descriptor l2tag1: %u",\n 124                rte_le_to_cpu_16(rxdp->wb.qword0.lo_dword.l2tag1));\n 125     } else {\n 126         mb->vlan_tci = 0;\n 127     }\n')),(0,l.kt)("p",null,"\u63cf\u8ff0\u7b26\u4e2d\u7684\u5b57\u6bb5\u7531\u7f51\u5361\u786c\u4ef6\u586b\u5145\uff0c\u5728\u9a71\u52a8\u6536\u5305\u51fd\u6570\u4e2d\u88ab\u8f6c\u5316\u5b58\u50a8\u5230 mbuf \u7684 vlan_tci \u5b57\u6bb5\u4e2d\uff0c\u8fd9\u5c31\u662f\u5265\u79bb vlan \u5934 offload \u7684\u5173\u952e\u8fc7\u7a0b\u3002"),(0,l.kt)("h2",{id:"dpdk-\u7a0b\u5e8f\u5982\u4f55\u5728\u53d1\u5305\u65f6\u8ba9\u7f51\u5361\u81ea\u52a8\u6dfb\u52a0\u4e00\u4e2a\u6307\u5b9a\u7684-vlan-\u5934httpsdevdpdknarkivecomlcyib96odpdk-vlan-header-insertion-and-removal"},"dpdk \u7a0b\u5e8f\u5982\u4f55\u5728\u53d1\u5305\u65f6\u8ba9\u7f51\u5361\u81ea\u52a8\u6dfb\u52a0\u4e00\u4e2a\u6307\u5b9a\u7684 vlan \u5934\uff1f",(0,l.kt)("a",{parentName:"h2",href:"https://dev.dpdk.narkive.com/lCYIb96o/dpdk-vlan-header-insertion-and-removal"},"https://dev.dpdk.narkive.com/lCYIb96o/dpdk-vlan-header-insertion-and-removal")),(0,l.kt)("p",null,"\u4e0e rx \u7c7b\u4f3c\uff0c\u53d1\u5305\u65f6\u6dfb\u52a0 vlan \u5934\u4e5f\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e tx offload \u6765\u4f7f\u80fd\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\u6dfb\u52a0\u7684 vlan \u5934\u9700\u8981\u7684\u4fe1\u606f\u4e0a\u5c42\u8981\u5728\u53d1\u5305\u524d\u586b\u5145\u5230 dpdk mbuf \u7684\u6307\u5b9a\u5b57\u6bb5\u4e0a\uff0c\u8fd9\u4e00\u70b9\u4e0e\u6536\u5305\u8fc7\u7a0b\u521a\u597d\u76f8\u53cd\u3002"),(0,l.kt)("p",null,"dpdk \u652f\u6301\u7684 tx offload \u90e8\u5206\u6458\u5f55:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-c"},"#define DEV_TX_OFFLOAD_VLAN_INSERT 0x00000001\n#define DEV_TX_OFFLOAD_IPV4_CKSUM  0x00000002\n#define DEV_TX_OFFLOAD_UDP_CKSUM   0x00000004\n#define DEV_TX_OFFLOAD_TCP_CKSUM   0x00000008\n#define DEV_TX_OFFLOAD_SCTP_CKSUM  0x00000010\n#define DEV_TX_OFFLOAD_TCP_TSO     0x00000020\n#define DEV_TX_OFFLOAD_UDP_TSO     0x00000040\n#define DEV_TX_OFFLOAD_OUTER_IPV4_CKSUM 0x00000080 /**< Used for tunneling packet. */\n#define DEV_TX_OFFLOAD_QINQ_INSERT 0x00000100\n")),(0,l.kt)("p",null,"\u8fd9\u4e9b offloads \u901a\u8fc7 txmode \u914d\u7f6e\uff0c\u5728 dpdk \u7a0b\u5e8f\u8c03\u7528 rte_eth_dev_configure \u51fd\u6570\u65f6\u88ab\u4f7f\u7528\uff0c\u793a\u4f8b\u4ee3\u7801\u5982\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-c"},"local_port_conf.txmode.offloads |=\n         DEV_TX_OFFLOAD_VLAN_INSERT;\nret = rte_eth_dev_configure(portid, 1, 1, &local_port_conf);\n")),(0,l.kt)("p",null,"\u53d1\u5305\u524d\u4e0a\u5c42\u5e94\u7528\u5bf9 mbuf vlan \u76f8\u5173\u5b57\u6bb5\u586b\u5145\u4fe1\u606f\u793a\u4f8b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-c"},"mbufs[idx]->vlan_tci = 0xef00;\nmbufs[idx]->ol_flags |= PKT_TX_VLAN_PKT;\n")),(0,l.kt)("p",null,"\u8fd9\u91cc\u5b58\u5728\u7684\u4e00\u4e2a\u95ee\u9898\u662f\uff0ci40e \u9a71\u52a8\u7684\u5411\u91cf\u53d1\u5305\u51fd\u6570\u4e0d\u652f\u6301 DEV_TX_OFFLOAD_VLAN_INSERT offload\uff0c\u914d\u7f6e\u4e86 DEV_TX_OFFLOAD_VLAN_INSERT offload \u65f6\u53ea\u80fd\u4f7f\u7528\u666e\u901a\u7684\u53d1\u5305\u51fd\u6570\uff0c\u4e0d\u80fd\u4f7f\u7528\u5411\u91cf\u53d1\u5305\u51fd\u6570\u3002"),(0,l.kt)("h3",{id:"\u62a5\u6587-hash-\u5230\u4e0d\u540c\u7684\u961f\u5217\u4e0a"},"\u62a5\u6587 hash \u5230\u4e0d\u540c\u7684\u961f\u5217\u4e0a"),(0,l.kt)("p",null,"\u8981\u8ba9\u62a5\u6587 hash \u5230\u4e0d\u540c\u7684\u961f\u5217\u4e0a\uff0c\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e\u7f51\u5361\u7684 rss hash \u529f\u80fd\u6765\u5b9e\u73b0\u3002\u6d4b\u8bd5\u5bf9 ",(0,l.kt)("strong",{parentName:"p"},"QinQ")," \u62a5\u6587\u7684 hash \u65f6\u5374\u53d1\u73b0\u5b58\u5728\u5982\u4e0b\u95ee\u9898\uff1a"),(0,l.kt)("p",null,"x710 \u7f51\u5361\u5fc5\u987b",(0,l.kt)("strong",{parentName:"p"},"\u540c\u65f6\u914d\u7f6e rss hash \u4e0e rx vlan extend offload")," \u624d\u80fd hash \u5230\u4e0d\u540c\u7684\u961f\u5217\u4e0a\uff0cr",(0,l.kt)("strong",{parentName:"p"},"x vlan strip offload")," \u662f\u5426\u914d\u7f6e\u4e0d\u5f71\u54cd hash \u7ed3\u679c\u3002"),(0,l.kt)("p",null,"\u540c\u65f6\u89c2\u6d4b\u5230\u5982\u4e0b\u73b0\u8c61\uff1a"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"x710 \u7f51\u5361\u540c\u65f6\u914d\u7f6e\u4e86 rx vlan strip offload \u4e0e rx vlan extend offload \u65f6\uff0cQinQ \u62a5\u6587\u7684\u4e24\u5c42 vlan \u90fd\u88ab\u5265\u6389\u3002"),(0,l.kt)("li",{parentName:"ol"},"\u914d\u7f6e\u4e86 rx vlan extend offload \u540e\uff0ctx VLAN_INSERT offload \u5931\u6548\u3002"),(0,l.kt)("li",{parentName:"ol"},"\u5355\u72ec\u4f7f\u80fd rx vlan extend offload \u4e0e rx vlan strip offload \u6548\u679c\u76f8\u540c")),(0,l.kt)("p",null,"\u7ecf\u8fc7\u5176\u5b83\u7684\u5c1d\u8bd5\uff0c\u6ca1\u6709\u627e\u5230\u53ef\u7528\u7684\u65b9\u6848\u3002",(0,l.kt)("strong",{parentName:"p"},"\u4e3a\u4e86\u4fdd\u8bc1 rss hash \u529f\u80fd\u53ef\u7528\u53ea\u80fd\u5f00\u542f rx vlan extend offload \u540c\u65f6\u4e0a\u5c42\u5728\u53d1\u5305\u65f6\u8f6f\u4ef6\u6dfb\u52a0 vlan \u5934\u3002")),(0,l.kt)("h2",{id:"\u63d0\u95ee\u73af\u8282"},"\u63d0\u95ee\u73af\u8282"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"vlan extend \u662f\u4ec0\u4e48\uff1f\n\u4ee3\u7801\u91cc\u9762\u6709\u6ce8\u91ca\u8868\u660e vlan extend \u662f double vlan\uff0c\u7f51\u4e0a\u641c\u7d22\u4e0d\u5230\u76f8\u5173\u7684\u4fe1\u606f\u3002"),(0,l.kt)("li",{parentName:"ol"},"\u901a\u8fc7\u914d\u7f6e DEV_RX_OFFLOAD_QINQ_STRIP \u662f\u5426\u80fd\u591f hash \u5f00\uff1f\n\u73af\u5883\u9650\u5236\uff0c\u65e0\u6cd5\u6d4b\u8bd5\uff0c\u53ea\u80fd\u6682\u4e14\u653e\u5f03\u4e86\u3002")),(0,l.kt)("h2",{id:"\u53c2\u8003\u94fe\u63a5"},"\u53c2\u8003\u94fe\u63a5"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://dev.dpdk.narkive.com/XcHzHsvq/dpdk-rss-for-double-vlan-tagged-packets"},"https://dev.dpdk.narkive.com/XcHzHsvq/dpdk-rss-for-double-vlan-tagged-packets")),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://doc.dpdk.org/api-2.2/structrte__eth__rxmode.html"},"https://doc.dpdk.org/api-2.2/structrte__eth__rxmode.html")),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://linkthedevil.gitbook.io/little-things-about-dataplane/3"},"https://linkthedevil.gitbook.io/little-things-about-dataplane/3")),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://dev.dpdk.narkive.com/lCYIb96o/dpdk-vlan-header-insertion-and-removal"},"https://dev.dpdk.narkive.com/lCYIb96o/dpdk-vlan-header-insertion-and-removal")))}c.isMDXComponent=!0}}]);