"use strict";(self.webpackChunklongyu_website=self.webpackChunklongyu_website||[]).push([[6636],{3905:function(e,t,n){n.d(t,{Zo:function(){return s},kt:function(){return _}});var r=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var o=r.createContext({}),u=function(e){var t=r.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},s=function(e){var t=u(e.components);return r.createElement(o.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},c=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,o=e.parentName,s=p(e,["components","mdxType","originalType","parentName"]),c=u(n),_=i,m=c["".concat(o,".").concat(_)]||c[_]||d[_]||a;return n?r.createElement(m,l(l({ref:t},s),{},{components:n})):r.createElement(m,l({ref:t},s))}));function _(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,l=new Array(a);l[0]=c;var p={};for(var o in t)hasOwnProperty.call(t,o)&&(p[o]=t[o]);p.originalType=e,p.mdxType="string"==typeof e?e:i,l[1]=p;for(var u=2;u<a;u++)l[u]=n[u];return r.createElement.apply(null,l)}return r.createElement.apply(null,n)}c.displayName="MDXCreateElement"},4033:function(e,t,n){n.r(t),n.d(t,{assets:function(){return s},contentTitle:function(){return o},default:function(){return _},frontMatter:function(){return p},metadata:function(){return u},toc:function(){return d}});var r=n(7462),i=n(3366),a=(n(7294),n(3905)),l=["components"],p={},o="\u4ece virtio \u7f51\u5361\u6536\u5305\u6bb5\u9519\u8bef\u95ee\u9898\u51fa\u53d1\u53cd\u601d\u4e2a\u4eba\u95ee\u9898\u5206\u6790\u7684\u8fc7\u7a0b",u={unversionedId:"\u6280\u672f\u535a\u5ba2/dpdk/dpdk \u95ee\u9898\u6848\u4f8b/\u6536\u53d1\u5305\u95ee\u9898/\u4ece virtio \u7f51\u5361\u6536\u5305\u6bb5\u9519\u8bef\u95ee\u9898\u51fa\u53d1\u53cd\u601d\u4e2a\u4eba\u95ee\u9898\u5206\u6790\u7684\u8fc7\u7a0b",id:"\u6280\u672f\u535a\u5ba2/dpdk/dpdk \u95ee\u9898\u6848\u4f8b/\u6536\u53d1\u5305\u95ee\u9898/\u4ece virtio \u7f51\u5361\u6536\u5305\u6bb5\u9519\u8bef\u95ee\u9898\u51fa\u53d1\u53cd\u601d\u4e2a\u4eba\u95ee\u9898\u5206\u6790\u7684\u8fc7\u7a0b",title:"\u4ece virtio \u7f51\u5361\u6536\u5305\u6bb5\u9519\u8bef\u95ee\u9898\u51fa\u53d1\u53cd\u601d\u4e2a\u4eba\u95ee\u9898\u5206\u6790\u7684\u8fc7\u7a0b",description:"\u95ee\u9898\u63cf\u8ff0",source:"@site/docs/\u6280\u672f\u535a\u5ba2/dpdk/dpdk \u95ee\u9898\u6848\u4f8b/\u6536\u53d1\u5305\u95ee\u9898/\u4ece virtio \u7f51\u5361\u6536\u5305\u6bb5\u9519\u8bef\u95ee\u9898\u51fa\u53d1\u53cd\u601d\u4e2a\u4eba\u95ee\u9898\u5206\u6790\u7684\u8fc7\u7a0b.md",sourceDirName:"\u6280\u672f\u535a\u5ba2/dpdk/dpdk \u95ee\u9898\u6848\u4f8b/\u6536\u53d1\u5305\u95ee\u9898",slug:"/\u6280\u672f\u535a\u5ba2/dpdk/dpdk \u95ee\u9898\u6848\u4f8b/\u6536\u53d1\u5305\u95ee\u9898/\u4ece virtio \u7f51\u5361\u6536\u5305\u6bb5\u9519\u8bef\u95ee\u9898\u51fa\u53d1\u53cd\u601d\u4e2a\u4eba\u95ee\u9898\u5206\u6790\u7684\u8fc7\u7a0b",permalink:"/longyu.github.io/\u6280\u672f\u535a\u5ba2/dpdk/dpdk \u95ee\u9898\u6848\u4f8b/\u6536\u53d1\u5305\u95ee\u9898/\u4ece virtio \u7f51\u5361\u6536\u5305\u6bb5\u9519\u8bef\u95ee\u9898\u51fa\u53d1\u53cd\u601d\u4e2a\u4eba\u95ee\u9898\u5206\u6790\u7684\u8fc7\u7a0b",draft:!1,editUrl:"https://github.com/longyuwlz/longyu.github.io/docs/\u6280\u672f\u535a\u5ba2/dpdk/dpdk \u95ee\u9898\u6848\u4f8b/\u6536\u53d1\u5305\u95ee\u9898/\u4ece virtio \u7f51\u5361\u6536\u5305\u6bb5\u9519\u8bef\u95ee\u9898\u51fa\u53d1\u53cd\u601d\u4e2a\u4eba\u95ee\u9898\u5206\u6790\u7684\u8fc7\u7a0b.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"dpdk \u95ee\u9898\u5206\u6790\uff1adpdk \u7a0b\u5e8f\u4e0d\u6536\u5305\u95ee\u9898\u6848\u4f8b",permalink:"/longyu.github.io/\u6280\u672f\u535a\u5ba2/dpdk/dpdk \u95ee\u9898\u6848\u4f8b/\u6536\u53d1\u5305\u95ee\u9898/dpdk \u95ee\u9898\u5206\u6790\uff1adpdk \u7a0b\u5e8f\u4e0d\u6536\u5305\u95ee\u9898\u6848\u4f8b"},next:{title:"Failed to mmap 2MB hugepages \u4e0e max_map_count limit",permalink:"/longyu.github.io/\u6280\u672f\u535a\u5ba2/dpdk/dpdk \u95ee\u9898\u6848\u4f8b/\u7a0b\u5e8f\u521d\u59cb\u5316\u95ee\u9898/Failed to mmap 2MB hugepages \u4e0e max_map_count limit"}},s={},d=[{value:"\u95ee\u9898\u63cf\u8ff0",id:"\u95ee\u9898\u63cf\u8ff0",level:2},{value:"\u5206\u6790\u8fc7\u7a0b",id:"\u5206\u6790\u8fc7\u7a0b",level:2},{value:"\u786e\u8ba4\u7248\u672c\u4fe1\u606f",id:"\u786e\u8ba4\u7248\u672c\u4fe1\u606f",level:3},{value:"\u786e\u8ba4\u73af\u5883\u4fe1\u606f",id:"\u786e\u8ba4\u73af\u5883\u4fe1\u606f",level:3},{value:"\u6bb5\u9519\u8bef\u76f8\u5173\u4fe1\u606f",id:"\u6bb5\u9519\u8bef\u76f8\u5173\u4fe1\u606f",level:3},{value:"dpdk \u793a\u4f8b\u7a0b\u5e8f\u5bf9\u7167\u6d4b\u8bd5",id:"dpdk-\u793a\u4f8b\u7a0b\u5e8f\u5bf9\u7167\u6d4b\u8bd5",level:3},{value:"\u4ee3\u7801\u4fa7\u5206\u6790",id:"\u4ee3\u7801\u4fa7\u5206\u6790",level:3},{value:"\u521d\u6b65\u5206\u6790\u7ed3\u8bba",id:"\u521d\u6b65\u5206\u6790\u7ed3\u8bba",level:2},{value:"\u8fdb\u4e00\u6b65\u5206\u6790\u7ed3\u8bba",id:"\u8fdb\u4e00\u6b65\u5206\u6790\u7ed3\u8bba",level:2},{value:"\u771f\u6b63\u7684\u95ee\u9898\u662f\u4ec0\u4e48\uff1f",id:"\u771f\u6b63\u7684\u95ee\u9898\u662f\u4ec0\u4e48",level:2},{value:"\u95ee\u9898\u89e3\u51b3\u65b9\u6848",id:"\u95ee\u9898\u89e3\u51b3\u65b9\u6848",level:2},{value:"\u53cd\u601d",id:"\u53cd\u601d",level:2},{value:"1. \u672a\u6279\u5224\u6027\u770b\u5f85\u7f51\u4e0a\u641c\u7d22\u5230\u7684\u4fe1\u606f",id:"1-\u672a\u6279\u5224\u6027\u770b\u5f85\u7f51\u4e0a\u641c\u7d22\u5230\u7684\u4fe1\u606f",level:3},{value:"2. \u5f53\u4e8b\u5b9e\u4e0e\u5206\u6790\u4e0d\u4e00\u81f4\u7684\u65f6\u5019\uff0c\u4f18\u5148\u8d28\u7591\u4e86\u4e8b\u5b9e\u800c\u4e0d\u662f\u5206\u6790\u8fc7\u7a0b",id:"2-\u5f53\u4e8b\u5b9e\u4e0e\u5206\u6790\u4e0d\u4e00\u81f4\u7684\u65f6\u5019\u4f18\u5148\u8d28\u7591\u4e86\u4e8b\u5b9e\u800c\u4e0d\u662f\u5206\u6790\u8fc7\u7a0b",level:3},{value:"3. \u5bf9\u6bd4\u5b9e\u9a8c\u4e2d\u5ffd\u7565\u4e86\u5173\u952e\u7684\u53d8\u5316\u91cf\uff0c\u5bfc\u81f4\u5f97\u51fa\u9519\u8bef\u7684\u7ed3\u8bba",id:"3-\u5bf9\u6bd4\u5b9e\u9a8c\u4e2d\u5ffd\u7565\u4e86\u5173\u952e\u7684\u53d8\u5316\u91cf\u5bfc\u81f4\u5f97\u51fa\u9519\u8bef\u7684\u7ed3\u8bba",level:3}],c={toc:d};function _(e){var t=e.components,n=(0,i.Z)(e,l);return(0,a.kt)("wrapper",(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"\u4ece-virtio-\u7f51\u5361\u6536\u5305\u6bb5\u9519\u8bef\u95ee\u9898\u51fa\u53d1\u53cd\u601d\u4e2a\u4eba\u95ee\u9898\u5206\u6790\u7684\u8fc7\u7a0b"},"\u4ece virtio \u7f51\u5361\u6536\u5305\u6bb5\u9519\u8bef\u95ee\u9898\u51fa\u53d1\u53cd\u601d\u4e2a\u4eba\u95ee\u9898\u5206\u6790\u7684\u8fc7\u7a0b"),(0,a.kt)("h2",{id:"\u95ee\u9898\u63cf\u8ff0"},"\u95ee\u9898\u63cf\u8ff0"),(0,a.kt)("p",null,"kvm arm \u865a\u62df\u673a\u4e2d dpdk \u4e1a\u52a1\u7a0b\u5e8f\u4f7f\u7528 virtio \u7f51\u5361\u6536\u5305\u65f6\u89e6\u53d1\u6bb5\u9519\u8bef\uff0c\u65ad\u5728\u5982\u4e0b\u4f4d\u7f6e\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-c"},"#0  0x00000000004f2f9c in virtio_recv_pkts_vec ()\n.....................................................\n#5  0x00000000004e14d4 in rte_eal_mp_remote_launch ()\n#6  0x000000000044ac64 in main ()\n")),(0,a.kt)("p",null,"\u95ee\u9898\u5fc5\u73b0\uff01"),(0,a.kt)("h2",{id:"\u5206\u6790\u8fc7\u7a0b"},"\u5206\u6790\u8fc7\u7a0b"),(0,a.kt)("h3",{id:"\u786e\u8ba4\u7248\u672c\u4fe1\u606f"},"\u786e\u8ba4\u7248\u672c\u4fe1\u606f"),(0,a.kt)("p",null,"cpu \u67b6\u6784\uff1a",(0,a.kt)("strong",{parentName:"p"},"arm"),"\ndpdk \u7248\u672c\uff1a",(0,a.kt)("strong",{parentName:"p"},"dpdk-16.11"),"\ndpdk \u7f51\u5361\u9a71\u52a8\uff1a",(0,a.kt)("strong",{parentName:"p"},"virtio pmd \u9a71\u52a8")),(0,a.kt)("h3",{id:"\u786e\u8ba4\u73af\u5883\u4fe1\u606f"},"\u786e\u8ba4\u73af\u5883\u4fe1\u606f"),(0,a.kt)("p",null,"cpu \u4fe1\u606f\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-c"},"processor       : 0\nmodel name      : ARMv8 CPU\nbogomips        : 3600.00\nFeatures        : fp asimd evtstrm aes pmull sha1 sha2 crc32\nflags           : fp asimd evtstrm aes pmull sha1 sha2 crc32\nCPU implementer : 0x41\nCPU architecture: 8\nCPU variant     : 0x0\nCPU part        : 0xd08\nCPU revision    : 2\n")),(0,a.kt)("p",null,"cpu \u4e3a ARMv8 \u5904\u7406\u5668\u3002"),(0,a.kt)("p",null,"virtio \u7f51\u5361 lspci -nvv \u4fe1\u606f\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-c"},"00:03.0 0200: 1af4:1000\n        Subsystem: 1af4:0001\n        Control: I/O+ Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR- FastB2B- DisINTx+\n        Status: Cap+ 66MHz- UDF- FastB2B- ParErr- DEVSEL=fast >TAbort- <TAbort- <MAbort- >SERR- <PERR- INTx-\n        Latency: 0\n        Interrupt: pin A routed to IRQ 42\n        Region 0: I/O ports at 6040 [size=32]\n        Region 1: Memory at 10ae5000 (32-bit, non-prefetchable) [size=4K]\n        Region 4: Memory at 8000a00000 (64-bit, prefetchable) [size=16K]\n        Expansion ROM at 10a40000 [disabled] [size=256K]\n        Capabilities: [98] MSI-X: Enable+ Count=3 Masked-\n                Vector table: BAR=1 offset=00000000\n                PBA: BAR=1 offset=00000800\n        Capabilities: [84] Vendor Specific Information: VirtIO: <unknown>\n                BAR=0 offset=00000000 size=00000000\n        Capabilities: [70] Vendor Specific Information: VirtIO: Notify\n                BAR=4 offset=00003000 size=00001000 multiplier=00000004\n        Capabilities: [60] Vendor Specific Information: VirtIO: DeviceCfg\n                BAR=4 offset=00002000 size=00001000\n        Capabilities: [50] Vendor Specific Information: VirtIO: ISR\n                BAR=4 offset=00001000 size=00001000\n        Capabilities: [40] Vendor Specific Information: VirtIO: CommonCfg\n                BAR=4 offset=00000000 size=00001000\n        Kernel driver in use: igb_uio\n")),(0,a.kt)("p",null,"\u4ece lspci -nvv \u7684\u4fe1\u606f\u80fd\u591f\u786e\u5b9a\u6b64\u7f51\u5361\u4e3a virtio modern \u7c7b\u578b\u3002"),(0,a.kt)("h3",{id:"\u6bb5\u9519\u8bef\u76f8\u5173\u4fe1\u606f"},"\u6bb5\u9519\u8bef\u76f8\u5173\u4fe1\u606f"),(0,a.kt)("p",null,"\u4f7f\u7528 gdb \u8fd0\u884c\u7a0b\u5e8f\uff0c\u51fa\u73b0\u6bb5\u9519\u8bef\u540e\u53cd\u6c47\u7f16\u5f97\u5230\u5982\u4e0b\u4fe1\u606f\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"(gdb) disass\nDump of assembler code for function virtio_recv_pkts_vec:\n...........................................................\n   0x00000000004f2f90 <+336>:   sub     v7.8h, v7.8h, v0.8h\n   0x00000000004f2f94 <+340>:   tbl     v1.16b, {v1.16b}, v5.16b\n   0x00000000004f2f98 <+344>:   stur    q19, [x19,#-16]\n=> 0x00000000004f2f9c <+348>:   str     q18, [x2,#32]\n   0x00000000004f2fa0 <+352>:   sub     v1.8h, v1.8h, v0.8h\n")),(0,a.kt)("p",null,"\u6bb5\u9519\u8bef\u51fa\u5728 str \u6307\u4ee4\u5b58\u50a8 q18 \u5bc4\u5b58\u5668\u7684\u503c\u5230 x2 + 32 \u6307\u5411\u7684\u5185\u5b58\u533a\u57df\u65f6\uff0c\u8868\u660e x2 + 32 \u8fd9\u4e2a\u5185\u5b58\u533a\u57df\u4e0d\u53ef\u8bbf\u95ee\u3002"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"virtio_recv_pkts_vec"),"\u8fd9\u4e2a\u7b26\u53f7\u5728 librte_pmd_virtio.a \u4e2d\uff0c\u7f16\u8bd1 -O3 -g \u7248\u672c\u7684 librte_pmd_virtio.a \u5e76\u4f7f\u7528 objdump -S -d \u53cd\u6c47\u7f16\uff0c\u627e\u5230\u5982\u4e0b\u4ee3\u7801\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-c"},"__extension__ static __inline void __attribute__ ((__always_inline__))\nvst1q_u64 (uint64_t *a, uint64x2_t b)\n{\n  __builtin_aarch64_st1v2di ((__builtin_aarch64_simd_di *) a,\n 158:   3c9f0273        stur    q19, [x19,#-16]\n 15c:   3d800852        str     q18, [x2,#32]\n}\n")),(0,a.kt)("p",null,"\u80fd\u591f\u786e\u5b9a\u662f\u5728\u8c03\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"vst1q_u64"),"\u51fd\u6570\u7684\u65f6\u5019\u89e6\u53d1\u4e86\u6bb5\u9519\u8bef\uff0c\u9605\u8bfb ",(0,a.kt)("inlineCode",{parentName:"p"},"virtio_recv_pkts_vec"),"\u51fd\u6570\u7684\u6e90\u7801\uff0c\u53d1\u73b0\u6709\u591a\u5904\u8c03\u7528\uff0c",(0,a.kt)("strong",{parentName:"p"},"\u6ca1\u6709\u627e\u5230"),"\u5177\u4f53\u662f\u54ea\u4e00\u5904\u8c03\u7528\u89e6\u53d1\u3002"),(0,a.kt)("h3",{id:"dpdk-\u793a\u4f8b\u7a0b\u5e8f\u5bf9\u7167\u6d4b\u8bd5"},"dpdk \u793a\u4f8b\u7a0b\u5e8f\u5bf9\u7167\u6d4b\u8bd5"),(0,a.kt)("p",null,"\u65e2\u7136\u95ee\u9898\u3010\u5fc5\u73b0\u3011\u4e14\u95ee\u9898\u51fa\u73b0\u5728\u3010\u9a71\u52a8\u4fa7\u3011\uff0c\u90a3\u4f7f\u7528\u76f8\u540c\u7248\u672c\u7684 l2fwd \u6d4b\u8bd5\uff0c\u5e94\u8be5\u4e5f\u80fd\u591f\u590d\u73b0\u95ee\u9898\u3002\u5982\u679c l2fwd \u80fd\u591f\u590d\u73b0\u95ee\u9898\u5219\u7f16\u8bd1\u4e00\u4e2a -O3 -g \u7248\u672c\u8fdb\u4e00\u6b65\u5b9a\u4f4d\uff0c\u8fd9\u6837\u5c31\u4e0d\u7528\u4f9d\u8d56\u4ea7\u54c1\u7684\u4e1a\u52a1\u7a0b\u5e8f\u3002"),(0,a.kt)("p",null,"\u4f7f\u7528 l2fwd \u6d4b\u8bd5\u53d1\u73b0\u6536\u53d1\u6b63\u5e38\uff0c\u540c\u65f6\u4f7f\u7528 perf \u89c2\u6d4b\u5230 l2fwd \u4f7f\u7528\u7684\u662f ",(0,a.kt)("inlineCode",{parentName:"p"},"virtio_recv_pkts"),"\n\u6536\u5305\u51fd\u6570\u3002"),(0,a.kt)("h3",{id:"\u4ee3\u7801\u4fa7\u5206\u6790"},"\u4ee3\u7801\u4fa7\u5206\u6790"),(0,a.kt)("p",null,"\u5728 dpdk \u7a0b\u5e8f\u8c03\u7528 ",(0,a.kt)("strong",{parentName:"p"},"rte_eth_tx_queue_setup")," \u914d\u7f6e virtio \u63a5\u53e3\u961f\u5217\u7684\u65f6\u5019\uff0c\u4f1a\u8c03\u7528\u5982\u4e0b\u4ee3\u7801\u5224\u65ad\u662f\u5426\u80fd\u591f\u5f00\u542f vec \u6536\u5305\u51fd\u6570\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-c"},'#if defined RTE_ARCH_X86\n        if (rte_cpu_get_flag_enabled(RTE_CPUFLAG_SSE3))\n                use_simple_rxtx = 1;\n#elif defined RTE_ARCH_ARM64 || defined CONFIG_RTE_ARCH_ARM\n        if (rte_cpu_get_flag_enabled(RTE_CPUFLAG_NEON))\n                use_simple_rxtx = 1;\n#endif\n        /* Use simple rx/tx func if single segment and no offloads */\n        if (use_simple_rxtx &&\n            (tx_conf->txq_flags & VIRTIO_SIMPLE_FLAGS) == VIRTIO_SIMPLE_FLAGS &&\n            !vtpci_with_feature(hw, VIRTIO_NET_F_MRG_RXBUF)) {\n                PMD_INIT_LOG(INFO, "Using simple rx/tx path");\n                dev->tx_pkt_burst = virtio_xmit_pkts_simple;\n                dev->rx_pkt_burst = virtio_recv_pkts_vec;\n                hw->use_simple_rxtx = use_simple_rxtx;\n        }\n')),(0,a.kt)("p",null,"\u6839\u636e\u4e0a\u6587\u4f7f\u7528 l2fwd \u7684\u5bf9\u7167\u5b9e\u9a8c\uff0c\u6211\u6000\u7591 dpdk \u4e1a\u52a1\u7a0b\u5e8f",(0,a.kt)("strong",{parentName:"p"},"\u4e0d\u5e94\u8be5\u4f7f\u7528 vec \u5411\u91cf\u6536\u5305\u51fd\u6570"),"\uff0carm \u67b6\u6784\u4e0a\u7684 vec \u5411\u91cf\u6536\u5305\u51fd\u6570\u4f9d\u8d56 neon \u6307\u4ee4\uff0c\u6211\u9700\u8981\u786e\u5b9a ",(0,a.kt)("strong",{parentName:"p"},"neon")," \u6307\u4ee4\u662f\u5426\u652f\u6301\u3002"),(0,a.kt)("p",null,"\u4e8e\u662f\u6211\u767e\u5ea6\u4e86\u4e00\u4e0b\uff0c\u53d1\u73b0\u4e86\u5982\u4e0b\u94fe\u63a5\uff1a",(0,a.kt)("a",{parentName:"p",href:"https://ask.zol.com.cn/x/5582053.html"},"\u600e\u4e48\u67e5\u770b cpu \u662f\u5426\u6709 neon \u6307\u4ee4 "),"\u3002\u94fe\u63a5\u91cc\u9762\u6307\u51fa\u901a\u8fc7\u67e5\u770b /proc/cpuinfo \u6587\u4ef6\u7684\u5185\u5bb9\u5c31\u80fd\u591f\u786e\u5b9a\uff0c\u793a\u4f8b\u4fe1\u606f\u4e2d ",(0,a.kt)("strong",{parentName:"p"},"Features \u4e2d\u6709 neon \u5b57\u7b26"),"\u8868\u793a\u652f\u6301\u3002"),(0,a.kt)("p",null,"\u6309\u7167\u8fd9\u4e2a\u63cf\u8ff0\u6211\u786e\u5b9a\u865a\u62df\u673a cpu ",(0,a.kt)("strong",{parentName:"p"},"\u4e0d\u652f\u6301 neon \u6307\u4ee4"),"\uff0c\u6b64\u65f6 ",(0,a.kt)("strong",{parentName:"p"},"use_simple_rxtx")," \u4e3a 0\uff0c\u6700\u7ec8 ",(0,a.kt)("strong",{parentName:"p"},"virtio_recv_pkts_vec")," \u7684\u914d\u7f6e\u3010\u4e0d\u4f1a\u751f\u6548\u3011\uff0c\u800c\u4ea7\u54c1\u4e1a\u52a1\u7a0b\u5e8f\u5374\u6bb5\u9519\u8bef\u65ad\u5728 ",(0,a.kt)("strong",{parentName:"p"},"virtio_recv_pkts_vec")," \u51fd\u6570\u4e2d\uff0c\u8868\u660e\u5b83\u4f7f\u7528\u7684\u7684\u786e\u662f\u8fd9\u4e2a vec \u6536\u5305\u51fd\u6570\uff0c\u8fd9\u91cc\u5c31\u5b58\u5728\u95ee\u9898\uff01"),(0,a.kt)("h2",{id:"\u521d\u6b65\u5206\u6790\u7ed3\u8bba"},"\u521d\u6b65\u5206\u6790\u7ed3\u8bba"),(0,a.kt)("p",null,"\u6839\u636e\u4e0a\u6587\u7684\u5206\u6790\uff0c\u6211\u5224\u65ad\u4ea7\u54c1\u7684 dpdk \u4e1a\u52a1\u7a0b\u5e8f\u6839\u672c\u4e0d\u5e94\u8be5\u4f7f\u7528 vec \u6536\u5305\u51fd\u6570\uff0c\u4e8e\u662f\u5f97\u51fa\u5982\u4e0b\u6000\u7591\u70b9\uff1a"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u7248\u672c\u4fe1\u606f\u9519\u8bef"),(0,a.kt)("li",{parentName:"ol"},"dpdk \u7a0b\u5e8f\u7f16\u8bd1\u95ee\u9898")),(0,a.kt)("p",null,"\u627e\u4ea7\u54c1\u540c\u5b66\u786e\u8ba4\u4e86\u4e0a\u9762\u7684\u4fe1\u606f\uff0c\u6ca1\u6709\u627e\u5230\u7591\u70b9\uff0c\u6709\u79cd\u5927\u8dcc\u773c\u955c\u7684\u611f\u89c9\uff01"),(0,a.kt)("h2",{id:"\u8fdb\u4e00\u6b65\u5206\u6790\u7ed3\u8bba"},"\u8fdb\u4e00\u6b65\u5206\u6790\u7ed3\u8bba"),(0,a.kt)("p",null,"\u65e2\u7136\u5206\u6790\u7684\u7ed3\u8bba\u4e0e\u73b0\u5b9e\u60c5\u51b5\u4e25\u91cd\u4e0d\u7b26\u5408\u53c8\u9700\u8981\u89e3\u51b3\u95ee\u9898\uff0c\u53ea\u80fd\u7f16\u8bd1\u4e00\u4e2a\u5e26 dpdk \u8c03\u8bd5\u4fe1\u606f\u7684\u4ea7\u54c1\u4e1a\u52a1\u7a0b\u5e8f\u6765\u5b9a\u4f4d\u3002"),(0,a.kt)("p",null,"\u9996\u5148\u4fee\u6539 dpdk \u914d\u7f6e\u6587\u4ef6\uff0c\u5f00\u542f\u5982\u4e0b\u8c03\u8bd5\u4fe1\u606f\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-c"},"232 CONFIG_RTE_LIBRTE_VIRTIO_DEBUG_INIT=y\n235 CONFIG_RTE_LIBRTE_VIRTIO_DEBUG_DRIVER=y\n")),(0,a.kt)("p",null,"\u7136\u540e\u4f7f\u7528 ",(0,a.kt)("strong",{parentName:"p"},"-O3 -g")," \u7f16\u8bd1\u76f8\u540c\u7248\u672c\u4ee3\u7801\u7684 dpdk \u5e93\u5e76\u91cd\u65b0\u7f16\u8bd1\u4ea7\u54c1 dpdk \u4e1a\u52a1\u7a0b\u5e8f\u3002\u4f7f\u7528\u65b0\u7684\u7a0b\u5e8f\u8c03\u8bd5\u53d1\u73b0\u786e\u5b9e\u4f7f\u7528\u4e86 ",(0,a.kt)("inlineCode",{parentName:"p"},"virtio_recv_pkts_vec"),"\u6536\u5305\u51fd\u6570\u3002"),(0,a.kt)("p",null,"\u7a0b\u5e8f\u542f\u52a8\u7684\u6253\u5370\u4e5f\u8bc1\u660e\u5982\u4e0b\u4ee3\u7801\u786e\u5b9e\u6267\u884c\u4e86\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-c"},'#elif defined RTE_ARCH_ARM64 || defined CONFIG_RTE_ARCH_ARM\n        if (rte_cpu_get_flag_enabled(RTE_CPUFLAG_NEON))\n                use_simple_rxtx = 1;\n#endif\n        /* Use simple rx/tx func if single segment and no offloads */\n        if (use_simple_rxtx &&\n            (tx_conf->txq_flags & VIRTIO_SIMPLE_FLAGS) == VIRTIO_SIMPLE_FLAGS &&\n            !vtpci_with_feature(hw, VIRTIO_NET_F_MRG_RXBUF)) {\n                PMD_INIT_LOG(INFO, "Using simple rx/tx path");\n                dev->tx_pkt_burst = virtio_xmit_pkts_simple;\n                dev->rx_pkt_burst = virtio_recv_pkts_vec;\n                hw->use_simple_rxtx = use_simple_rxtx;\n        }\n')),(0,a.kt)("p",null,"\u5b9a\u4f4d\u5230\u8fd9\u91cc\u5df2\u7ecf\u63a8\u7ffb\u4e86\u6211\u4e4b\u524d\u7684\u5206\u6790\u7ed3\u8bba\uff0c\u4e8b\u5b9e\u8868\u660e\u6b64\u6b3e Armv8 \u5904\u7406\u5668\u652f\u6301 neon \u6307\u4ee4\u3002"),(0,a.kt)("p",null,"\u8fdb\u4e00\u6b65\u9605\u8bfb\u4ee3\u7801\uff0c\u6211\u53d1\u73b0\u4e4b\u524d\u7684\u5206\u6790\u4e2d\u5b58\u5728\u5982\u4e0b\u4e24\u4e2a\u95ee\u9898\uff1a"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"cat /proc/cpuinfo \u4e2d\u67e5\u770b\u5230\u6ca1\u6709 ",(0,a.kt)("strong",{parentName:"li"},"neon")," \u5e76\u4e0d\u4ee3\u8868\u5904\u7406\u5668\u4e0d\u652f\u6301 neon \u6307\u4ee4\uff0cdpdk \u5b9e\u9645\u662f\u8bbf\u95ee ",(0,a.kt)("strong",{parentName:"li"},"/proc/self/auxv")," \u6587\u4ef6\u6765\u786e\u5b9a\u5904\u7406\u5668\u652f\u6301\u7684\u6307\u4ee4\u7279\u6027\u7684\uff0c",(0,a.kt)("strong",{parentName:"li"},"\u5f53\u524d armv8 cpu \u652f\u6301 neon \u6307\u4ee4\u96c6")),(0,a.kt)("li",{parentName:"ol"},"l2fwd \u4e0e dpdk \u4e1a\u52a1\u7a0b\u5e8f\u4f7f\u7528\u4e0d\u540c\u7684\u6536\u5305\u51fd\u6570\uff0c\u53d8\u5316\u70b9\u4e0d\u5728\u4e8e neon \u6307\u4ee4\u662f\u5426\u652f\u6301\uff0c\u800c\u662f\u4e0a\u5c42\u914d\u7f6e\u7684 tx_conf \u4e2d\u7684 txq_flags \u6807\u5fd7\u4e0d\u4e00\u81f4")),(0,a.kt)("h2",{id:"\u771f\u6b63\u7684\u95ee\u9898\u662f\u4ec0\u4e48"},"\u771f\u6b63\u7684\u95ee\u9898\u662f\u4ec0\u4e48\uff1f"),(0,a.kt)("p",null,"\u7ee7\u7eed\u8c03\u8bd5\u53d1\u73b0\u65ad\u5728\u5982\u4e0b\u4f4d\u7f6e\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-c"},"(gdb) bt\n165         vst1q_u64((void *)&rx_pkts[1]->rx_descriptor_fields1,                                                                                                            \n166             pkt_mb[1]);\n................................\n")),(0,a.kt)("p",null,"\u95ee\u9898\u539f\u56e0\u4e3a rx_pkts","[1]"," \u6307\u5411\u7684 mbuf \u5730\u5740\u4e3a\u7a7a\uff0c\u8bbf\u95ee\u8fd9\u4e2a\u7a7a\u5730\u5740\u89e6\u53d1\u4e86\u6bb5\u9519\u8bef\u3002\u8fdb\u4e00\u6b65\u8ffd\u95ee\u8fd9\u4e2a mbuf \u5730\u5740\u662f\u4ece\u54ea\u91cc\u6765\uff1f\u5b83\u5b9e\u9645\u662f\u901a\u8fc7\u5982\u4e0b\u4ee3\u7801\u4ece sw_ring \u4e2d\u52a0\u8f7d\u7684\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-c"},"141         mbp[0] = vld1q_u64((uint64_t *)(sw_ring + 0));\n142         desc[0] = vld1q_u64((uint64_t *)(rused + 0));\n143         vst1q_u64((uint64_t *)&rx_pkts[0], mbp[0]);\n")),(0,a.kt)("p",null,"\u6253\u5370 sw_ring \u4e2d\u7684\u591a\u4e2a mbuf \u5730\u5740\u53d1\u73b0\u90fd\u4e3a NULL\uff0c\u8bb0\u5f55\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-c"},"(gdb) print vq->sw_ring[0]\n$26 = (struct rte_mbuf *) 0x0\n(gdb) print vq->sw_ring[1]\n$27 = (struct rte_mbuf *) 0x0\n(gdb) print vq->sw_ring[2]\n$28 = (struct rte_mbuf *) 0x0\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u8fdb\u4e00\u6b65\u8ffd\u95ee\u4e3a\u4ec0\u4e48 sw_ring \u4e2d\u7684 mbuf \u4e3a NULL\uff1f")),(0,a.kt)("p",null,"\u6839\u636e\u8fc7\u53bb\u9605\u8bfb intel \u7f51\u5361\u9a71\u52a8\u7684\u7ecf\u9a8c\uff0c\u8fd9\u4e2a sw_ring \u4e00\u822c\u662f\u5728\u4e3a\u6bcf\u4e2a\u6536\u5305\u961f\u5217\u7533\u8bf7\u63cf\u8ff0\u7b26\u7684\u9636\u6bb5\u8d4b\u503c\u7684\uff0c\u6b64\u540e\u6536\u5305\u51fd\u6570\u5728\u5c06\u63cf\u8ff0\u7b26\u7684\u5305\u5411\u4e0a\u5c42\u8fd4\u56de\u65f6\u4f1a\u7533\u8bf7\u65b0\u7684 mbuf \u5e76\u66f4\u65b0\u76f8\u5173\u7684 sw_ring\u3002"),(0,a.kt)("p",null,"\u7ee7\u7eed\u9605\u8bfb\u4ee3\u7801\u786e\u8ba4 sw_ring \u5728 ",(0,a.kt)("strong",{parentName:"p"},"virtio_dev_rx_queue_setup")," \u51fd\u6570\u7684\u5982\u4e0b\u4ee3\u7801\u4e0a\u88ab\u914d\u7f6e\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-c"},"        /* Enqueue allocated buffers */\n        if (hw->use_simple_rxtx)\n            error = virtqueue_enqueue_recv_refill_simple(vq, m);\n        else\n            error = virtqueue_enqueue_recv_refill(vq, m);\n")),(0,a.kt)("p",null,"\u8fd9\u65f6\u5019\u5206\u6790\u5f97\u51fa\u5982\u4e0b\u7ed3\u8bba\uff1a"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"virtqueue_enqueue_recv_refill_simple")," \u51fd\u6570\u8d1f\u8d23\u586b\u5145 mbuf \u5730\u5740\u5230 sw_ring \u4e0a"),(0,a.kt)("li",{parentName:"ol"},"\u786e\u5b9a ",(0,a.kt)("strong",{parentName:"li"},"hw->use_simple_rxtx")," \u5728 ",(0,a.kt)("strong",{parentName:"li"},"virtio_dev_tx_queue_setup")," \u4e2d\u88ab\u91cd\u65b0\u8d4b\u503c\u4e3a 1"),(0,a.kt)("li",{parentName:"ol"},"\u786e\u5b9a l2fwd \u4e0e\u4ea7\u54c1 dpdk \u4e1a\u52a1\u7a0b\u5e8f\u4e2d\u5747\u5148\u6267\u884c ",(0,a.kt)("strong",{parentName:"li"},"rx_queue_setup")," \u518d\u6267\u884c ",(0,a.kt)("strong",{parentName:"li"},"tx_queue_setup")," ")),(0,a.kt)("p",null,"\u7b2c\u4e09\u70b9\u4e0e\u7b2c\u4e8c\u70b9\u56e0\u7d20\u5bfc\u81f4 ",(0,a.kt)("strong",{parentName:"p"},"rx_queue_setup")," \u4e2d\u3010\u4e0d\u80fd\u5224\u65ad\u3011\u5230 hw->use_simple_rxtx \u4e3a 1\uff0c\u5219",(0,a.kt)("strong",{parentName:"p"},"\u672a\u586b\u5145 sw_ring"),"\uff0c\u6536\u5305\u51fd\u6570\u8bbf\u95ee sw_ring \u4e2d\u4e3a NULL \u7684 mbuf \u65f6\u5c31\u4f1a\u51fa\u73b0\u6bb5\u9519\u8bef\u3002"),(0,a.kt)("p",null,"\u8fd9\u610f\u5473\u7740\u8fd9\u7248\u7684 virtio \u9a71\u52a8\uff0c\u9700\u8981\u5148 tx_queue_setup \u518d rx_queue_setup \u624d\u4e0d\u4f1a\u51fa\u95ee\u9898\uff0c\u8fd9\u4e00\u4f9d\u8d56\u660e\u663e\u4e0d\u5408\u7406\uff01"),(0,a.kt)("h2",{id:"\u95ee\u9898\u89e3\u51b3\u65b9\u6848"},"\u95ee\u9898\u89e3\u51b3\u65b9\u6848"),(0,a.kt)("p",null,"\u641c\u7d22 dpdk git log\uff0c\u627e\u5230\u5982\u4e0b commit \u4fe1\u606f\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-c"},'commit efc83a1e7fc319876835738871bf968e7ed5c935\nAuthor: Olivier Matz <olivier.matz@6wind.com>\nDate:   Thu Sep 7 14:13:43 2017 +0200\n\n    net/virtio: fix queue setup consistency\n\n    In rx/tx queue setup functions, some code is executed only if\n    use_simple_rxtx == 1. The value of this variable can change depending on\n    the offload flags or sse support. If Rx queue setup is called before Tx\n    queue setup, it can result in an invalid configuration:\n\n    - dev_configure is called: use_simple_rxtx is initialized to 0\n    - rx queue setup is called: queues are initialized without simple path\n      support\n    - tx queue setup is called: use_simple_rxtx switch to 1, and simple\n      Rx/Tx handlers are selected\n\n    Fix this by postponing a part of Rx/Tx queue initialization in\n    dev_start(), as it was the case in the initial implementation.\n\n    Fixes: 48cec290a3d2 ("net/virtio: move queue configure code to proper place")\n    Cc: stable@dpdk.org\n\n    Signed-off-by: Olivier Matz <olivier.matz@6wind.com>\n    Acked-by: Yuanhan Liu <yliu@fridaylinux.org>\n')),(0,a.kt)("p",null,"\u53c2\u8003\u4e0a\u8ff0\u4fee\u6539\u6253 patch \u5373\u53ef\u89e3\u51b3\u95ee\u9898\uff01"),(0,a.kt)("h2",{id:"\u53cd\u601d"},"\u53cd\u601d"),(0,a.kt)("p",null,"\u8fd9\u4e2a\u95ee\u9898\u7684\u5206\u6790\u8fc7\u7a0b\u6709\u4e9b\u6ce2\u6298\uff0c\u4e8b\u540e\u53cd\u601d\u4e0b\u53d1\u73b0\u786e\u5b9e\u5b58\u5728\u4e00\u4e9b\u503c\u5f97\u601d\u8003\u7684\u95ee\u9898\uff0c\u4e3b\u8981\u95ee\u9898\u5217\u4e3e\u5982\u4e0b\u3002"),(0,a.kt)("h3",{id:"1-\u672a\u6279\u5224\u6027\u770b\u5f85\u7f51\u4e0a\u641c\u7d22\u5230\u7684\u4fe1\u606f"},"1. \u672a\u6279\u5224\u6027\u770b\u5f85\u7f51\u4e0a\u641c\u7d22\u5230\u7684\u4fe1\u606f"),(0,a.kt)("p",null,"\u5728\u60f3\u5230\u8fd9\u4e2a\u95ee\u9898\u7684\u65f6\u5019\uff0c\u6211\u4f7f\u7528 starpage \u641c\u7d22\u4e86\u4e00\u4e0b\uff0c\u627e\u5230\u4e86\u5982\u4e0b\u94fe\u63a5\uff1a\n",(0,a.kt)("a",{parentName:"p",href:"https://stackoverflow.com/questions/26701262/how-to-check-the-existence-of-neon-on-arm"},"How to check the existence of NEON on arm?"),"\n",(0,a.kt)("a",{parentName:"p",href:"https://developer.arm.com/documentation/den0018/a/Compiling-NEON-Instructions/Detecting-presence-of-a-NEON-unit/Run-time-NEON-unit-detection"},"2.7.2. Run-time NEON unit detection"),"\n\u76f8\u5173\u7684\u63cf\u8ff0\u4fe1\u606f\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"As the /proc/cpuinfo output is text based, it is often preferred to look at the auxiliary vector \n/proc/self/auxv. This contains the kernel hwcap in a binary format. The /proc/self/auxv file can \nbe easily searched for the AT_HWCAP record, to check for the HWCAP_NEON bit (4096).\n")),(0,a.kt)("p",null,"\u6211\u5f53\u65f6\u5e76\u6ca1\u6709\u76f4\u63a5\u641c\u7d22\uff0c\u800c\u662f\u770b\u4e86\u4e0b dpdk \u89e3\u6790 cpuflag \u7684\u4ee3\u7801\uff0c\u53d1\u73b0\u5b83\u662f\u901a\u8fc7\u89e3\u6790 ",(0,a.kt)("inlineCode",{parentName:"p"},"/proc/self/auxv"),"\u6587\u4ef6\u6765\u786e\u5b9a arm cpu \u652f\u6301\u7684\u7279\u6b8a\u6307\u4ee4\uff0c\u800c\u4e0d\u662f\u901a\u8fc7\u8bbf\u95ee /proc/cpuinfo\u3002\u5176\u5b9e\u8fd9\u4e2a\u601d\u8def\u662f\u6b63\u786e\u7684\uff0c\u4ee3\u7801\u662f\u7b2c\u4e00\u624b\u7684\u8d44\u6599\uff0c\u7f51\u4e0a\u641c\u7d22\u7684\u4fe1\u606f\u5df2\u7ecf\u662f\u597d\u591a\u624b\u7684\u8d44\u6599\u4e86\uff0c\u5176\u53ef\u4fe1\u5ea6\u5df2\u7ecf\u5927\u6253\u6298\u6263\uff0c\u5bf9\u4e8e\u8fd9\u4e9b\u4fe1\u606f\u5e94\u8be5\u6279\u5224\u6027\u770b\u5f85\uff0c\u4e0d\u5e94\u8be5\u76f2\u76ee\u7684\u76f8\u4fe1\u3002"),(0,a.kt)("h3",{id:"2-\u5f53\u4e8b\u5b9e\u4e0e\u5206\u6790\u4e0d\u4e00\u81f4\u7684\u65f6\u5019\u4f18\u5148\u8d28\u7591\u4e86\u4e8b\u5b9e\u800c\u4e0d\u662f\u5206\u6790\u8fc7\u7a0b"},"2. \u5f53\u4e8b\u5b9e\u4e0e\u5206\u6790\u4e0d\u4e00\u81f4\u7684\u65f6\u5019\uff0c\u4f18\u5148\u8d28\u7591\u4e86\u4e8b\u5b9e\u800c\u4e0d\u662f\u5206\u6790\u8fc7\u7a0b"),(0,a.kt)("p",null,"\u73b0\u9636\u6bb5\u6211\u89e3\u51b3\u95ee\u9898\u7684\u4e00\u822c\u8fc7\u7a0b\u662f\u8fd9\u6837\u7684\uff1a"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u5728\u5728\u7ebf\u7b14\u8bb0\u4e2d\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u95ee\u9898\u5b9a\u4f4d\u9875\u9762"),(0,a.kt)("li",{parentName:"ol"},"\u5199\u4e0b\u95ee\u9898\u63cf\u8ff0\u3001\u73af\u5883\u4fe1\u606f\u3001\u7136\u540e\u5f00\u59cb\u8fb9\u6536\u96c6\u4fe1\u606f\u8fb9\u8bb0\u5f55\u8fb9\u5206\u6790\u95ee\u9898"),(0,a.kt)("li",{parentName:"ol"},"\u5206\u6790\u4e0d\u4e0b\u53bb\u7684\u65f6\u5019\uff0c\u589e\u52a0\u4e00\u4e2a\u63d0\u95ee\u6807\u9898\uff0c\u5199\u4e0b\u5f53\u524d\u7684\u7591\u70b9"),(0,a.kt)("li",{parentName:"ol"},"\u5bfb\u627e\u786e\u5b9a\u5f53\u524d\u7591\u70b9\u7684\u6570\u636e\u3001\u8bc1\u636e"),(0,a.kt)("li",{parentName:"ol"},"\u91cd\u65b0\u5ba1\u89c6\u95ee\u9898\u4e0e\u63d0\u51fa\u7684\u7591\u70b9\uff0c\u5faa\u73af\u8fd9\u4e00\u8fc7\u7a0b\uff0c\u76f4\u81f3\u89e3\u51b3\u95ee\u9898")),(0,a.kt)("p",null,"\u968f\u7740\u4e0a\u9762\u8fd9\u4e00\u8fc7\u7a0b\u7684\u63a8\u5e7f\uff0c\u6211\u7684\u95ee\u9898\u89e3\u51b3\u80fd\u529b\u5f97\u5230\u4e86\u5f88\u5927\u7684\u63d0\u9ad8\uff0c\u9010\u6e10",(0,a.kt)("strong",{parentName:"p"},"\u4ece\u5177\u4f53\u7684\u95ee\u9898\u8d70\u5411\u5bfb\u627e\u81ea\u5df1\u5bf9\u95ee\u9898\u7684\u8ba4\u77e5\u5b58\u5728\u7684\u95ee\u9898"),"\uff0c\u5f80\u5f80\u5f53\u6211\u5c06\u95ee\u9898\u63cf\u8ff0\u6e05\u695a\uff0c\u5c06\u4e00\u4e9b\u63d0\u95ee\u9879\u76ee\u660e\u786e\u7ed3\u8bba\u65f6\u95ee\u9898\u540c\u65f6\u4e5f\u5f97\u5230\u4e86\u89e3\u51b3\uff0c\u8fd9\u8ba9\u6211\u5bf9\u81ea\u5df1\u7684\u5206\u6790\u8fc7\u7a0b\u5145\u6ee1\u4e86\u4fe1\u5fc3\uff0c\u5f53\u4e8b\u5b9e\u4e0e\u5206\u6790\u4e0d\u4e00\u81f4\u65f6\u5c31\u5bb9\u6613\u51fa\u73b0\u5426\u5b9a\u4e8b\u5b9e\u7684\u60c5\u51b5\u3002"),(0,a.kt)("p",null,"\u7136\u800c\u4e8b\u5b9e\u80dc\u4e8e\u96c4\u8fa9\uff0c\u5728\u5de5\u4f5c\u4e0a\u8fd8\u662f\u5c3d\u53ef\u80fd\u505a\u7684\u66f4\u5ba2\u89c2\u4e00\u4e9b\uff0c\u7f3a\u4e4f\u4e86\u5ba2\u89c2\u5c31\u5f88\u5bb9\u6613\u88ab\u6253\u8138\u3002"),(0,a.kt)("h3",{id:"3-\u5bf9\u6bd4\u5b9e\u9a8c\u4e2d\u5ffd\u7565\u4e86\u5173\u952e\u7684\u53d8\u5316\u91cf\u5bfc\u81f4\u5f97\u51fa\u9519\u8bef\u7684\u7ed3\u8bba"},"3. \u5bf9\u6bd4\u5b9e\u9a8c\u4e2d\u5ffd\u7565\u4e86\u5173\u952e\u7684\u53d8\u5316\u91cf\uff0c\u5bfc\u81f4\u5f97\u51fa\u9519\u8bef\u7684\u7ed3\u8bba"),(0,a.kt)("p",null,"\u5728\u8fd9\u4e2a\u95ee\u9898\u4e2d\u4f7f\u7528 l2fwd \u505a\u5bf9\u6bd4\u5b9e\u9a8c\u5374\u6ca1\u6709\u627e\u5230\u771f\u6b63\u7684\u53d8\u5316\u91cf\u3002\u5bf9\u4e8e l2fwd \u4e0e dpdk \u4e1a\u52a1\u7a0b\u5e8f\u800c\u8a00\uff0c",(0,a.kt)("strong",{parentName:"p"},"\u5904\u7406\u5668\u662f\u5426\u652f\u6301 neon \u7684\u68c0\u6d4b\u662f\u4f7f\u7528\u540c\u4e00\u5957 dpdk \u4ee3\u7801\u505a\u7684\uff0c\u53d8\u5316\u70b9\u4e0d\u5728\u8fd9\u91cc"),"\uff0c\u53d8\u5316\u70b9\u5b9e\u9645\u5728",(0,a.kt)("strong",{parentName:"p"},"\u4e24\u4e2a\u7a0b\u5e8f\u7684\u63a5\u53e3\u914d\u7f6e"),"\u4e2d\uff0c\u5ffd\u7565\u4e86\u8fd9\u4e2a\u53d8\u91cf\uff0c\u5374\u8bef\u5c06 cpu \u662f\u5426\u652f\u6301 neon \u6307\u4ee4\u4f5c\u4e3a\u53d8\u91cf\uff0c\u8fdb\u800c\u5f97\u51fa\u4e86\u9519\u8bef\u7684\u7ed3\u8bba\u3002"),(0,a.kt)("p",null,"\u8fd9\u5757\u8fd8\u9700\u8981\u7ee7\u7eed\u6539\u8fdb\uff01"))}_.isMDXComponent=!0}}]);