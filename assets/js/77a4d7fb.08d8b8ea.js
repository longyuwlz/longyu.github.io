"use strict";(self.webpackChunklongyu_website=self.webpackChunklongyu_website||[]).push([[5340],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return m}});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var i=r.createContext({}),s=function(e){var t=r.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},p=function(e){var t=s(e.components);return r.createElement(i.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},c=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,l=e.originalType,i=e.parentName,p=f(e,["components","mdxType","originalType","parentName"]),c=s(n),m=o,d=c["".concat(i,".").concat(m)]||c[m]||u[m]||l;return n?r.createElement(d,a(a({ref:t},p),{},{components:n})):r.createElement(d,a({ref:t},p))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var l=n.length,a=new Array(l);a[0]=c;var f={};for(var i in t)hasOwnProperty.call(t,i)&&(f[i]=t[i]);f.originalType=e,f.mdxType="string"==typeof e?e:o,a[1]=f;for(var s=2;s<l;s++)a[s]=n[s];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}c.displayName="MDXCreateElement"},2302:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return i},default:function(){return m},frontMatter:function(){return f},metadata:function(){return s},toc:function(){return u}});var r=n(7462),o=n(3366),l=(n(7294),n(3905)),a=["components"],f={},i="ethtool \u4fee\u6539\u7f51\u5361 eeprom \u5185\u5bb9",s={unversionedId:"\u6280\u672f\u535a\u5ba2/linux-system/network/ethtool/ethtool \u4fee\u6539\u7f51\u5361 eeprom \u5185\u5bb9",id:"\u6280\u672f\u535a\u5ba2/linux-system/network/ethtool/ethtool \u4fee\u6539\u7f51\u5361 eeprom \u5185\u5bb9",title:"ethtool \u4fee\u6539\u7f51\u5361 eeprom \u5185\u5bb9",description:"\u95ee\u9898\u63cf\u8ff0",source:"@site/docs/\u6280\u672f\u535a\u5ba2/linux-system/network/ethtool/ethtool \u4fee\u6539\u7f51\u5361 eeprom \u5185\u5bb9.md",sourceDirName:"\u6280\u672f\u535a\u5ba2/linux-system/network/ethtool",slug:"/\u6280\u672f\u535a\u5ba2/linux-system/network/ethtool/ethtool \u4fee\u6539\u7f51\u5361 eeprom \u5185\u5bb9",permalink:"/longyu.github.io/\u6280\u672f\u535a\u5ba2/linux-system/network/ethtool/ethtool \u4fee\u6539\u7f51\u5361 eeprom \u5185\u5bb9",draft:!1,editUrl:"https://github.com/longyuwlz/longyu.github.io/docs/\u6280\u672f\u535a\u5ba2/linux-system/network/ethtool/ethtool \u4fee\u6539\u7f51\u5361 eeprom \u5185\u5bb9.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"\u963f\u91cc\u4e91\u670d\u52a1\u5668 yum install \u547d\u4ee4\u4e00\u76f4\u8d85\u65f6\uff0c\u5bfc\u81f4\u547d\u4ee4\u65e0\u6cd5\u5b89\u88c5",permalink:"/longyu.github.io/\u6280\u672f\u535a\u5ba2/linux-system/network/debug/\u963f\u91cc\u4e91\u670d\u52a1\u5668 yum install \u547d\u4ee4\u4e00\u76f4\u8d85\u65f6\uff0c\u5bfc\u81f4\u547d\u4ee4\u65e0\u6cd5\u5b89\u88c5"},next:{title:"ethtool \u652f\u6301 dump i40e \u7f51\u5361\u7684\u5bc4\u5b58\u5668",permalink:"/longyu.github.io/\u6280\u672f\u535a\u5ba2/linux-system/network/ethtool/ethtool \u652f\u6301 dump x710 \u7f51\u5361\u5bc4\u5b58\u5668"}},p={},u=[{value:"\u95ee\u9898\u63cf\u8ff0",id:"\u95ee\u9898\u63cf\u8ff0",level:2},{value:"\u4f7f\u7528\u865a\u62df\u673a\u8fdb\u884c\u6a21\u62df",id:"\u4f7f\u7528\u865a\u62df\u673a\u8fdb\u884c\u6a21\u62df",level:2},{value:"\u83b7\u53d6\u9a71\u52a8\u4e0e\u56fa\u4ef6\u7248\u672c\u4fe1\u606f",id:"\u83b7\u53d6\u9a71\u52a8\u4e0e\u56fa\u4ef6\u7248\u672c\u4fe1\u606f",level:3},{value:"man ethtool",id:"man-ethtool",level:2},{value:"-e \u9009\u9879",id:"-e-\u9009\u9879",level:3},{value:"offset \u4e0e length \u53c2\u6570",id:"offset-\u4e0e-length-\u53c2\u6570",level:3},{value:"-E \u9009\u9879",id:"-e-\u9009\u9879-1",level:3},{value:"strtoull \u51fd\u6570\u5c06\u5b57\u7b26\u4e32\u8f6c\u5316\u4e3a\u6574\u6570\u503c",id:"strtoull-\u51fd\u6570\u5c06\u5b57\u7b26\u4e32\u8f6c\u5316\u4e3a\u6574\u6570\u503c",level:2},{value:"\u5176\u5b83\u7684\u8bbe\u5b9a eeprom \u5185\u5bb9\u7684\u65b9\u5f0f",id:"\u5176\u5b83\u7684\u8bbe\u5b9a-eeprom-\u5185\u5bb9\u7684\u65b9\u5f0f",level:2}],c={toc:u};function m(e){var t=e.components,n=(0,o.Z)(e,a);return(0,l.kt)("wrapper",(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"ethtool-\u4fee\u6539\u7f51\u5361-eeprom-\u5185\u5bb9"},"ethtool \u4fee\u6539\u7f51\u5361 eeprom \u5185\u5bb9"),(0,l.kt)("h2",{id:"\u95ee\u9898\u63cf\u8ff0"},"\u95ee\u9898\u63cf\u8ff0"),(0,l.kt)("p",null,"\u5728\u89e3\u51b3\u5de5\u4f5c\u4e2d\u9047\u5230\u7684\u4e00\u4e2a\u95ee\u9898\u65f6\uff0c\u6709\u5bf9\u6bd4\u51fa\u51fa\u95ee\u9898\u7684\u8bbe\u5907\u7f51\u5361\u7684 eeprom \u4e0e\u5176\u5b83\u76f8\u540c\u56fa\u4ef6\u7248\u672c\u5382\u5546\u7684\u76f8\u540c\u7f51\u5361\u7684 eeprom \u5185\u5bb9\u5b58\u5728\u533a\u522b\u3002"),(0,l.kt)("p",null,"\u901a\u8fc7\u9605\u8bfb\u624b\u518c\uff0c\u53d1\u73b0\u533a\u522b\u5e76\u4e0d\u53ea\u662f\u90a3\u4e9b\u63a5\u53e3\u7279\u5b9a\u7684\u4fe1\u606f\uff0c\u5982 mac \u5730\u5740\u3001device id \u7b49\u7b49\uff0c\u8fd8\u6709\u4e00\u4e9b\u4e0e\u914d\u7f6e\u76f8\u5173\u7684\u5185\u5bb9\uff0c\u6000\u7591\u53ef\u80fd\u6709\u5f71\u54cd\uff0c\u9700\u8981",(0,l.kt)("strong",{parentName:"p"},"\u4fee\u6539"),"\u51fa\u95ee\u9898\u8bbe\u5907\u7684 ",(0,l.kt)("strong",{parentName:"p"},"eeprom")," \u4e2d\u7684\u76f8\u5173\u5185\u5bb9\u8fdb\u884c\u6d4b\u8bd5\u3002"),(0,l.kt)("h2",{id:"\u4f7f\u7528\u865a\u62df\u673a\u8fdb\u884c\u6a21\u62df"},"\u4f7f\u7528\u865a\u62df\u673a\u8fdb\u884c\u6a21\u62df"),(0,l.kt)("p",null,"\u4ee5\u524d\u6ca1\u6709\u4fee\u6539\u8fc7 eeprom \u5185\u5bb9\uff0c\u53ea\u662f\u4e86\u89e3\u8fc7\u53ef\u4ee5\u901a\u8fc7 ethtool \u547d\u4ee4\u6765 dump eeprom \u4fe1\u606f\u3002\u5728 ethtool \u547d\u4ee4\u5e2e\u52a9\u4fe1\u606f\u4e2d\u67e5\u627e\uff0c\u53d1\u73b0\u5b83\u4e5f\u53ef\u4ee5\u4fee\u6539 eeprom \u7684\u5185\u5bb9\u3002"),(0,l.kt)("p",null,"\u4e0d\u8fc7\u76f4\u63a5\u4fee\u6539\u7269\u7406\u7f51\u5361\u7684 eeprom \u53ef\u80fd\u4f1a\u628a\u7f51\u5361\u5237\u6210\u7816\uff0c\u5c31\u5148\u4f7f\u7528\u865a\u62df\u673a\u6a21\u62df\u4e86\u4e0b\u3002"),(0,l.kt)("h3",{id:"\u83b7\u53d6\u9a71\u52a8\u4e0e\u56fa\u4ef6\u7248\u672c\u4fe1\u606f"},"\u83b7\u53d6\u9a71\u52a8\u4e0e\u56fa\u4ef6\u7248\u672c\u4fe1\u606f"),(0,l.kt)("p",null,"\u4f7f\u7528 82574 \u865a\u62df\u7f51\u5361\uff0c\u9a71\u52a8\u4e0e\u56fa\u4ef6\u7248\u672c\u4fe1\u606f\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"longyu@virt-debian10:~$ sudo ethtool -i enp9s0\ndriver: e1000e\nversion: 3.2.6-k\nfirmware-version: 2.1-0\nexpansion-rom-version: \nbus-info: 0000:09:00.0\nsupports-statistics: yes\nsupports-test: yes\nsupports-eeprom-access: yes\nsupports-register-dump: yes\nsupports-priv-flags: no\n")),(0,l.kt)("h2",{id:"man-ethtool"},"man ethtool"),(0,l.kt)("p",null,"man ethtool \u83b7\u53d6\u5230\u4e86\u5982\u4e0b\u4e0e eeprom \u76f8\u5173\u7684\u547d\u4ee4\u884c\u9009\u9879\u63cf\u8ff0\u4fe1\u606f\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-c"},"       -e --eeprom-dump\n              Retrieves and prints an EEPROM dump for the specified network device.  When raw is enabled, then it dumps the raw EEPROM data to stdout.  The  length  and\n              offset parameters allow dumping certain portions of the EEPROM.  Default is to dump the entire EEPROM.\n\n           raw on|off\n\n           offset N\n\n           length N\n\n       -E --change-eeprom\n              If  value  is  specified,  changes  EEPROM byte for the specified network device.  offset and value specify which byte and it's new value. If value is not\n              specified, stdin is read and written to the EEPROM. The length and offset parameters allow writing to certain portions of the EEPROM.  Because of the per\u2010\n              sistent nature of writing to the EEPROM, a device-specific magic key must be specified to prevent the accidental writing to the EEPROM.\n")),(0,l.kt)("h3",{id:"-e-\u9009\u9879"},"-e \u9009\u9879"),(0,l.kt)("p",null,"-e \u9009\u9879\u7528\u4e8e dump eeprom \u5185\u5bb9\uff0c\u53ef\u4ee5\u6307\u5b9a dump \u7684\u504f\u79fb\u91cf\u4e0e\u57fa\u5730\u5740\uff0c\u540c\u65f6 dump \u7684\u8f93\u51fa\u683c\u5f0f\u652f\u6301 raw \u4e0e\u975e raw \u7684\u683c\u5f0f\uff0c\u8fd9\u4e24\u4e2a\u683c\u5f0f\u7684\u533a\u522b\u5f88\u5bb9\u6613\u901a\u8fc7\u5b9e\u9645\u6267\u884c\u53d1\u73b0\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"longyu@virt-debian10:~$ sudo ethtool -e  enp9s0 raw on | od -x\n0000000 5452 0800 ef3f 0420 f746 2010 ffff ffff\n0000020 0000 0000 026b 10d3 8086 10d3 0000 8058\n0000040 0000 2001 7e7c ffff 1000 00c8 0000 2704\n0000060 6cc9 3150 070e 460b 2d84 0100 f000 0706\n0000100 6000 0080 0f04 7fff 4f01 c600 0000 20ff\n0000120 0028 0003 0000 0000 0000 0003 0000 ffff\n0000140 0100 c000 121c c007 ffff ffff ffff ffff\n0000160 ffff ffff ffff ffff 0000 0120 ffff 8dd8\n0000200\n\nlongyu@virt-debian10:~$ sudo ethtool -e  enp9s0 raw off\nOffset      Values\n------      ------\n0x0000:     52 54 00 08 3f ef 20 04 46 f7 10 20 ff ff ff ff \n0x0010:     00 00 00 00 6b 02 d3 10 86 80 d3 10 00 00 58 80 \n0x0020:     00 00 01 20 7c 7e ff ff 00 10 c8 00 00 00 04 27 \n0x0030:     c9 6c 50 31 0e 07 0b 46 84 2d 00 01 00 f0 06 07 \n0x0040:     00 60 80 00 04 0f ff 7f 01 4f 00 c6 00 00 ff 20 \n0x0050:     28 00 03 00 00 00 00 00 00 00 03 00 00 00 ff ff \n0x0060:     00 01 00 c0 1c 12 07 c0 ff ff ff ff ff ff ff ff \n0x0070:     ff ff ff ff ff ff ff ff 00 00 20 01 ff ff d8 8d \n")),(0,l.kt)("p",null,"\u53ef\u4ee5\u770b\u5230 raw \u683c\u5f0f\u5f00\u542f\u540e\uff0cdump \u51fa\u7684\u5185\u5bb9\u6ca1\u6709\u8fdb\u884c\u4efb\u4f55\u5904\u7406\uff0c\u8fd9\u91cc\u6211\u7528 od -x \u6765\u8f6c\u5316\u4e86\u4e0b\uff0c\u4e0d\u7136\u5b83\u4f1a",(0,l.kt)("strong",{parentName:"p"},"\u8f93\u51fa\u4e00\u5806\u4e71\u7801"),"\u3002"),(0,l.kt)("p",null,"raw \u683c\u5f0f\u5173\u95ed\u540e\uff0cdump \u51fa\u7684\u5185\u5bb9\u8fdb\u884c\u4e86\u683c\u5f0f\u5316\uff0c\u4e0e od -x \u8f93\u51fa\u7684\u683c\u5f0f\u7c7b\u4f3c\u3002",(0,l.kt)("strong",{parentName:"p"},"\u9ed8\u8ba4\u5173\u95ed raw \u683c\u5f0f\u3002")),(0,l.kt)("p",null,"\u540c\u65f6\u503c\u5f97\u4e00\u63d0\u7684\u662f eeprom \u7684\u524d\u516d\u4e2a\u5b57\u8282\u8868\u793a\u7684\u662f",(0,l.kt)("strong",{parentName:"p"},"\u7f51\u5361\u7684 mac \u5730\u5740"),"\uff0c\u8fd9\u70b9\u53ef\u4ee5\u901a\u8fc7\u6267\u884c ifconfig \u6765\u786e\u8ba4\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"longyu@virt-debian10:~$ sudo ifconfig enp9s0\nenp9s0: flags=4098<BROADCAST,MULTICAST>  mtu 1500\n        ether 52:54:00:08:3f:ef  txqueuelen 1000  (Ethernet)\n        RX packets 0  bytes 0 (0.0 B)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 0  bytes 0 (0.0 B)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n        device interrupt 23  memory 0xfc240000-fc260000  \n")),(0,l.kt)("p",null,"\u53ef\u4ee5\u770b\u5230 ifconfig \u770b\u5230\u7684\u63a5\u53e3\u7684 mac \u5730\u5740\u4e3a 52:54:00:08:3f:ef \u6b63\u597d\u5bf9\u5e94 eeprom \u4e2d\u7684\u524d 6 \u4e2a\u5b57\u8282\u3002"),(0,l.kt)("h3",{id:"offset-\u4e0e-length-\u53c2\u6570"},"offset \u4e0e length \u53c2\u6570"),(0,l.kt)("p",null,"\u6211\u4eec\u4e5f\u53ef\u4ee5\u6307\u5b9a offset \u4e0e length \u6765\u89c2\u5bdf ethtool \u547d\u4ee4\u7684\u8f93\u51fa\uff0c\u4e00\u4e2a\u793a\u4f8b\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"longyu@virt-debian10:~$ sudo ethtool -e enp9s0 offset 0 length 1\nOffset      Values\n------      ------\n0x0000:     52 \nlongyu@virt-debian10:~$ sudo ethtool -e enp9s0 offset 1 length 1\nOffset      Values\n------      ------\n0x0001:     54 \n")),(0,l.kt)("p",null,"\u4e0a\u8ff0\u793a\u4f8b\u4e2d\uff0c\u7b2c\u4e00\u4e2a\u547d\u4ee4\u884c\u6307\u5b9a\u4e86 offset \u4e3a 0\uff0c\u957f\u5ea6\u4e3a 1\uff0cdump \u51fa\u7684\u5c31\u662f eeprom \u4e2d\u7684\u7b2c 0 \u5b57\u8282\u5904\u7684\u503c\uff1b\u7b2c\u4e8c\u4e2a\u547d\u4ee4\u884c\u6307\u5b9a\u4e86 offset \u4e3a 1\uff0c\u957f\u5ea6\u4e3a 1\uff0cdump \u51fa\u7684\u5c31\u662f eeprom \u4e2d\u7684\u7b2c 1\u3000\u4e2a\u5b57\u8282\u5904\u7684\u503c\u3002"),(0,l.kt)("p",null," \u8fd9\u91cc\u503c\u7684\u4e00\u63d0\u7684\u662f eeprom \u7684\u5185\u5bb9\u901a\u5e38\u662f",(0,l.kt)("strong",{parentName:"p"},"\u4ee5\u5b57\u4e3a\u5355\u4f4d"),"\u7684\uff0c\u4e00\u4e2a\u5b57\u8868\u793a",(0,l.kt)("strong",{parentName:"p"},"\u4e24\u4e2a\u5b57\u8282"),"\u7684\u5185\u5bb9\uff0c\u5176\u5185\u90e8\u4e00\u822c\u662f\u901a\u8fc7 i2c \u603b\u7ebf\u6765\u8bfb\u53d6 eeprom \u4fe1\u606f\u7684\uff0c",(0,l.kt)("strong",{parentName:"p"},"\u800c i2c \u603b\u7ebf\u8bfb\u53d6\u7684\u5355\u4f4d\u5c31\u662f\u5b57\uff0c\u624b\u518c\u4e2d\u4e5f\u662f\u4ee5\u5b57\u4e3a\u5355\u4f4d\u63cf\u8ff0\u4e0d\u540c\u5b57\u6bb5\u7684\u542b\u4e49\u7684\u3002")),(0,l.kt)("h3",{id:"-e-\u9009\u9879-1"},"-E \u9009\u9879"),(0,l.kt)("p",null,"\u4e0a\u6587\u4e2d\u4e0e -E \u9009\u9879\u76f8\u5173\u7684 manual \u4e2d\u7684\u63cf\u8ff0\u4fe1\u606f\u660e\u786e\u6307\u51fa\uff0c\u4e3a\u4e86\u907f\u514d\u610f\u5916\u5199\u5165 eeprom \u9020\u6210\u7684\u95ee\u9898\uff0c\u4fee\u6539 eeprom \u5185\u5bb9\u65f6\u9700\u8981\u6307\u5b9a\u4e00\u4e2a",(0,l.kt)("strong",{parentName:"p"},"\u8bbe\u5907\u7279\u5b9a\u7684 magic"),"\uff0c\u8fd9\u4e2a magic \u4e00\u822c\u662f",(0,l.kt)("strong",{parentName:"p"},"\u8bbe\u5907\u7684 vendor \u4e0e device id \u7684\u7ec4\u5408"),"\uff0c\u540c\u65f6 offset \u4e0e length \u53c2\u6570\u8ba9\u6211\u4eec\u80fd\u591f\u4fee\u6539\u6307\u5b9a\u4f4d\u7f6e\u5904\u7684\u6307\u5b9a\u957f\u5ea6\u7684 eeprom \u5185\u5bb9\u3002"),(0,l.kt)("p",null,"\u5173\u4e8e magic \u6821\u9a8c\u5185\u5bb9\uff0c\u6211\u4eec\u53ef\u4ee5\u4ece e100e \u9a71\u52a8\u4e2d set_eeprom \u7684\u51fd\u6570\u6570\u4e2d\u627e\u5230\u76f8\u5173\u7684\u5185\u5bb9\u3002"),(0,l.kt)("p",null,"\u76f8\u5173\u4ee3\u7801\u6458\u5f55\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-c"},"static int e1000_set_eeprom(struct net_device *netdev,\n                struct ethtool_eeprom *eeprom, u8 *bytes)\n{\n    struct e1000_adapter *adapter = netdev_priv(netdev);\n    struct e1000_hw *hw = &adapter->hw;\n    u16 *eeprom_buff;\n    void *ptr;\n    int max_len;\n    int first_word;\n    int last_word;\n    int ret_val = 0;\n    u16 i;\n\n    if (eeprom->len == 0)\n        return -EOPNOTSUPP;\n\n    if (eeprom->magic !=\n        (adapter->pdev->vendor | (adapter->pdev->device << 16)))\n        return -EFAULT;\n")),(0,l.kt)("p",null,"\u53ef\u4ee5\u770b\u5230\u8fd9\u91cc magic \u7684\u503c\u4f1a\u4e0e\u9ad8\u5341\u516d\u4f4d\u7684 device id \u4e0e\u4f4e\u5341\u516d\u4f4d\u7684 vendor id \u6bd4\u8f83\uff0c\u4e0d\u4e00\u81f4\u5219\u76f4\u63a5\u8fd4\u56de\u3002"),(0,l.kt)("p",null,"\u8fd9\u610f\u5473\u7740\u6211\u4eec\u6307\u5b9a\u7684 magic \u5185\u5bb9\u5e94\u8be5\u7c7b\u4f3c 15338086 (I210 \u7f51\u5361) \u8fd9\u6837\u7684\u503c\uff0c\u5728\u6211\u7684\u6d4b\u8bd5\u73af\u5883\u4e2d 82574L \u7f51\u5361\u5bf9\u5e94\u7684 magic \u5185\u5bb9\u4e3a 0x10d38086\u3002"),(0,l.kt)("p",null,"\u4e00\u4e2a\u5177\u4f53\u7684\u793a\u4f8b\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"longyu@virt-debian10:~$ sudo ethtool -e enp9s0  offset 0 length 1 \nOffset      Values\n------      ------\n0x0000:     52 \nlongyu@virt-debian10:~$ sudo ethtool -E enp9s0 magic 0x10d38086 offset 0 length 1 value 0xFF\nlongyu@virt-debian10:~$ sudo ethtool -e enp9s0  offset 0 length 1 \nOffset      Values\n------      ------\n0x0000:     ff \n")),(0,l.kt)("p",null,"\u53ef\u4ee5\u770b\u5230\uff0c\u5728\u4fee\u6539\u524d eeprom 0 \u5b57\u8282\u5904\u5185\u5bb9\u4e3a 52\uff0c\u4fee\u6539\u540e\u503c\u53d8\u4e3a\u4e86 FF\uff0c\u4fee\u6539\u6210\u529f\u3002"),(0,l.kt)("p",null,"\u5982\u679c\u4f60\u8fd9\u65f6\u5019 dump \u6240\u6709\u7684 eeprom \u5185\u5bb9\u4e0e\u65e7\u7684\u5185\u5bb9\u8fdb\u884c\u5bf9\u6bd4\uff0c\u4f60\u4f1a\u53d1\u73b0\u8fd8\u6709\u5176\u5b83\u4f60\u6ca1\u6709\u4fee\u6539\u7684\u5730\u65b9\u7684\u503c\u4e5f\u4ea7\u751f\u4e86\u53d8\u5316\uff0c\u8fd9\u91cc\u5e94\u8be5\u662f eeprom \u7684 ",(0,l.kt)("strong",{parentName:"p"},"checksum")," \u5b57\u6bb5\u7684\u53d8\u5316\u3002"),(0,l.kt)("p",null,"eeprom \u5185\u5bb9\u66f4\u65b0\u540e\uff0c",(0,l.kt)("strong",{parentName:"p"},"checksum \u5185\u5bb9"),"\u4e5f\u9700\u8981\u968f\u4e4b\u66f4\u65b0\u3002checksum \u4e00\u822c\u5728\u7f51\u5361\u521d\u59cb\u5316\u7684\u8fc7\u7a0b\u4e2d\u88ab\u7528\u6765\u6821\u9a8c eeprom \u65f6\u5019\u6709\u6548\u3002"),(0,l.kt)("h2",{id:"strtoull-\u51fd\u6570\u5c06\u5b57\u7b26\u4e32\u8f6c\u5316\u4e3a\u6574\u6570\u503c"},"strtoull \u51fd\u6570\u5c06\u5b57\u7b26\u4e32\u8f6c\u5316\u4e3a\u6574\u6570\u503c"),(0,l.kt)("p",null,"\u5bf9\u4e8e\u8fd9\u91cc magic\u3001offset\u3001length\u3001value \u7b49\u53c2\u6570\u6307\u5b9a\u7684\u503c\u7684\u683c\u5f0f\uff0c\u901a\u8fc7\u9605\u8bfb ethtool \u4ee3\u7801\uff0c\u6211\u53d1\u73b0\u5b83\u4eec\u90fd\u662f\u7528 strtoull \u51fd\u6570\u6765\u5c06\u5b57\u7b26\u4e32\u8f6c\u5316\u4e3a\u6574\u6570\u503c\u7684\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"      The  strtoul() function converts the initial part of the string in nptr to an unsigned \n      long int value according to the given base, which must be between 2 and 36 \n      inclusive, or be the special value 0.\n\n      The string may begin with an arbitrary amount of white space (as determined by \n      isspace(3)) followed by a single optional '+' or '-' sign.  If base is zero or 16,\n      the  string  may then include a \"0x\" prefix, and the number will be read in base\n      16; otherwise, a zero base is taken as 10 (decimal) unless the next character is\n      '0', in which case it is taken as 8 (octal).\n")),(0,l.kt)("p",null,"ethtool \u547d\u4ee4\u4e2d\u83b7\u53d6 magic\u3001offset\u3001length\u3001value \u53c2\u6570\u7684\u503c\uff0c\u6838\u5fc3\u662f\u901a\u8fc7\u8c03\u7528\u5982\u4e0b\u51fd\u6570\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-c"},"stroull(str, &endp, 0)\n")),(0,l.kt)("p",null,"\u8fd9\u91cc base \u4e3a 0 \u662f\u4e00\u4e2a\u7279\u6b8a\u7684\u8bbe\u5b9a\uff0c\u6839\u636e\u4e0a\u9762 manual \u4e2d\u7684\u8bf4\u660e\uff0c\u5b83\u53ef\u4ee5\u4f7f\u7528 0x \u524d\u7f00\u6807\u8bc6\u51fa\u7684 16 \u8fdb\u5236\u683c\u5f0f\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 10 \u8fdb\u5236\u683c\u5f0f\uff0c\u6216\u8005\u4ee5 0 \u6807\u5fd7\u7684 8 \u8fdb\u5236\u683c\u5f0f\u3002"),(0,l.kt)("h2",{id:"\u5176\u5b83\u7684\u8bbe\u5b9a-eeprom-\u5185\u5bb9\u7684\u65b9\u5f0f"},"\u5176\u5b83\u7684\u8bbe\u5b9a eeprom \u5185\u5bb9\u7684\u65b9\u5f0f"),(0,l.kt)("p",null,"\u9664\u4e86 ethtool \u8bbe\u5b9a eeprom \u5185\u5bb9\u4e4b\u5916\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u5236\u4f5c\u4e00\u4e2a dos \u76d8\u5f15\u5bfc\u7cfb\u7edf\uff0c\u4f7f\u7528 eepudate \u547d\u4ee4\u6765\u83b7\u53d6\u3001\u66f4\u65b0 eeprom\uff0c\u8fd9\u79cd\u65b9\u5f0f\u76f8\u5bf9\u9ebb\u70e6\u4e00\u70b9\u3002"))}m.isMDXComponent=!0}}]);