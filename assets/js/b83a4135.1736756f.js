"use strict";(self.webpackChunklongyu_website=self.webpackChunklongyu_website||[]).push([[805],{3905:function(e,r,f){f.d(r,{Zo:function(){return c},kt:function(){return u}});var n=f(7294);function o(e,r,f){return r in e?Object.defineProperty(e,r,{value:f,enumerable:!0,configurable:!0,writable:!0}):e[r]=f,e}function t(e,r){var f=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),f.push.apply(f,n)}return f}function a(e){for(var r=1;r<arguments.length;r++){var f=null!=arguments[r]?arguments[r]:{};r%2?t(Object(f),!0).forEach((function(r){o(e,r,f[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(f)):t(Object(f)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(f,r))}))}return e}function i(e,r){if(null==e)return{};var f,n,o=function(e,r){if(null==e)return{};var f,n,o={},t=Object.keys(e);for(n=0;n<t.length;n++)f=t[n],r.indexOf(f)>=0||(o[f]=e[f]);return o}(e,r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);for(n=0;n<t.length;n++)f=t[n],r.indexOf(f)>=0||Object.prototype.propertyIsEnumerable.call(e,f)&&(o[f]=e[f])}return o}var l=n.createContext({}),p=function(e){var r=n.useContext(l),f=r;return e&&(f="function"==typeof e?e(r):a(a({},r),e)),f},c=function(e){var r=p(e.components);return n.createElement(l.Provider,{value:r},e.children)},d={inlineCode:"code",wrapper:function(e){var r=e.children;return n.createElement(n.Fragment,{},r)}},s=n.forwardRef((function(e,r){var f=e.components,o=e.mdxType,t=e.originalType,l=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),s=p(f),u=o,_=s["".concat(l,".").concat(u)]||s[u]||d[u]||t;return f?n.createElement(_,a(a({ref:r},c),{},{components:f})):n.createElement(_,a({ref:r},c))}));function u(e,r){var f=arguments,o=r&&r.mdxType;if("string"==typeof e||o){var t=f.length,a=new Array(t);a[0]=s;var i={};for(var l in r)hasOwnProperty.call(r,l)&&(i[l]=r[l]);i.originalType=e,i.mdxType="string"==typeof e?e:o,a[1]=i;for(var p=2;p<t;p++)a[p]=f[p];return n.createElement.apply(null,a)}return n.createElement.apply(null,f)}s.displayName="MDXCreateElement"},2852:function(e,r,f){f.r(r),f.d(r,{assets:function(){return c},contentTitle:function(){return l},default:function(){return u},frontMatter:function(){return i},metadata:function(){return p},toc:function(){return d}});var n=f(7462),o=f(3366),t=(f(7294),f(3905)),a=["components"],i={},l="dropwatch \u7684\u7f16\u8bd1\u3001\u914d\u7f6e\u4e0e\u4f7f\u7528",p={unversionedId:"\u6280\u672f\u535a\u5ba2/linux-system/network/debug/dropwatch \u7684\u7f16\u8bd1\u3001\u914d\u7f6e\u4e0e\u4f7f\u7528",id:"\u6280\u672f\u535a\u5ba2/linux-system/network/debug/dropwatch \u7684\u7f16\u8bd1\u3001\u914d\u7f6e\u4e0e\u4f7f\u7528",title:"dropwatch \u7684\u7f16\u8bd1\u3001\u914d\u7f6e\u4e0e\u4f7f\u7528",description:"dropwatch \u7684\u529f\u80fd",source:"@site/docs/\u6280\u672f\u535a\u5ba2/linux-system/network/debug/dropwatch \u7684\u7f16\u8bd1\u3001\u914d\u7f6e\u4e0e\u4f7f\u7528.md",sourceDirName:"\u6280\u672f\u535a\u5ba2/linux-system/network/debug",slug:"/\u6280\u672f\u535a\u5ba2/linux-system/network/debug/dropwatch \u7684\u7f16\u8bd1\u3001\u914d\u7f6e\u4e0e\u4f7f\u7528",permalink:"/longyu.github.io/\u6280\u672f\u535a\u5ba2/linux-system/network/debug/dropwatch \u7684\u7f16\u8bd1\u3001\u914d\u7f6e\u4e0e\u4f7f\u7528",draft:!1,editUrl:"https://github.com/longyuwlz/longyu.github.io/docs/\u6280\u672f\u535a\u5ba2/linux-system/network/debug/dropwatch \u7684\u7f16\u8bd1\u3001\u914d\u7f6e\u4e0e\u4f7f\u7528.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"at803x phy \u9a71\u52a8\u5173\u95ed\u8282\u80fd\u6a21\u5f0f",permalink:"/longyu.github.io/\u6280\u672f\u535a\u5ba2/linux-system/network/debug/at803x phy \u9a71\u52a8\u5173\u95ed\u8282\u80fd\u6a21\u5f0f"},next:{title:"linux \u865a\u62df\u673a\u65e0\u6cd5\u8bbf\u95ee\u7f51\u7edc\u7684\u51e0\u4e2a\u5e38\u89c1\u95ee\u9898",permalink:"/longyu.github.io/\u6280\u672f\u535a\u5ba2/linux-system/network/debug/linux \u865a\u62df\u673a\u65e0\u6cd5\u8bbf\u95ee\u7f51\u7edc\u7684\u51e0\u4e2a\u5e38\u89c1\u95ee\u9898"}},c={},d=[{value:"dropwatch \u7684\u529f\u80fd",id:"dropwatch-\u7684\u529f\u80fd",level:2},{value:"\u542f\u7528\u5185\u6838 dropwatch \u529f\u80fd",id:"\u542f\u7528\u5185\u6838-dropwatch-\u529f\u80fd",level:2},{value:"\u52a0\u8f7d dropwatch \u76f8\u5173\u7684\u5185\u6838\u6a21\u5757",id:"\u52a0\u8f7d-dropwatch-\u76f8\u5173\u7684\u5185\u6838\u6a21\u5757",level:2},{value:"\u624b\u52a8\u7f16\u8bd1 dropwatch",id:"\u624b\u52a8\u7f16\u8bd1-dropwatch",level:2},{value:"./configure \u62a5\u9519",id:"configure-\u62a5\u9519",level:3},{value:"Couldn&#39;t find or include bfd.h",id:"couldnt-find-or-include-bfdh",level:4},{value:"make \u64cd\u4f5c\u62a5\u9519",id:"make-\u64cd\u4f5c\u62a5\u9519",level:3},{value:"\u6210\u529f\u7f16\u8bd1",id:"\u6210\u529f\u7f16\u8bd1",level:3},{value:"\u8fd0\u884c dropwatch",id:"\u8fd0\u884c-dropwatch",level:2},{value:"\u666e\u901a\u7528\u6237\u4e0e root \u7528\u6237\u67e5\u770b /proc/kallsyms \u6587\u4ef6",id:"\u666e\u901a\u7528\u6237\u4e0e-root-\u7528\u6237\u67e5\u770b-prockallsyms-\u6587\u4ef6",level:2},{value:"\u4f7f\u7528 root \u6743\u9650\u6267\u884c dropwatch \u547d\u4ee4",id:"\u4f7f\u7528-root-\u6743\u9650\u6267\u884c-dropwatch-\u547d\u4ee4",level:2}],s={toc:d};function u(e){var r=e.components,f=(0,o.Z)(e,a);return(0,t.kt)("wrapper",(0,n.Z)({},s,f,{components:r,mdxType:"MDXLayout"}),(0,t.kt)("h1",{id:"dropwatch-\u7684\u7f16\u8bd1\u914d\u7f6e\u4e0e\u4f7f\u7528"},"dropwatch \u7684\u7f16\u8bd1\u3001\u914d\u7f6e\u4e0e\u4f7f\u7528"),(0,t.kt)("h2",{id:"dropwatch-\u7684\u529f\u80fd"},"dropwatch \u7684\u529f\u80fd"),(0,t.kt)("p",null,"dropwatch \u529f\u80fd\u53ef\u4ee5\u7528\u6765\u76d1\u63a7\u5185\u6838\u7684\u7f51\u7edc\u6808\u4e22\u5f03\u7684\u6570\u636e\u5305\u3002"),(0,t.kt)("p",null,"\u63a5\u6536\u7684\u6570\u636e\u5305\u5728\u5185\u6838\u4e2d\u88ab\u4e22\u5f03\uff0c\u5f88\u591a\u65f6\u5019\u5e76\u4e0d\u4f1a\u5728\u65e5\u5fd7\u4e2d\u8bb0\u5f55\uff0c\u4e00\u822c\u96be\u4ee5\u53d1\u73b0\u3002"),(0,t.kt)("h2",{id:"\u542f\u7528\u5185\u6838-dropwatch-\u529f\u80fd"},"\u542f\u7528\u5185\u6838 dropwatch \u529f\u80fd"),(0,t.kt)("p",null,"dropwatch \u529f\u80fd\u9700\u8981\u5f00\u542f CONFIG_NET_DROP_MONITOR \u914d\u7f6e\uff0c\u5728\u6211\u7684\u865a\u673a\u4e2d\uff0c\u76f8\u5173\u7684\u914d\u7f6e\u4fe1\u606f\u5982\u4e0b\uff1a"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},"longyu@debian:~$ grep 'NET_DROP_MONITOR' /boot/config-4.19.0-8-amd64\nCONFIG_NET_DROP_MONITOR=m\n")),(0,t.kt)("h2",{id:"\u52a0\u8f7d-dropwatch-\u76f8\u5173\u7684\u5185\u6838\u6a21\u5757"},"\u52a0\u8f7d dropwatch \u76f8\u5173\u7684\u5185\u6838\u6a21\u5757"),(0,t.kt)("p",null,"\u53ef\u4ee5\u770b\u5230\uff0cCONFIG_NET_DROP_MONITOR \u88ab\u7f16\u8bd1\u4e3a\u4e86\u72ec\u7acb\u7684\u5185\u6838\u6a21\u5757\u3002\u6211\u5728 /lib/modules \u4e2d\u641c\u7d22\uff0c\u627e\u5230\u4e86\u540d\u4e3a drop_monitor.ko \u7684\u5185\u6838\u6a21\u5757\uff0c\u8fd9\u4e2a\u5c31\u662f dropwatch \u7684\u5185\u6838\u6a21\u5757\u3002\u8fd9\u4e4b\u540e\u6211\u6267\u884c modprobe \u8fdb\u884c\u52a0\u8f7d\uff0c\u5e76\u5728\u52a0\u8f7d\u5b8c\u6210\u540e\u68c0\u7d22 lsmod \u7684\u7ed3\u679c\uff0c\u786e\u8ba4\u6a21\u5757\u52a0\u8f7d\u6210\u529f\u3002"),(0,t.kt)("p",null,"\u64cd\u4f5c\u8bb0\u5f55\u5982\u4e0b\uff1a"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},"longyu@debian:~$ find /lib/modules/4.19.0-8-amd64/ -name '*monitor.ko'\n/lib/modules/4.19.0-8-amd64/kernel/net/core/drop_monitor.ko\nlongyu@debian:~$ sudo modprobe drop_monitor\nlongyu@debian:~$ lsmod | grep 'drop_monitor'\ndrop_monitor           20480  0\n")),(0,t.kt)("p",null,"dropwatch \u662f\u4f7f\u7528 Kernel Tracepoint API \u5b89\u88c5\u7684\uff0c\u5728\u5404\u534f\u8bae\u91ca\u653e socket \u7f13\u51b2\u533a\u65f6\u6536\u96c6\u4fe1\u606f\u3002"),(0,t.kt)("h2",{id:"\u624b\u52a8\u7f16\u8bd1-dropwatch"},"\u624b\u52a8\u7f16\u8bd1 dropwatch"),(0,t.kt)("p",null,"\u4e0b\u8f7d\u5230\u6e90\u7801\u540e\uff0c\u5728\u6e90\u7801\u4e2d\u9996\u5148\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},"./autogen.sh\n")),(0,t.kt)("p",null,"\u6267\u884c\u540e\u62a5\u9519\u4fe1\u606f\u5982\u4e0b\uff1a"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},"configure.ac:16: error: possibly undefined macro: AC_MSG_ERROR\n      If this token and others are legitimate, please use m4_pattern_allow.\n      See the Autoconf documentation.\nconfigure.ac:20: error: possibly undefined macro: AC_CHECK_LIB\n")),(0,t.kt)("p",null,"\u7f51\u4e0a\u641c\u7d22\u627e\u5230\u4e86\u5982\u4e0b\u94fe\u63a5\uff1a"),(0,t.kt)("p",null,(0,t.kt)("a",{parentName:"p",href:"https://stackoverflow.com/questions/8811381/possibly-undefined-macro-ac-msg-error"},"possibly-undefined-macro-ac-msg-error")),(0,t.kt)("p",null,"\u4ece\u5176\u4e2d\u7684\u4e00\u4e2a\u56de\u7b54\u4e2d\u770b\u51fa\u53ef\u80fd\u662f\u6ca1\u6709\u5b89\u88c5 pkg-config \u547d\u4ee4\u9020\u6210\u7684\u95ee\u9898\u3002\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u5b89\u88c5 pkg-config \u547d\u4ee4\u3002"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},"sudo apt-get  --fix-broken install pkg-config\n")),(0,t.kt)("p",null,"\u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u91cd\u65b0\u6267\u884c autogen.sh \u811a\u672c\uff0c\u8fd9\u6b21\u80fd\u591f\u6210\u529f\u6267\u884c\u4e86\u3002"),(0,t.kt)("h3",{id:"configure-\u62a5\u9519"},"./configure \u62a5\u9519"),(0,t.kt)("p",null,"\u6267\u884c ./configure \u6709\u5982\u4e0b\u62a5\u9519\uff1a"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},"configure: error: libpcap is required\n")),(0,t.kt)("p",null,"\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u5b89\u88c5 libpcap-dev \u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},"sudo apt-get install libpcap-dev\n")),(0,t.kt)("h4",{id:"couldnt-find-or-include-bfdh"},"Couldn't find or include bfd.h"),(0,t.kt)("p",null,"\u91cd\u65b0\u6267\u884c ./configure \u53c8\u62a5\u4e86\u65b0\u7684\u9519\u8bef\uff0c\u9519\u8bef\u5185\u5bb9\u5982\u4e0b\uff1a"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},"checking bfd.h usability... no\nchecking bfd.h presence... no\nchecking for bfd.h... no\nconfigure: error: Couldn't find or include bfd.h\n")),(0,t.kt)("p",null,"\u8fd9\u5e94\u8be5\u662f\u9700\u8981\u5b89\u88c5\u67d0\u4e2a\u5e93\u7684\u5934\u6587\u4ef6\u3002\u6211\u6267\u884c apt-cache search \u641c\u7d22\u76f8\u5173\u7684\u5185\u5bb9\uff0c\u5e76\u6839\u636e\u7ecf\u9a8c\u9009\u62e9\u5b89\u88c5 libbsd-dev \u51fd\u6570\u5e93\uff0c\u8fd9\u4e4b\u540e\u53d1\u73b0\u8fd8\u6709\u95ee\u9898\u3002\u64cd\u4f5c\u8bb0\u5f55\u5982\u4e0b\uff1a"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},"longyu@debian:~/dropwatch-1.5.3$ sudo apt-cache search bsd | grep libbsd\nlibbsd-dev - utility functions from BSD systems - development files\nlibbsd0 - utility functions from BSD systems - shared library\nlibbsd-arc4random-perl - CPAN's BSD::arc4random -- Perl bindings for arc4random\nlibbsd-resource-perl - BSD process resource limit and priority functions\nlongyu@debian:~/dropwatch-1.5.3$\nlongyu@debian:~/dropwatch-1.5.3$ sudo apt-get install libbsd-dev\nlongyu@debian:~/dropwatch-1.5.3$\n")),(0,t.kt)("p",null,"\u7f51\u4e0a\u641c\u7d22\u627e\u5230\u4e86\u5982\u4e0b\u94fe\u63a5\uff1a",(0,t.kt)("a",{parentName:"p",href:"https://stackoverflow.com/questions/8003763/compile-errors-using-bfd-h-on-linux"},"compile errors using bfd.h on linux"),"."),(0,t.kt)("p",null,"\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u5b89\u88c5 binutils-dev \u7ec4\u4ef6\uff1a"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},"sudo apt-get install binutils-dev\n")),(0,t.kt)("p",null,"\u5b89\u88c5\u6210\u529f\u540e ./configure \u547d\u4ee4\u6210\u529f\u6267\u884c\u3002"),(0,t.kt)("h3",{id:"make-\u64cd\u4f5c\u62a5\u9519"},"make \u64cd\u4f5c\u62a5\u9519"),(0,t.kt)("p",null,"\u8fd9\u4e4b\u540e\u6267\u884c make \u547d\u4ee4\u65f6\u53c8\u6709\u65b0\u7684\u62a5\u9519\uff0c\u62a5\u9519\u4fe1\u606f\u5982\u4e0b\uff1a"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},"main.c:23:10: fatal error: readline/readline.h: No such file or directory\n #include <readline/readline.h>\n")),(0,t.kt)("p",null,"\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff1a"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},"longyu@debian:~/dropwatch-1.5.3$ sudo apt-get install libreadline-dev\n")),(0,t.kt)("p",null,"\u518d\u6b21 make \u53c8\u62a5\u4e86\u5982\u4e0b\u9519\u8bef\uff1a"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},"/usr/bin/ld: cannot find -lnl-genl-3\n")),(0,t.kt)("p",null,"\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u53ef\u4ee5\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff1a"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},"longyu@debian:~/dropwatch-1.5.3$ sudo apt-get install libnl-genl-3-dev\n")),(0,t.kt)("h3",{id:"\u6210\u529f\u7f16\u8bd1"},"\u6210\u529f\u7f16\u8bd1"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},"longyu@debian:~/dropwatch-1.5.3$ make\nmake  all-recursive\nmake[1]: Entering directory '/home/longyu/dropwatch-1.5.3'\nMaking all in src\nmake[2]: Entering directory '/home/longyu/dropwatch-1.5.3/src'\n/bin/bash ../libtool  --tag=CC   --mode=link gcc -g -Wall -Werror -I/usr/include/libnl3  -g -O2 -lnl-3 -lnl-genl-3 -lreadline -lpcap -lbfd  -o dropwatch main.o lookup.o lookup_kas.o lookup_bfd.o  -lpcap\nlibtool: link: gcc -g -Wall -Werror -I/usr/include/libnl3 -g -O2 -o dropwatch main.o lookup.o lookup_kas.o lookup_bfd.o  -lnl-3 -lnl-genl-3 -lreadline -lbfd -lpcap\n/bin/bash ../libtool  --tag=CC   --mode=link gcc -g -Wall -Werror -I/usr/include/libnl3  -g -O2 -lnl-3 -lnl-genl-3 -lreadline -lpcap -lbfd  -o dwdump dwdump.o  -lpcap\nlibtool: link: gcc -g -Wall -Werror -I/usr/include/libnl3 -g -O2 -o dwdump dwdump.o  -lnl-3 -lnl-genl-3 -lreadline -lbfd -lpcap\nmake[2]: Leaving directory '/home/longyu/dropwatch-1.5.3/src'\nMaking all in doc\nmake[2]: Entering directory '/home/longyu/dropwatch-1.5.3/doc'\nmake[2]: Nothing to be done for 'all'.\nmake[2]: Leaving directory '/home/longyu/dropwatch-1.5.3/doc'\nMaking all in tests\nmake[2]: Entering directory '/home/longyu/dropwatch-1.5.3/tests'\nmake[2]: Nothing to be done for 'all'.\nmake[2]: Leaving directory '/home/longyu/dropwatch-1.5.3/tests'\nmake[2]: Entering directory '/home/longyu/dropwatch-1.5.3'\nmake[2]: Leaving directory '/home/longyu/dropwatch-1.5.3'\nmake[1]: Leaving directory '/home/longyu/dropwatch-1.5.3'\n")),(0,t.kt)("h2",{id:"\u8fd0\u884c-dropwatch"},"\u8fd0\u884c dropwatch"),(0,t.kt)("p",null,"\u8fdb\u5165 src \u76ee\u5f55\u4e2d\u6267\u884c dropwatch \u547d\u4ee4\uff0c\u64cd\u4f5c\u8bb0\u5f55\u5982\u4e0b\uff1a"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},"longyu@debian:~/dropwatch-1.5.3/src$ ./dropwatch\nInitializing null lookup method\ndropwatch> start\nEnabling monitoring...\nKernel monitoring activated.\nIssue Ctrl-C to stop monitoring\n6 drops at location 0xffffffff9406e5b6 [software]\n6 drops at location 0xffffffff9403171b [software]\n4 drops at location 0xffffffff9406e5b6 [software]\n10 drops at location 0xffffffff9403171b [software]\n3 drops at location 0xffffffff9406e5b6 [software]\n12 drops at location 0xffffffff9403171b [software]\n16 drops at location 0xffffffff9403171b [software]\n4 drops at location 0xffffffff9406e5b6 [software]\n2 drops at location 0xffffffff93fe192f [software]\n6 drops at location 0xffffffff9403171b [software]\n3 drops at location 0xffffffff9406e5b6 [software]\n1 drops at location 0xffffffff93fe192f [software]\n")),(0,t.kt)("p",null,"\u5de6\u8fb9\u6570\u503c\u4e3a\u4e22\u5f03\u5305\u7684\u6570\u76ee\uff0clocation \u53f3\u8fb9\u662f\u5185\u6838\u51fd\u6570\u7684\u5730\u5740\u3002"),(0,t.kt)("p",null,"dropwatch -l kas \u6307\u5b9a\u4f7f\u7528\u5185\u6838\u7b26\u53f7\u8868\u3002"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},"longyu@debian:~/dropwatch-1.5.3/src$ ./dropwatch -l kas\nInitializing kallsyms db\ndropwatch> start\nEnabling monitoring...\nKernel monitoring activated.\nIssue Ctrl-C to stop monitoring\nError Scanning File: : Success\n5 drops at location 0xffffffff9403171b [software]\nError Scanning File: : Success\n4 drops at location 0xffffffff9406e5b6 [software]\nError Scanning File: : Success\n2 drops at location 0xffffffff9403171b [software]\nError Scanning File: : Success\n4 drops at location 0xffffffff9406e5b6 [software]\n")),(0,t.kt)("p",null,"\u7f51\u4e0a\u641c\u7d22\u4e86\u4e0b\uff0c\u53d1\u73b0\u6ca1\u6709\u663e\u793a\u51fd\u6570\u7684\u539f\u56e0\u5728\u4e8e\u6211\u4f7f\u7528\u666e\u901a\u7528\u6237\u8bbf\u95ee /proc/kallsyms \u6587\u4ef6\u3002"),(0,t.kt)("h2",{id:"\u666e\u901a\u7528\u6237\u4e0e-root-\u7528\u6237\u67e5\u770b-prockallsyms-\u6587\u4ef6"},"\u666e\u901a\u7528\u6237\u4e0e root \u7528\u6237\u67e5\u770b /proc/kallsyms \u6587\u4ef6"),(0,t.kt)("p",null,"\u666e\u901a\u7528\u6237\u67e5\u770b /proc/kallsyms \u6587\u4ef6\u7684\u90e8\u5206\u8f93\u51fa\u4fe1\u606f\u5982\u4e0b\uff1a"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},"0000000000000000 d descriptor.42136     [i2c_piix4]\n0000000000000000 d descriptor.42131     [i2c_piix4]\n0000000000000000 t piix4_driver_exit    [i2c_piix4]\n0000000000000000 r __func__.42149       [i2c_piix4]\n0000000000000000 r __func__.42117       [i2c_piix4]\n0000000000000000 r __func__.42132       [i2c_piix4]\n0000000000000000 r __func__.42095       [i2c_piix4]\n0000000000000000 r piix4_ids    [i2c_piix4]\n0000000000000000 r __param_force_addr   [i2c_piix4]\n0000000000000000 r __param_str_force_addr       [i2c_piix4]\n0000000000000000 r __param_force        [i2c_piix4]\n0000000000000000 r __param_str_force    [i2c_piix4]\n0000000000000000 d __this_module        [i2c_piix4]\n0000000000000000 r __mod_pci__piix4_ids_device_table    [i2c_piix4]\n0000000000000000 t cleanup_module       [i2c_piix4]\n")),(0,t.kt)("p",null,"root \u7528\u6237\u67e5\u770b /proc/kallsyms \u6587\u4ef6\u7684\u90e8\u5206\u8f93\u51fa\u4fe1\u606f\u5982\u4e0b\uff1a"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},"ffffffffc010c378 d descriptor.42136     [i2c_piix4]\nffffffffc010c3b0 d descriptor.42131     [i2c_piix4]\nffffffffc01098c9 t piix4_driver_exit    [i2c_piix4]\nffffffffc010a7a0 r __func__.42149       [i2c_piix4]\nffffffffc010a7c0 r __func__.42117       [i2c_piix4]\nffffffffc010a7e0 r __func__.42132       [i2c_piix4]\nffffffffc010a7f0 r __func__.42095       [i2c_piix4]\nffffffffc010a800 r piix4_ids    [i2c_piix4]\nffffffffc010b120 r __param_force_addr   [i2c_piix4]\nffffffffc010b108 r __param_str_force_addr       [i2c_piix4]\nffffffffc010b148 r __param_force        [i2c_piix4]\nffffffffc010b113 r __param_str_force    [i2c_piix4]\nffffffffc010c500 d __this_module        [i2c_piix4]\nffffffffc010a800 r __mod_pci__piix4_ids_device_table    [i2c_piix4]\nffffffffc01098c9 t cleanup_module       [i2c_piix4]\n")),(0,t.kt)("p",null,"\u53ef\u4ee5\u770b\u5230\uff0c\u53ea\u6709\u4f7f\u7528 root \u7528\u6237\u6765\u8bbf\u95ee /proc/kallsyms \u65f6\u624d\u80fd\u770b\u5230\u51fd\u6570\u5730\u5740\uff0e"),(0,t.kt)("h2",{id:"\u4f7f\u7528-root-\u6743\u9650\u6267\u884c-dropwatch-\u547d\u4ee4"},"\u4f7f\u7528 root \u6743\u9650\u6267\u884c dropwatch \u547d\u4ee4"),(0,t.kt)("p",null,"\u4f7f\u7528 root \u6743\u9650\u6267\u884c dropwatch \u547d\u4ee4\uff0c\u8bb0\u5f55\u4fe1\u606f\u5982\u4e0b\uff1a"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},"longyu@debian:~/dropwatch-1.5.3/src$ sudo ./dropwatch -l kas\nInitializing kallsyms db\ndropwatch> start\nEnabling monitoring...\nKernel monitoring activated.\nIssue Ctrl-C to stop monitoring\n3 drops at __udp4_lib_rcv+a06 (0xffffffff9406e5b6) [software]\n10 drops at ip_error+8b (0xffffffff9403171b) [software]\n2 drops at __netif_receive_skb_core+13f (0xffffffff93fe192f) [software]\n13 drops at ip_error+8b (0xffffffff9403171b) [software]\n4 drops at __udp4_lib_rcv+a06 (0xffffffff9406e5b6) [software]\n1 drops at __netif_receive_skb_core+13f (0xffffffff93fe192f) [software]\n8 drops at ip_error+8b (0xffffffff9403171b) [software]\n8 drops at __udp4_lib_rcv+a06 (0xffffffff9406e5b6) [software]\n5 drops at __udp4_lib_rcv+a06 (0xffffffff9406e5b6) [software]\n5 drops at ip_error+8b (0xffffffff9403171b) [software]\n5 drops at __udp4_lib_rcv+a06 (0xffffffff9406e5b6) [software]\n4 drops at ip_error+8b (0xffffffff9403171b) [software]\n1 drops at __netif_receive_skb_core+13f (0xffffffff93fe192f) [software]\n7 drops at ip_error+8b (0xffffffff9403171b) [software]\n2 drops at __netif_receive_skb_core+13f (0xffffffff93fe192f) [software]\n2 drops at __udp4_lib_rcv+a06 (0xffffffff9406e5b6) [software]\n5 drops at ip_error+8b (0xffffffff9403171b) [software]\n4 drops at __udp4_lib_rcv+a06 (0xffffffff9406e5b6) [software]\n5 drops at ip_error+8b (0xffffffff9403171b) [software]\n2 drops at __udp4_lib_rcv+a06 (0xffffffff9406e5b6) [software]\n2 drops at __udp4_lib_rcv+a06 (0xffffffff9406e5b6) [software]\n1 drops at ip_error+8b (0xffffffff9403171b) [software]\n3 drops at __netif_receive_skb_core+13f (0xffffffff93fe192f) [software]\n3 drops at __udp4_lib_rcv+a06 (0xffffffff9406e5b6) [software]\n1 drops at ip_error+8b (0xffffffff9403171b) [software]\n4 drops at __udp4_lib_rcv+a06 (0xffffffff9406e5b6) [software]\n2 drops at ip_error+8b (0xffffffff9403171b) [software]\n6 drops at ip_error+8b (0xffffffff9403171b) [software]\n1 drops at __udp4_lib_rcv+a06 (0xffffffff9406e5b6) [software]\n9 drops at ip_error+8b (0xffffffff9403171b) [software]\n")),(0,t.kt)("p",null,"\u53ef\u4ee5\u770b\u5230\uff0c\u51fd\u6570\u5730\u5740\u8f6c\u5316\u4e3a\u4e86\u5177\u4f53\u7684\u51fd\u6570 + \u5730\u5740\u504f\u79fb\u91cf\u7684\u683c\u5f0f\u8f93\u51fa\u3002\u8fd9\u4e2a\u4fe1\u606f\u6bcf\u9694 1s \u8f93\u51fa\u4e00\u6b21\uff0c\u6216\u8005\u5728\u5e9f\u5f03\u7684\u6570\u636e\u5305\u6570\u8fbe\u5230 64 \u65f6\u8f93\u51fa\u3002"))}u.isMDXComponent=!0}}]);