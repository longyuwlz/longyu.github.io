"use strict";(self.webpackChunklongyu_website=self.webpackChunklongyu_website||[]).push([[6766],{3905:function(e,n,t){t.d(n,{Zo:function(){return d},kt:function(){return g}});var r=t(7294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var c=r.createContext({}),a=function(e){var n=r.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):p(p({},n),e)),t},d=function(e){var n=a(e.components);return r.createElement(c.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},f=r.forwardRef((function(e,n){var t=e.components,i=e.mdxType,o=e.originalType,c=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),f=a(t),g=i,k=f["".concat(c,".").concat(g)]||f[g]||u[g]||o;return t?r.createElement(k,p(p({ref:n},d),{},{components:t})):r.createElement(k,p({ref:n},d))}));function g(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var o=t.length,p=new Array(o);p[0]=f;var l={};for(var c in n)hasOwnProperty.call(n,c)&&(l[c]=n[c]);l.originalType=e,l.mdxType="string"==typeof e?e:i,p[1]=l;for(var a=2;a<o;a++)p[a]=t[a];return r.createElement.apply(null,p)}return r.createElement.apply(null,t)}f.displayName="MDXCreateElement"},7045:function(e,n,t){t.r(n),t.d(n,{assets:function(){return d},contentTitle:function(){return c},default:function(){return g},frontMatter:function(){return l},metadata:function(){return a},toc:function(){return u}});var r=t(7462),i=t(3366),o=(t(7294),t(3905)),p=["components"],l={},c=void 0,a={permalink:"/longyu.github.io/blog/dpdk/dpdk-16.04 \u914d\u7f6e\u4e0e\u7f16\u8bd1\u8fc7\u7a0b\u5206\u6790",editUrl:"https://github.com/longyuwlz/longyu.github.io/blog/dpdk/dpdk-16.04 \u914d\u7f6e\u4e0e\u7f16\u8bd1\u8fc7\u7a0b\u5206\u6790.md",source:"@site/blog/dpdk/dpdk-16.04 \u914d\u7f6e\u4e0e\u7f16\u8bd1\u8fc7\u7a0b\u5206\u6790.md",title:"dpdk/dpdk-16.04 \u914d\u7f6e\u4e0e\u7f16\u8bd1\u8fc7\u7a0b\u5206\u6790",description:"dpdk .config \u6587\u4ef6\u7684\u751f\u6210\u8fc7\u7a0b",date:"2022-06-21T00:32:49.000Z",formattedDate:"2022\u5e746\u670821\u65e5",tags:[],readingTime:4.13,truncated:!1,authors:[],frontMatter:{},prevItem:{title:"dpdk/dpdk-16.04 \u89e3\u521d\u59cb\u5316\u8fc7\u7a0b",permalink:"/longyu.github.io/blog/dpdk/dpdk-16.04 \u89e3\u521d\u59cb\u5316\u8fc7\u7a0b"},nextItem:{title:"dpdk/dpdk-19.11 armv8 l2fwd \u5728\u67d0 arm \u5185\u6838\u4e0a\u65e0\u6cd5\u8fd0\u884c\u95ee\u9898",permalink:"/longyu.github.io/blog/dpdk/dpdk-19.11 armv8 l2fwd \u5728\u67d0 arm \u5185\u6838\u4e0a\u65e0\u6cd5\u8fd0\u884c\u95ee\u9898"}},d={authorsImageUrls:[]},u=[{value:"dpdk .config \u6587\u4ef6\u7684\u751f\u6210\u8fc7\u7a0b",id:"dpdk-config-\u6587\u4ef6\u7684\u751f\u6210\u8fc7\u7a0b",level:2},{value:"dpdk rte_config \u6587\u4ef6\u7684\u751f\u6210\u8fc7\u7a0b",id:"dpdk-rte_config-\u6587\u4ef6\u7684\u751f\u6210\u8fc7\u7a0b",level:2},{value:"dpdk \u5b8c\u6574\u6784\u5efa\u8fc7\u7a0b",id:"dpdk-\u5b8c\u6574\u6784\u5efa\u8fc7\u7a0b",level:2}],f={toc:u};function g(e){var n=e.components,t=(0,i.Z)(e,p);return(0,o.kt)("wrapper",(0,r.Z)({},f,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"dpdk-config-\u6587\u4ef6\u7684\u751f\u6210\u8fc7\u7a0b"},"dpdk .config \u6587\u4ef6\u7684\u751f\u6210\u8fc7\u7a0b"),(0,o.kt)("p",null,"dpdk \u6709\u5185\u90e8\u7684 .config \u6587\u4ef6\uff0c\u7f16\u8bd1\u524d\u9700\u8981\u5148\u521b\u5efa\u4e0d\u540c\u67b6\u6784 .config \u914d\u7f6e\u6587\u4ef6\u4e0e build \u76ee\u5f55\u3002"),(0,o.kt)("p",null,"dpdk \u6e90\u7801\u76ee\u5f55 config \u5b50\u76ee\u5f55\u5b58\u653e\u7528\u4e8e\u751f\u6210 .config \u6587\u4ef6\u7684\u6e90\u6587\u4ef6\uff0c\u76ee\u5f55\u5185\u5bb9\u5982\u4e0b\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-c"},"common_base                            defconfig_i686-native-linuxapp-gcc     defconfig_x86_64-native-bsdapp-gcc\ncommon_bsdapp                          defconfig_i686-native-linuxapp-icc     defconfig_x86_64-native-linuxapp-clang\ncommon_linuxapp                        defconfig_ppc_64-power8-linuxapp-gcc   defconfig_x86_64-native-linuxapp-gcc\ndefconfig_arm64-armv8a-linuxapp-gcc    defconfig_tile-tilegx-linuxapp-gcc     defconfig_x86_64-native-linuxapp-icc\ndefconfig_arm64-thunderx-linuxapp-gcc  defconfig_x86_64-ivshmem-linuxapp-gcc  defconfig_x86_x32-native-linuxapp-gcc\ndefconfig_arm64-xgene1-linuxapp-gcc    defconfig_x86_64-ivshmem-linuxapp-icc\ndefconfig_arm-armv7a-linuxapp-gcc      defconfig_x86_64-native-bsdapp-clang\n")),(0,o.kt)("p",null,"common_base \u6587\u4ef6\u4e3a\u57fa\u672c\u914d\u7f6e\uff0ccommon_bsdapp \u4e0e common_linuxapp \u4ee3\u8868 dpdk \u652f\u6301\u7684\u4e24\u79cd\u5927\u7684\u7cfb\u7edf\uff1a"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"bsd \u7cfb\u7edf"),(0,o.kt)("li",{parentName:"ol"},"linux \u7cfb\u7edf")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"defconfig_xx \u914d\u7f6e\u9009\u9879\u914d\u7f6e\u7f16\u8bd1\u67b6\u6784\uff0c\u5de5\u5177\u94fe\u540d\u79f0\uff0cdefconfig_xx \u5305\u542b common_bsdapp\u3001common_lnuxapp \u7684\u914d\u7f6e\u9879\u76ee\uff0ccommon_bsdapp\u3001common_linuxapp \u5305\u542b common_base \u7684\u914d\u7f6e\u9879\u76ee\u3002")),(0,o.kt)("p",null,"\u4ee5 x86_64-native-linuxapp-gcc \u4e3a\u4f8b\uff0c\u8981\u751f\u6210 x86_64-native-linuxapp-gcc \u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u53ef\u4ee5\u5728 dpdk \u6e90\u7801\u8ddf\u76ee\u5f55\u4e2d\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"make config O=./x86_64-native-linuxapp-gcc T=x86_64-native-linuxapp-gcc\n")),(0,o.kt)("p",null,"\u6267\u884c\u6210\u529f\u540e\u4f1a\u751f\u6210 x86_64-native-linuxapp-gcc \u76ee\u5f55\uff0c\u6b64\u76ee\u5f55\u7684\u5185\u5bb9\u5982\u4e0b\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},".  ..  build  .config  .config.orig  .depdirs  include  Makefile\n")),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"bulid \u4e3a\u7f16\u8bd1\u8fc7\u7a0b\u4e2d\u4e2d\u95f4\u6587\u4ef6\u4fdd\u5b58\u76ee\u5f55"),(0,o.kt)("li",{parentName:"ol"},".config \u6587\u4ef6\u662f\u751f\u6210\u7684\u914d\u7f6e\u6587\u4ef6\u5185\u5bb9\uff0c.config.orig \u662f\u914d\u7f6e\u6587\u4ef6\u7684\u5907\u4efd"),(0,o.kt)("li",{parentName:"ol"},"include \u76ee\u5f55\u4e2d\u4e3a\u751f\u6210\u7684 rte_config.h \u6587\u4ef6"),(0,o.kt)("li",{parentName:"ol"},".depdirs \u4e2d\u4e3a\u4e0d\u540c\u6a21\u5757\u7684\u4f9d\u8d56\u5173\u7cfb"),(0,o.kt)("li",{parentName:"ol"},"Makfile \u4e3a\u6784\u5efa\u4f7f\u7528\u7684\u7f16\u8bd1\u811a\u672c")),(0,o.kt)("p",null,".config \u6587\u4ef6\u901a\u8fc7\u6307\u5b9a -x assembler-with-cpp \u53c2\u6570\u8c03\u7528 cc\uff08gcc\uff09 \u6765\u751f\u6210\uff0c\u793a\u4f8b\u547d\u4ee4\u5982\u4e0b\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"}," cc -E -undef -P -x assembler-with-cpp -ffreestanding -o /home/longyu/dpdk-16.04/.config /home/longyu/dpdk-16.04/config/defconfig_x86_64-native-linuxapp-gcc\n")),(0,o.kt)("h2",{id:"dpdk-rte_config-\u6587\u4ef6\u7684\u751f\u6210\u8fc7\u7a0b"},"dpdk rte_config \u6587\u4ef6\u7684\u751f\u6210\u8fc7\u7a0b"),(0,o.kt)("p",null,".config \u6587\u4ef6\u7ef4\u62a4\u4e86 dpdk \u5185\u90e8\u7ec4\u4ef6\u7684\u914d\u7f6e\uff0c\u5b9e\u9645\u7f16\u8bd1\u4e2d\u4f1a\u6839\u636e .config \u5185\u5bb9\u6765\u751f\u6210 rte_config.h \u6587\u4ef6\uff0c\u5b9e\u9645\u7684\u914d\u7f6e\u901a\u8fc7\u5934\u6587\u4ef6\u4e2d\u7684\u5b8f\u5b9a\u4e49\u503c\u8fbe\u6210\u3002"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"rte_config.h \u5934\u6587\u4ef6\u901a\u8fc7\u8c03\u7528 scripts/gen-config.h.sh \u6765\u751f\u6210\uff0c\u6b64\u811a\u672c\u7684\u8f93\u51fa\u4fe1\u606f\u88ab\u91cd\u5b9a\u5411\u4e3a rte_config.h\uff0c\u811a\u672c\u5185\u5bb9\u4e3a\u51e0\u4e2a echo \u4e0e sed \u66ff\u6362\u547d\u4ee4\u3002")),(0,o.kt)("p",null,"\u9700\u8981\u8bf4\u660e\u7684\u662f\uff0c\u5f53 .config \u6587\u4ef6\u66f4\u65b0\u540e\uff0c\u91cd\u65b0\u751f\u6210 rte_config.h \u4e4b\u524d\u4f1a\u7f16\u8bd1\u751f\u6210\u7684\u4e2d\u95f4\u6587\u4ef6\u76ee\u5f55\u3002"),(0,o.kt)("p",null,".config \u4e0e rte_config.h \u6587\u4ef6\u7684\u751f\u6210\u8fc7\u7a0b\u7531 mk/rte.sdkconfig.mk \u6587\u4ef6\u63a7\u5236\uff0c\u53ef\u4ee5\u9605\u8bfb\u8fd9\u4e2a\u6587\u4ef6\u83b7\u53d6\u66f4\u8be6\u7ec6\u7684\u4fe1\u606f\u3002"),(0,o.kt)("h2",{id:"dpdk-\u5b8c\u6574\u6784\u5efa\u8fc7\u7a0b"},"dpdk \u5b8c\u6574\u6784\u5efa\u8fc7\u7a0b"),(0,o.kt)("p",null,"1.\u6784\u5efa mk/rte.sdkconfig.mk \u4e2d\u7684 checkconfig \u76ee\u6807\uff0c\u68c0\u67e5\u662f\u5426\u9700\u8981\u91cd\u65b0\u751f\u6210\u914d\u7f6e\u6587\u4ef6"),(0,o.kt)("p",null,"2.\u6784\u5efa mk/rte.sdkconfig.mk \u4e2d\u7684 headerconfig \u76ee\u6807\uff0c\u751f\u6210 rte_config.h "),(0,o.kt)("p",null,"3.\u6784\u5efa depdirs \u76ee\u6807\uff0c\u5728\u7f16\u8bd1\u76ee\u6807\u76ee\u5f55\u4e2d\u751f\u6210 .depdirs \u6587\u4ef6"),(0,o.kt)("p",null,"4.\u6784\u5efa mk/rte.sdkbuild.mk all \u914d\u7f6e\uff0crte.sdkbuild \u4e2d\u9996\u5148\u5305\u542b .depdirs \u6587\u4ef6\uff0c\u6839\u636e\u4f9d\u8d56\u5173\u7cfb\u786e\u5b9a\u7f16\u8bd1\u7684\u4f18\u5148\u7ea7\u987a\u5e8f"),(0,o.kt)("p",null,"5.\u5728\u7f16\u8bd1\u524d\uff0c\u9996\u5148\u5305\u542b mk/rte.vars.mk \u6587\u4ef6\uff0c\u6b64\u6587\u4ef6\u8fdb\u800c\u5305\u542b mk/target/generic/rte.vars.mk\uff0cmk/target/generic/rte.vars.mk \u8fdb\u800c\u5305\u542b toolchain/$(RTE_TOOLCHAIN)/rte.vars.mk \u4e0b\u9762\u7684\u5934\u6587\u4ef6\u914d\u7f6e\u7f16\u8bd1\u5de5\u5177\u94fe\uff0cdpdk \u4e2d\u5de5\u5177\u94fe\u524d\u7f00\u901a\u8fc7 CROSS \u53d8\u91cf\u63a7\u5236\u3002"),(0,o.kt)("p",null,"6.\u6839\u636e Makefile \u5728 build \u76ee\u5f55\u4e2d\u751f\u6210 .xxx.o.d\u3001.xxx.o.cmd \u6587\u4ef6\uff0c\u521b\u5efa Makefile \u4e2d\u58f0\u660e\u7684 SYMLINK \u5934\u6587\u4ef6\uff0c\u6267\u884c\u7f16\u8bd1\u8fc7\u7a0b\uff0c\u7f16\u8bd1\u5b8c\u6210\u540e\u6267\u884c install \u5b89\u88c5\u76ee\u6807\u6587\u4ef6"),(0,o.kt)("p",null,"dpdk \u6784\u5efa\u7cfb\u7edf\u6709\u51e0\u4e2a\u4e0d\u540c\u7684\u7c7b\u522b\uff0c\u5982 lib\u3001module\u3001app\u3001extlib\u3001extapp \u7b49\u7b49\u51e0\u4e2a\u5bf9\u8c61\u7c7b\u522b\uff0clib \u662f\u4e00\u4e2a\u5e38\u89c1\u7684\u7c7b\u522b\uff0c\u5176\u6e90\u7801\u4e3b\u8981\u8fc7\u7a0b\u5982\u4e0b\uff1a"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"\u5305\u542b mk/internal/rte.xx-pre.mk \u6587\u4ef6\uff0c\u6267\u884c\u7f16\u8bd1\u524d\u7684\u8bbe\u5b9a"),(0,o.kt)("li",{parentName:"ol"},"\u9488\u5bf9 lib \u7c7b\u522b\u7f16\u8bd1\u76ee\u6807\u81ea\u8eab\u7684\u8bbe\u5b9a"),(0,o.kt)("li",{parentName:"ol"},"\u5305\u542b mk/intermal/rte.xx-post.mk \u6587\u4ef6\uff0c\u6267\u884c\u7f16\u8bd1\u540e\u7684\u8bbe\u5b9a")),(0,o.kt)("p",null,"\u5176\u5b83\u7684\u7c7b\u522b\u5bf9\u8c61\u7684\u6784\u5efa\u8fc7\u7a0b\u5927\u540c\u5c0f\u5f02\uff0c\u4e0d\u5c55\u5f00\u8bf4\u660e\uff01"),(0,o.kt)("p",null,"dpdk \u7684\u6784\u5efa\u8fc7\u7a0b\u6bd4\u8f83\u7075\u6d3b\uff0c\u652f\u6301\u5355\u72ec\u7f16\u8bd1\u6bcf\u4e00\u79cd\u76ee\u6807\u7c7b\u578b\uff01\u8981\u6dfb\u52a0\u81ea\u5df1\u7684\u7f16\u8bd1\u53c2\u6570\uff0c\u53ef\u4ee5\u8bbe\u5b9a EXTRA_CFLAGS \u53d8\u91cf\u3002"))}g.isMDXComponent=!0}}]);