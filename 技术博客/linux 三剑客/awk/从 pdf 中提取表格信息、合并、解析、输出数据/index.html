<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-技术博客/linux 三剑客/awk/从 pdf 中提取表格信息、合并、解析、输出数据">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.21">
<link rel="alternate" type="application/rss+xml" href="/longyu.github.io/blog/rss.xml" title="龙瑜的文字世界 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/longyu.github.io/blog/atom.xml" title="龙瑜的文字世界 Atom Feed"><title data-rh="true">从 pdf 中提取表格信息、合并、解析、输出数据 | 龙瑜的文字世界</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://longyuwlz.github.io/longyu.github.io/技术博客/linux 三剑客/awk/从 pdf 中提取表格信息、合并、解析、输出数据"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="从 pdf 中提取表格信息、合并、解析、输出数据 | 龙瑜的文字世界"><meta data-rh="true" name="description" content="从 pdf 中提取表格信息、合并、解析、输出数据"><meta data-rh="true" property="og:description" content="从 pdf 中提取表格信息、合并、解析、输出数据"><link data-rh="true" rel="canonical" href="https://longyuwlz.github.io/longyu.github.io/技术博客/linux 三剑客/awk/从 pdf 中提取表格信息、合并、解析、输出数据"><link data-rh="true" rel="alternate" href="https://longyuwlz.github.io/longyu.github.io/技术博客/linux 三剑客/awk/从 pdf 中提取表格信息、合并、解析、输出数据" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://longyuwlz.github.io/longyu.github.io/技术博客/linux 三剑客/awk/从 pdf 中提取表格信息、合并、解析、输出数据" hreflang="x-default"><link rel="stylesheet" href="/longyu.github.io/assets/css/styles.fd2463fc.css">
<link rel="preload" href="/longyu.github.io/assets/js/runtime~main.c878b670.js" as="script">
<link rel="preload" href="/longyu.github.io/assets/js/main.99377f63.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">跳到主要内容</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/longyu.github.io/"><div class="navbar__logo"><img src="/longyu.github.io/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/longyu.github.io/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">龙瑜的文字世界</b></a><a class="navbar__item navbar__link" href="/longyu.github.io/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/longyuwlz" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docsWrapper_BCFX"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/longyu.github.io/写给 hy 的文字/等待的珍贵">写给 hy 的文字</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/longyu.github.io/">笔记本开篇序言</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/longyu.github.io/大学的记录/2016 的成长">大学的记录</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/longyu.github.io/工作/少用鼠标">工作</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/longyu.github.io/思考/I believe">思考</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/longyu.github.io/技术博客/RTOS/debug/实时操作系统中调试上下文切换与中断处理汇编的一些方法">技术博客</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/longyu.github.io/技术博客/RTOS/debug/实时操作系统中调试上下文切换与中断处理汇编的一些方法">RTOS</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/longyu.github.io/技术博客/dpdk/dpdk 依赖知识/网卡驱动绑定/将网卡绑定到官方驱动测试过程">dpdk</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/longyu.github.io/技术博客/gui/android/某安卓图形化界面运行异常问题分析">gui</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/longyu.github.io/技术博客/linux 三剑客/awk/awk 实现批量化操作探讨">linux 三剑客</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/longyu.github.io/技术博客/linux 三剑客/awk/awk 实现批量化操作探讨">awk</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/longyu.github.io/技术博客/linux 三剑客/awk/awk 实现批量化操作探讨">以 git + awk 实现批量化操作为例，探讨命令行的处理过程</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/longyu.github.io/技术博客/linux 三剑客/awk/awk 解析 awtk 中的 api-doc">awk 解析 [awtk](https://github.com/zlgopen/awtk) 中的 api-doc</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/longyu.github.io/技术博客/linux 三剑客/awk/awksed.awk 分析">gawk 示例脚本 awksed.awk 代码分析</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/longyu.github.io/技术博客/linux 三剑客/awk/gawk 示例脚本 alarm.awk 代码分析">gawk 示例脚本 alarm.awk 代码分析</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/longyu.github.io/技术博客/linux 三剑客/awk/gawk 示例脚本 egrep.awk 分析">gawk 示例脚本 egrep.awk 分析</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/longyu.github.io/技术博客/linux 三剑客/awk/windows 换行符对 awk printf 函数的影响">windows 换行符对 awk printf 函数的影响</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/longyu.github.io/技术博客/linux 三剑客/awk/从 pdf 中提取表格信息、合并、解析、输出数据">从 pdf 中提取表格信息、合并、解析、输出数据</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/longyu.github.io/技术博客/linux 三剑客/awk/使用 awk 处理一个对齐问题">使用 awk 处理一个对齐问题</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/longyu.github.io/技术博客/linux 三剑客/awk/使用 awk 生产表的两种不同方式">使用 awk 生产表的两种不同方式</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/longyu.github.io/技术博客/linux 三剑客/awk/生成 excel 表格时使用 awk 合并多行为单行">生成 excel 表格时使用 awk 合并多行为单行</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/longyu.github.io/技术博客/linux 三剑客/awk、sed 应用实例1">awk、sed 应用实例1</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/longyu.github.io/技术博客/linux 三剑客/sed/sed 与 awk 处理连续重复行">sed</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/longyu.github.io/技术博客/linux-kernel/ethtool 命令指定的网络设备名在哪里被使用？">linux-kernel</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/longyu.github.io/技术博客/linux-system/Debian/在英文版 Debian 中添加中文拼音输入法">linux-system</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/longyu.github.io/技术博客/perl/perl 中的 foreach 语句">perl</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/longyu.github.io/技术博客/写博客对我的意义">写博客的意义</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/longyu.github.io/技术博客/命令行使用案例/linux 中文件批量重命名">命令行使用案例</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/longyu.github.io/技术博客/嵌入式/ARM/汇编函数与 c 函数的互相调用问题">嵌入式</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/longyu.github.io/技术博客/技术书籍/APUE/time 输出的程序执行时间">技术书籍</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/longyu.github.io/技术博客/构建系统/Makefile/Makefile 中的 @true 与 @false 命令">构建系统</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/longyu.github.io/技术博客/测试框架/unity/unity 单元测试框架的工作原理，及隐含问题">测试框架</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/longyu.github.io/技术博客/笔记本电脑问题/惠普笔记本电池无法充满问题">笔记本电脑问题</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/longyu.github.io/技术博客/策略/api 功能与实现的些许感想">策略</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/longyu.github.io/技术博客/计算机系统/cpu/cpu 分支预测对性能的影响">计算机系统</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/longyu.github.io/技术博客/软件开发技巧/使用取模与累加制造一个环">软件开发技巧</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/longyu.github.io/技术博客/软件开发语言/C/c 语言中的封装">软件开发语言</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/longyu.github.io/方法论/解决问题的一些方法">方法论</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/longyu.github.io/读书笔记/终身成长/成长型思维与固定型思维">读书笔记</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/longyu.github.io/那些年写的诗歌/到不了">那些年写的诗歌</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/longyu.github.io/随笔/元旦/在几本书中跨年">随笔</a></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_GujU"><div class="docItemContainer_Adtb"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/longyu.github.io/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">技术博客</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">linux 三剑客</span><meta itemprop="position" content="2"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">awk</span><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">从 pdf 中提取表格信息、合并、解析、输出数据</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_aoJ5"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>从 pdf 中提取表格信息、合并、解析、输出数据</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="从-pdf-中提取表格信息合并解析输出数据">从 pdf 中提取表格信息、合并、解析、输出数据<a class="hash-link" href="#从-pdf-中提取表格信息合并解析输出数据" title="标题的直接链接">​</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pdf-格式浅述">pdf 格式浅述<a class="hash-link" href="#pdf-格式浅述" title="标题的直接链接">​</a></h2><p>pdf 作为一种使用极为广泛的【可移植文件格式】，常用于各种用户手册及专业文档的撰写。可能很多人都认为 pdf 只是一些图片的打包合集，这其实是对 pdf 格式的一种误解。</p><p>作为专业的文档格式，pdf 中支持插入各种【图表、公式】等。完全使用图片来构建一个 pdf 仅仅使用了 pdf 中很小的一部分功能，且生成的 pdf 的内容不能直接复制。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="word-文档-与-pdf">word 文档 与 pdf<a class="hash-link" href="#word-文档-与-pdf" title="标题的直接链接">​</a></h2><p>也许很多人在日常办公中经常接触到 pdf ，经常扫描文件生成扫描版 pdf。word 文档可能还经常撰写，但 pdf 却从来没有自己编写过。实际上对于专业性要求不高的内容， word 文档的撰写确实要比 pdf 文档更容易，图形化的排版过程隐藏了背后复杂的命令，更方便用户使用。</p><p>word 文档的优点一目了然，可在专业的文档撰写中 word 文档却常常被诟病。实际上，使用 word 排版专业文档并不容易。每次排版设定的格式可复用性不高，保存的文件格式也极不便于进行版本控制。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pdf-文档撰写的优点与难点">pdf 文档撰写的优点与难点<a class="hash-link" href="#pdf-文档撰写的优点与难点" title="标题的直接链接">​</a></h2><p>pdf 文档弥补了 word 的上述缺陷，但 pdf 撰写的门槛却比 word 高出许多，这也就意味着你几乎不太可能只【点点鼠标】就能排版出一篇文章，你需要对排版系统进行学习，了解各种命令。虽然这种学习会耗费许多的时间与精力，可学到的知识能够一直使用下去，同时你对排版本身的各种原理也能有更进一步的认识。</p><p>使用过 Latex 排版系统的人可能对上面的描述有切身的体会。使用 Latex 来撰写一篇 pdf 文档时，你需要用到许多的宏与命令来对文档格式进行精细的控制，这比 word 中点点鼠标就能排版更加困难，也更加接近排版本身。 </p><p>我不对排版系统进行更进一步的叙述，感兴趣的读者可以搜索相关的网页进一步了解。</p><h1>从 pdf 中抽取表格所在的页</h1><p>常见的图文混排 pdf 中，表格零散的分布在 pdf 文档的各个部分。我们需要从 pdf 文档中将需要抽取的表格所在的页【抽取】出来。这一过程可以通过一些高级的 【pdf 编辑器】来完成。我没有使用 【pdf 编辑器】，我使用了一种命令行工具——【pdftk】来完成了这一任务。下面是相关的操作命令：</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt-get install pdftk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pdftk in.pdf cat 50-60 output out.pdf </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>命令说明文档请 <strong>man pdftk</strong> 。</p><h1>从 pdf 中抽取表格</h1><p>从一个大的 pdf 中抽取出来表格所在的页后，我们就可以从生成的 pdf 中抽取表格内容。注意抽出来的内容不能是扫描生成的图片，如果是图片将抽取失败！！！</p><p>pdf 格式有自己的文件格式规范，这一规范能够在网上找到。从 pdf 中抽取信息的参考便是这一文件格式规范。在这里我并没有尝试自己去撰写一个抽取工具，我直接使用了网页搜索得到的方法。</p><p>我使用 <a href="https://tabula.technology/" target="_blank" rel="noopener noreferrer">【tabula】</a> 来从 pdf 中抽取表格信息，关于此模块的安装使用详见——<a href="https://blog.chezo.uno/tabula-py-extract-table-from-pdf-into-python-dataframe-6c7acfa5f302" target="_blank" rel="noopener noreferrer">【使用 tabula 脚本从 pdf 中提取表格信息为 python 数据帧】</a>。</p><p>在安装使用过程中有如下【注意事项】：</p><ol><li><p>python-numpy 版本问题</p><p>如果你的系统中安装了多个版本的 【python-numpy】，请参考  <a href="https://stackoverflow.com/questions/28517937/how-can-i-upgrade-numpy" target="_blank" rel="noopener noreferrer">【如何升级 numpy】</a> 中的回答来解决。</p></li><li><p>java 环境依赖问题</p><p>由于我已经安装并配置了 java 环境，我没有遇到这一问题。遇到这个问题的读者请自行 google、百度解决。</p></li></ol><p><a href="https://tabula.technology/" target="_blank" rel="noopener noreferrer">【tabula】</a> 可以将表格信息输出为四种格式：</p><blockquote><p>　　1. python DataFrame
2. json
3. tsv
4. csv</p></blockquote><p>在这里我使用 csv 作为输出格式。注意当待抽取的 pdf 文档有多页时，需要设定 pages 属性为 &quot;all&quot;&#x27;。</p><p>我使用 【tabula】 从下图中的 pdf 表格中提取信息。
<img loading="lazy" src="https://img-blog.csdnimg.cn/20190706083113235.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0xvbmd5dV93bHo=,size_16,color_FFFFFF,t_70" alt="引脚复用功能" class="img_ev3q">提取的信息中的部分内容如下：</p><blockquote><p>176,Pin,DEFAUL,ALT0,ALT1,ALT2,ALT3,ALT4,ALT5,ALT6,ALT7
VFBGA,Name,T,,,,,,,,
C1,PTB3,LPADC0<em>,LPADC0</em>,PTB3/,LPSPI0<em>,LPUART1,I2S0_TX</em>,FB<em>AD10,TPM0_C,—
&quot;&quot;,,SE0,SE0,RF0_EXT,PCS3,_TX,FS,,H1, &quot;&quot;,,,,_OSC_E,,,,,, &quot;&quot;,,,,N,,,,,,
C2,PTB4/,LPADC0</em>,LPADC0<em>,PTB4/,LPSPI0</em>,LPUART1,I2S0<em>TX</em>,FB<em>AD9,TPM0_C,—
&quot;&quot;,LLWU_P6,SE1,SE1,LLWU_P6,SCK,_CTS,BCLK,,H2, &quot;&quot;,,,,/,,,,,,
&quot;&quot;,,,,RF0_RF</em>,,,,,, &quot;&quot;,,,,OFF/,,,,,, &quot;&quot;,,,,RF0<em>DFT,,,,,,
&quot;&quot;,,,,_RESET,,,,,,
D2,PTB5,DISABLE,—,PTB5/,LPSPI0</em>,LPUART1,I2S0_MC,FB_AD8,TPM0_C,—
&quot;&quot;,,D,,RF0_ACT,SOUT,_RTS,LK,,H3, &quot;&quot;,,,,IVE,,,,,,</p></blockquote><p>上面的输出有点奇怪，它与表格的内容看上去并不一致。如果你仔细观察，你会发现当表格中单行的数据由多个行组成时，每一个行都被单独的提取出来了，这是 【tabula】 的一个缺陷，不过这并不致命，只要信息是正确的，那么编写代码将数据合并起来就行了。</p><h1>合并表格、解析表格、生成输出数据</h1><p>从上面抽取出来的表格信息中每一行的不同项之间通过逗号分割，使用 awk 来处理这种具有多个字段的信息相对容易，我就使用 awk 脚本来合并被分开的行，并完成【解析与输出】的任务。</p><p>代码如下：</p><div class="language-awk codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-awk codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#!/usr/bin/gawk -f</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BEGIN {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    parse_and_generate()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    exit 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function make_output_result(hash_table, buffer, gpio_name)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    gpio_name = hash_table[&quot;GPIONAME&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (hash_table[&quot;PIN_MUX_ALT0&quot;] != &quot;&quot;) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        buffer = sprintf(&quot;#define %8s_%-26s%s(%s)\n\n&quot;, gpio_name,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                         hash_table[&quot;PIN_MUX_ALT0&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                         &quot;RV32M1_VEGA_PIN_MUX&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                         &quot;PIN_MUX_ALT0&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (hash_table[&quot;PIN_MUX_ASGPIO&quot;] != &quot;&quot;) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        buffer =  buffer sprintf(&quot;#define %8s_%-26s%s(%s)\n\n&quot;, gpio_name,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 &quot;GPIO&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 &quot;RV32M1_VEGA_PIN_MUX&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 &quot;PIN_MUX_AS_GPIO&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (hash_table[&quot;PIN_MUX_ALT2&quot;] != &quot;&quot;) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        buffer = buffer sprintf(&quot;#define %8s_%-26s%s(%s)\n\n&quot;, gpio_name,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                hash_table[&quot;PIN_MUX_ALT2&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                &quot;RV32M1_VEGA_PIN_MUX&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                &quot;PIN_MUX_ALT2&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (hash_table[&quot;PIN_MUX_ALT3&quot;] != &quot;&quot;) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        buffer = buffer sprintf(&quot;#define %8s_%-26s%s(%s)\n\n&quot;, gpio_name,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                hash_table[&quot;PIN_MUX_ALT3&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                &quot;RV32M1_VEGA_PIN_MUX&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                &quot;PIN_MUX_ALT3&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (hash_table[&quot;PIN_MUX_ALT4&quot;] != &quot;&quot;) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        buffer = buffer sprintf(&quot;#define %8s_%-26s%s(%s)\n\n&quot;, gpio_name,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                hash_table[&quot;PIN_MUX_ALT4&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                &quot;RV32M1_VEGA_PIN_MUX&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                &quot;PIN_MUX_ALT4&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (hash_table[&quot;PIN_MUX_ALT5&quot;] != &quot;&quot;) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        buffer = buffer sprintf(&quot;#define %8s_%-26s%s(%s)\n\n&quot;, gpio_name,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                hash_table[&quot;PIN_MUX_ALT5&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                &quot;RV32M1_VEGA_PIN_MUX&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                &quot;PIN_MUX_ALT5&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (hash_table[&quot;PIN_MUX_ALT6&quot;] != &quot;&quot;) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        buffer = buffer sprintf(&quot;#define %8s_%-26s%s(%s)\n\n&quot;, gpio_name,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                hash_table[&quot;PIN_MUX_ALT6&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                &quot;RV32M1_VEGA_PIN_MUX&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                &quot;PIN_MUX_ALT6&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (hash_table[&quot;PIN_MUX_ALT7&quot;] != &quot;&quot;) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        buffer = buffer sprintf(&quot;#define %8s_%-26s%s(%s)\n\n&quot;, gpio_name,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                hash_table[&quot;PIN_MUX_ALT7&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                &quot;RV32M1_VEGA_PIN_MUX&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                &quot;PIN_MUX_ALT7&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    buffer = buffer &quot;\n\n&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return buffer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function eval_string(buffer, num,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     result_buffer,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     split_array, hash_table, i, j, len)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for (i = 1; i &lt;= num; i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (buffer[i] == &quot;&quot;) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            continue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        len = split(buffer[i], split_array, &quot;,&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        gsub(/\/.*/, &quot;&quot;, split_array[1])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        gsub(/PT/, &quot;GPIO&quot;, split_array[1])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        gsub(/[0-9][0-9]*/, &quot;_&amp;&quot;, split_array[1])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (j = 2; j &lt;= len; j++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            sub(/\/.*/, &quot;&quot;, split_array[j])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        hash_table[&quot;GPIONAME&quot;] = split_array[1]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        hash_table[&quot;PIN_MUX_ALT0&quot;] = split_array[2]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        hash_table[&quot;PIN_MUX_ASGPIO&quot;] = split_array[3]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        hash_table[&quot;PIN_MUX_ALT2&quot;] = split_array[4]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        hash_table[&quot;PIN_MUX_ALT3&quot;] = split_array[5]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        hash_table[&quot;PIN_MUX_ALT4&quot;] = split_array[6]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        hash_table[&quot;PIN_MUX_ALT5&quot;] = split_array[7]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        hash_table[&quot;PIN_MUX_ALT6&quot;] = split_array[8]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        hash_table[&quot;PIN_MUX_ALT7&quot;] = split_array[9]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        result_buffer = result_buffer make_output_result(hash_table)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return result_buffer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function parse_table(array_buffer, array_index, output_buffer,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     split_array, split_array_temp,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     output_index, i, j, len, start)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (array_index == 0) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    start = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    output_index = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for (i = 1; i &lt; array_index; i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (array_buffer[i] ~ /^[A-Z][0-9][0-9]*,PT.*/) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            start = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            len = split(array_buffer[i], split_array, &quot;,&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } else if ((array_buffer[i] ~ /^&quot;&quot;/) &amp;&amp; (start == 1)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            len = split(array_buffer[i], split_array_temp, &quot;,&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            for (j = 2; j &lt;= len; j++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                if (j == 3) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    continue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                if (split_array_temp[j] != &quot;\&quot;\&quot;&quot; &amp;&amp;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    split_array_temp[j] != &quot;&quot;) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    split_array[j] = split_array[j] split_array_temp[j]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (array_buffer[i + 1] !~ /^&quot;&quot;/ &amp;&amp; (start == 1)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            start = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            for (j = 2; j &lt;= len; j++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                if (j == 2) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    output_buffer[output_index] = split_array[j]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                } else if (j &gt;= 4) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    output_buffer[output_index] = output_buffer[output_index] &quot;,&quot;\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    split_array[j]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            output_index++</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return output_index - 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function exchange_data(array, first, second,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      temp)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    temp = array[first]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    array[first] = array[second]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    array[second] = temp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function transform_key(string)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sub(/[,/].*/, &quot;&quot;, string)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (!match(string, /[0-9][0-9]/)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sub(/[0-9]/, &quot;0&amp;&quot;, string)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function sort_table(array, len,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    i, j, first_string, second_string)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for (i = 1; i &lt;= len; i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (j = i + 1; j &lt;= len; j++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            first_string = array[j]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            second_string = array[i]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            first_string = transform_key(first_string)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            second_string = transform_key(second_string)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (first_string &lt; second_string) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                exchange_data(array, j, i)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function uniq_table(table, num, i)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for (i = 1; i &lt;= num; i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (table[i] == table[i + 1]) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            table[i] == &quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function read_component_then_parse(filename, output_buffer,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                   buffer, i, num)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    i = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (filename == &quot;&quot;) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    while (getline &lt; filename &gt; 0) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        buffer[i++] = $0 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        gsub(/—/, &quot;&quot;, buffer[i - 1])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    num = parse_table(buffer, i, output_buffer)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sort_table(output_buffer, num)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uniq_table(output_buffer, num)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return num</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function parse_and_generate(result_buffer, output_filename, list_buffer, num, i)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    result_buffer = &quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for (i = 1; i &lt; ARGC; i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        output_filename = ARGV[i] &quot;.out&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        num = read_component_then_parse(ARGV[i], list_buffer)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        result_buffer = eval_string(list_buffer, num)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        printf(&quot;%s\n&quot;, result_buffer) &gt; output_filename</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        close(output_filename)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>【parse_and_generate】 函数中依次对命令行中以参数传递的待解析的文件名进行处理。首先读取文件内容到 【buffer】 中，然后解析数据，生成新的表格，并按照特定的 【key】 对表格的行进行排序，并对排序的结果进行 【uniq】 操作。</p><p>【read_component_then_parse】 将新的表格填充到 【list_buffer】 中，表项数量通过返回值返回。</p><p>【eval_string】 根据传入的表格信息进行 &quot;求值&quot; ，返回 “求值” 得到的输出数据。这个输出数据被输出到预先生成的输出文件名（输入文件名加后缀 .out）中。</p><p>执行上述脚本，得到的输出的部分信息如下：</p><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa">  </span><span class="token macro property macro-name" style="color:#36acaa">GPIOB_3_LPADC0_SE0</span><span class="token macro property" style="color:#36acaa">                </span><span class="token macro property expression function" style="color:#d73a49">RV32M1_VEGA_PIN_MUX</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">PIN_MUX_ALT0</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa">  </span><span class="token macro property macro-name" style="color:#36acaa">GPIOB_3_GPIO</span><span class="token macro property" style="color:#36acaa">                      </span><span class="token macro property expression function" style="color:#d73a49">RV32M1_VEGA_PIN_MUX</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">PIN_MUX_AS_GPIO</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa">  </span><span class="token macro property macro-name" style="color:#36acaa">GPIOB_3_LPSPI0_PCS3</span><span class="token macro property" style="color:#36acaa">               </span><span class="token macro property expression function" style="color:#d73a49">RV32M1_VEGA_PIN_MUX</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">PIN_MUX_ALT2</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa">  </span><span class="token macro property macro-name" style="color:#36acaa">GPIOB_3_LPUART1_TX</span><span class="token macro property" style="color:#36acaa">                </span><span class="token macro property expression function" style="color:#d73a49">RV32M1_VEGA_PIN_MUX</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">PIN_MUX_ALT3</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa">  </span><span class="token macro property macro-name" style="color:#36acaa">GPIOB_3_I2S0_TX_FS</span><span class="token macro property" style="color:#36acaa">                </span><span class="token macro property expression function" style="color:#d73a49">RV32M1_VEGA_PIN_MUX</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">PIN_MUX_ALT4</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa">  </span><span class="token macro property macro-name" style="color:#36acaa">GPIOB_3_FB_AD10</span><span class="token macro property" style="color:#36acaa">                   </span><span class="token macro property expression function" style="color:#d73a49">RV32M1_VEGA_PIN_MUX</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">PIN_MUX_ALT5</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa">  </span><span class="token macro property macro-name" style="color:#36acaa">GPIOB_3_TPM0_CH1</span><span class="token macro property" style="color:#36acaa">                  </span><span class="token macro property expression function" style="color:#d73a49">RV32M1_VEGA_PIN_MUX</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">PIN_MUX_ALT6</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa">  </span><span class="token macro property macro-name" style="color:#36acaa">GPIOB_4_LPADC0_SE1</span><span class="token macro property" style="color:#36acaa">                </span><span class="token macro property expression function" style="color:#d73a49">RV32M1_VEGA_PIN_MUX</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">PIN_MUX_ALT0</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa">  </span><span class="token macro property macro-name" style="color:#36acaa">GPIOB_4_GPIO</span><span class="token macro property" style="color:#36acaa">                      </span><span class="token macro property expression function" style="color:#d73a49">RV32M1_VEGA_PIN_MUX</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">PIN_MUX_AS_GPIO</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa">  </span><span class="token macro property macro-name" style="color:#36acaa">GPIOB_4_LPSPI0_SCK</span><span class="token macro property" style="color:#36acaa">                </span><span class="token macro property expression function" style="color:#d73a49">RV32M1_VEGA_PIN_MUX</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">PIN_MUX_ALT2</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa">  </span><span class="token macro property macro-name" style="color:#36acaa">GPIOB_4_LPUART1_CTS</span><span class="token macro property" style="color:#36acaa">               </span><span class="token macro property expression function" style="color:#d73a49">RV32M1_VEGA_PIN_MUX</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">PIN_MUX_ALT3</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa">  </span><span class="token macro property macro-name" style="color:#36acaa">GPIOB_4_I2S0_TX_BCLK</span><span class="token macro property" style="color:#36acaa">              </span><span class="token macro property expression function" style="color:#d73a49">RV32M1_VEGA_PIN_MUX</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">PIN_MUX_ALT4</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa">  </span><span class="token macro property macro-name" style="color:#36acaa">GPIOB_4_FB_AD9</span><span class="token macro property" style="color:#36acaa">                    </span><span class="token macro property expression function" style="color:#d73a49">RV32M1_VEGA_PIN_MUX</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">PIN_MUX_ALT5</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa">  </span><span class="token macro property macro-name" style="color:#36acaa">GPIOB_4_TPM0_CH2</span><span class="token macro property" style="color:#36acaa">                  </span><span class="token macro property expression function" style="color:#d73a49">RV32M1_VEGA_PIN_MUX</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">PIN_MUX_ALT6</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa">  </span><span class="token macro property macro-name" style="color:#36acaa">GPIOB_5_GPIO</span><span class="token macro property" style="color:#36acaa">                      </span><span class="token macro property expression function" style="color:#d73a49">RV32M1_VEGA_PIN_MUX</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">PIN_MUX_AS_GPIO</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa">  </span><span class="token macro property macro-name" style="color:#36acaa">GPIOB_5_LPSPI0_SOUT</span><span class="token macro property" style="color:#36acaa">               </span><span class="token macro property expression function" style="color:#d73a49">RV32M1_VEGA_PIN_MUX</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">PIN_MUX_ALT2</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa">  </span><span class="token macro property macro-name" style="color:#36acaa">GPIOB_5_LPUART1_RTS</span><span class="token macro property" style="color:#36acaa">               </span><span class="token macro property expression function" style="color:#d73a49">RV32M1_VEGA_PIN_MUX</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">PIN_MUX_ALT3</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa">  </span><span class="token macro property macro-name" style="color:#36acaa">GPIOB_5_I2S0_MCLK</span><span class="token macro property" style="color:#36acaa">                 </span><span class="token macro property expression function" style="color:#d73a49">RV32M1_VEGA_PIN_MUX</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">PIN_MUX_ALT4</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa">  </span><span class="token macro property macro-name" style="color:#36acaa">GPIOB_5_FB_AD8</span><span class="token macro property" style="color:#36acaa">                    </span><span class="token macro property expression function" style="color:#d73a49">RV32M1_VEGA_PIN_MUX</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">PIN_MUX_ALT5</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa">  </span><span class="token macro property macro-name" style="color:#36acaa">GPIOB_5_TPM0_CH3</span><span class="token macro property" style="color:#36acaa">                  </span><span class="token macro property expression function" style="color:#d73a49">RV32M1_VEGA_PIN_MUX</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">PIN_MUX_ALT6</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="进一步的反思">进一步的反思<a class="hash-link" href="#进一步的反思" title="标题的直接链接">​</a></h2><p>虽然上述 awk 脚本输出了正确的结果，但是在编写过程中我发现一些问题很难找到。例如当你使用某个变量时，不小心打错了名字，那么程序便不能正常工作，而寻找这个问题的过程比较困难。</p><p>当然，对于变量名打错的问题，你可以通过 【--dump-variables】 参数来生成全局变量表来寻找问题。你也可以通过调试来解决这个问题。不过如果 awk 能够报个错或者警告，那你可能会更快的发现问题。上述脚本有 200 多行代码，算是一个比较复杂的脚本了。编写过程中遇到的问题最后也都在短时间内得到了解决，但我觉得很多问题都应该可以避免。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="用-perl-来完成文字处理">用 perl 来完成文字处理<a class="hash-link" href="#用-perl-来完成文字处理" title="标题的直接链接">​</a></h2><p>awk 中还有很多我可能没有接触到的细节，但我觉得浸淫于这种技术一角来解决问题的方法依赖性过强。我们应该使用更为通用的方式来解决问题，而不是玩弄各种奇技淫巧。为此，以后关于文字处理的部分，对于相对复杂的逻辑，我会用 【perl】 来实现，【perl】 的文字处理能力毋庸置疑，只是标识符用的有点多啊！！！</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/longyuwlz/longyu.github.io/docs/技术博客/linux 三剑客/awk/从 pdf 中提取表格信息、合并、解析、输出数据.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_eYIM" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_vbeJ"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/longyu.github.io/技术博客/linux 三剑客/awk/windows 换行符对 awk printf 函数的影响"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">windows 换行符对 awk printf 函数的影响</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/longyu.github.io/技术博客/linux 三剑客/awk/使用 awk 处理一个对齐问题"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">使用 awk 处理一个对齐问题</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#从-pdf-中提取表格信息合并解析输出数据" class="table-of-contents__link toc-highlight">从 pdf 中提取表格信息、合并、解析、输出数据</a></li><li><a href="#pdf-格式浅述" class="table-of-contents__link toc-highlight">pdf 格式浅述</a></li><li><a href="#word-文档-与-pdf" class="table-of-contents__link toc-highlight">word 文档 与 pdf</a></li><li><a href="#pdf-文档撰写的优点与难点" class="table-of-contents__link toc-highlight">pdf 文档撰写的优点与难点</a></li><li><a href="#进一步的反思" class="table-of-contents__link toc-highlight">进一步的反思</a></li><li><a href="#用-perl-来完成文字处理" class="table-of-contents__link toc-highlight">用 perl 来完成文字处理</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/longyuwlz" target="_blank" rel="noopener noreferrer" class="footer__link-item">longyuwlz<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/longyu.github.io/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/longyuwlz" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 龙瑜的文字世界, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/longyu.github.io/assets/js/runtime~main.c878b670.js"></script>
<script src="/longyu.github.io/assets/js/main.99377f63.js"></script>
</body>
</html>