<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-技术博客/dpdk/dpdk 问题案例/编译问题/以 rte_mempool_ops_table 为例描述 dpdk 程序库链接顺序对程序执行的影响">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.21">
<link rel="alternate" type="application/rss+xml" href="/longyu.github.io/blog/rss.xml" title="龙瑜的文字世界 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/longyu.github.io/blog/atom.xml" title="龙瑜的文字世界 Atom Feed"><title data-rh="true">以 rte_mempool_ops_table 为例描述 dpdk 程序库链接顺序对程序执行的影响 | 龙瑜的文字世界</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://longyuwlz.github.io/longyu.github.io/技术博客/dpdk/dpdk 问题案例/编译问题/以 rte_mempool_ops_table 为例描述 dpdk 程序库链接顺序对程序执行的影响"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="以 rte_mempool_ops_table 为例描述 dpdk 程序库链接顺序对程序执行的影响 | 龙瑜的文字世界"><meta data-rh="true" name="description" content="dpdk mempool_ops 是对旧版 mempool 代码的抽象，在 dpdk-16.07 中被引入。"><meta data-rh="true" property="og:description" content="dpdk mempool_ops 是对旧版 mempool 代码的抽象，在 dpdk-16.07 中被引入。"><link data-rh="true" rel="canonical" href="https://longyuwlz.github.io/longyu.github.io/技术博客/dpdk/dpdk 问题案例/编译问题/以 rte_mempool_ops_table 为例描述 dpdk 程序库链接顺序对程序执行的影响"><link data-rh="true" rel="alternate" href="https://longyuwlz.github.io/longyu.github.io/技术博客/dpdk/dpdk 问题案例/编译问题/以 rte_mempool_ops_table 为例描述 dpdk 程序库链接顺序对程序执行的影响" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://longyuwlz.github.io/longyu.github.io/技术博客/dpdk/dpdk 问题案例/编译问题/以 rte_mempool_ops_table 为例描述 dpdk 程序库链接顺序对程序执行的影响" hreflang="x-default"><link rel="stylesheet" href="/longyu.github.io/assets/css/styles.481fc3a6.css">
<link rel="preload" href="/longyu.github.io/assets/js/runtime~main.0ebe0f88.js" as="script">
<link rel="preload" href="/longyu.github.io/assets/js/main.14246a37.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">跳到主要内容</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/longyu.github.io/"><div class="navbar__logo"><img src="/longyu.github.io/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/longyu.github.io/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">龙瑜的文字世界</b></a><a class="navbar__item navbar__link" href="/longyu.github.io/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/longyuwlz" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docsWrapper_BCFX"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/longyu.github.io/category/大学的记录">大学的记录</a><button aria-label="打开/收起侧边栏菜单「大学的记录」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/longyu.github.io/">笔记本开篇序言</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/longyu.github.io/技术博客/RTOS/debug/实时操作系统中调试上下文切换与中断处理汇编的一些方法">技术博客</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/longyu.github.io/技术博客/RTOS/debug/实时操作系统中调试上下文切换与中断处理汇编的一些方法">RTOS</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/longyu.github.io/技术博客/dpdk/dpdk 依赖知识/网卡驱动绑定/将网卡绑定到官方驱动测试过程">dpdk</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/longyu.github.io/技术博客/dpdk/dpdk 依赖知识/网卡驱动绑定/将网卡绑定到官方驱动测试过程">dpdk 依赖知识</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/longyu.github.io/技术博客/dpdk/dpdk 分类问题排查方法/初始化问题/dpdk 问题排查的第一关：基础环境的排查">dpdk 分类问题排查方法</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/longyu.github.io/技术博客/dpdk/dpdk 功能移植与开发/功能移植/dpdk ebpf 库跨版本移植">dpdk 功能移植与开发</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/longyu.github.io/技术博客/dpdk/dpdk 源码分析/igb_uio/dpdk-16.04 igb_uio 模块分析">dpdk 源码分析</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/longyu.github.io/技术博客/dpdk/dpdk 问题案例/rte_kni/dpdk 程序创建 kni 虚拟网络接口失败的问题">dpdk 问题案例</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/longyu.github.io/技术博客/dpdk/dpdk 问题案例/rte_kni/dpdk 程序创建 kni 虚拟网络接口失败的问题">rte_kni</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/longyu.github.io/技术博客/dpdk/dpdk 问题案例/多进程模型问题/dpdk 多进程模型共享收发包队列问题">多进程模型问题</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/longyu.github.io/技术博客/dpdk/dpdk 问题案例/性能问题/dpdk 程序性能调优：不同网卡或槽位带来的时延差异问题排查思路">性能问题</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/longyu.github.io/技术博客/dpdk/dpdk 问题案例/接口问题/Unsupported SFP+ Module">接口问题</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/longyu.github.io/技术博客/dpdk/dpdk 问题案例/收发包问题/dpdk 不发包问题之排查上层软件发出报文的正确性">收发包问题</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/longyu.github.io/技术博客/dpdk/dpdk 问题案例/程序初始化问题/Failed to mmap 2MB hugepages 与 max_map_count limit">程序初始化问题</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/longyu.github.io/技术博客/dpdk/dpdk 问题案例/编译问题/dpdk库源码中包含内核头文件的问题">编译问题</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/longyu.github.io/技术博客/dpdk/dpdk 问题案例/编译问题/dpdk库源码中包含内核头文件的问题">dpdk库源码中包含内核头文件的问题</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/longyu.github.io/技术博客/dpdk/dpdk 问题案例/编译问题/以 rte_mempool_ops_table 为例描述 dpdk 程序库链接顺序对程序执行的影响">以 rte_mempool_ops_table 为例描述 dpdk 程序库链接顺序对程序执行的影响</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/longyu.github.io/技术博客/dpdk/dpdk 问题案例/网卡硬件/dpdk 问题分析：dpdk-20.11 ice 100G 网卡 rss_hash 配置无效问题">网卡硬件</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/longyu.github.io/技术博客/dpdk/dpdk-19.xx/dpdk-19.11 armv8 l2fwd 在某 arm 内核上无法运行问题">dpdk-19.xx</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/longyu.github.io/技术博客/dpdk/上手 dpdk/功能使用/dpdk-pdump工具编译运行">上手 dpdk</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/longyu.github.io/技术博客/gui/android/某安卓图形化界面运行异常问题分析">gui</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/longyu.github.io/技术博客/linux 三剑客/awk/awk 实现批量化操作探讨">linux 三剑客</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/longyu.github.io/技术博客/linux-kernel/ethtool 命令指定的网络设备名在哪里被使用？">linux-kernel</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/longyu.github.io/技术博客/linux-system/Debian/在英文版 Debian 中添加中文拼音输入法">linux-system</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/longyu.github.io/技术博客/perl/perl 中的 foreach 语句">perl</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/longyu.github.io/技术博客/写博客对我的意义">写博客的意义</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/longyu.github.io/技术博客/命令行使用案例/linux 中文件批量重命名">命令行使用案例</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/longyu.github.io/技术博客/嵌入式/ARM/汇编函数与 c 函数的互相调用问题">嵌入式</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/longyu.github.io/技术博客/技术书籍/APUE/time 输出的程序执行时间">技术书籍</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/longyu.github.io/技术博客/构建系统/Makefile/Makefile 中的 @true 与 @false 命令">构建系统</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/longyu.github.io/技术博客/测试框架/unity/unity 单元测试框架的工作原理，及隐含问题">测试框架</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/longyu.github.io/技术博客/笔记本电脑问题/惠普笔记本电池无法充满问题">笔记本电脑问题</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/longyu.github.io/技术博客/策略/api 功能与实现的些许感想">策略</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/longyu.github.io/技术博客/计算机系统/cpu/cpu 分支预测对性能的影响">计算机系统</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/longyu.github.io/技术博客/软件开发技巧/使用取模与累加制造一个环">软件开发技巧</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/longyu.github.io/技术博客/软件开发语言/C/c 语言中的封装">软件开发语言</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/longyu.github.io/那些年写的诗歌/龙瑜文赋">那些年写的诗歌</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/longyu.github.io/随笔/相遇的缘分">随笔</a></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_GujU"><div class="docItemContainer_Adtb"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/longyu.github.io/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">技术博客</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">dpdk</span><meta itemprop="position" content="2"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">dpdk 问题案例</span><meta itemprop="position" content="3"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">编译问题</span><meta itemprop="position" content="4"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">以 rte_mempool_ops_table 为例描述 dpdk 程序库链接顺序对程序执行的影响</span><meta itemprop="position" content="5"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_aoJ5"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><h1>以 rte_mempool_ops_table 为例描述 dpdk 程序库链接顺序对程序执行的影响</h1><h1>dpdk mempool_ops</h1><p>dpdk mempool_ops 是对旧版 mempool 代码的抽象，在 <strong>dpdk-16.07</strong> 中被引入。</p><p>老版本在创建 mempool 时会创建一个内部的 <strong>ring</strong> 来完成<strong>入队与出队的操作</strong>，底层区分了<strong>多生产者、多消费者，单生产者、单消费者</strong>模型。</p><p>老版本 mempool 创建时会<strong>将所有的元素预先 enqueue 到 ring 中</strong>，并对<strong>每个</strong>元素执行<strong>初始化</strong>操作，这部分代码隐含在 mempool 的内部实现中。用户从 mempool 中申请、释放 mem，最底层是通过 <strong>dequeue、enqueue ring</strong> 来实现的。</p><p>随着 dpdk 支持场景的拓宽，在 mempool 底层使用 <strong>ring</strong> 这一种数据结构来控制 mem 的申请与释放<strong>不能满足所有场景的使用需求</strong>。</p><p>在一些场景下，一些外部的内存子系统在使用 DPDK 时需要对 mempool 底层的入队与出队的行为进行定制化开发，这意味着底层的这部分功能需要向外部开放，必须能够让程序注册一个自定义的入队、出队方法及关联数据结构，rte_mempool_ops 就是这种功能的具体实现。</p><h1>rte_mempool_ops 的抽象</h1><p>16.07 中 rte_mempool_ops 的定义如下：</p><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">rte_mempool_ops</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token keyword" style="color:#00009f">char</span><span class="token plain"> name</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">RTE_MEMPOOL_OPS_NAMESIZE</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/**&lt; Name of mempool ops struct. */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token class-name">rte_mempool_alloc_t</span><span class="token plain"> alloc</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">       </span><span class="token comment" style="color:#999988;font-style:italic">/**&lt; Allocate private data. */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token class-name">rte_mempool_free_t</span><span class="token plain"> free</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">         </span><span class="token comment" style="color:#999988;font-style:italic">/**&lt; Free the external pool. */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token class-name">rte_mempool_enqueue_t</span><span class="token plain"> enqueue</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">/**&lt; Enqueue an object. */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token class-name">rte_mempool_dequeue_t</span><span class="token plain"> dequeue</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">/**&lt; Dequeue an object. */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       rte_mempool_get_count get_count</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/**&lt; Get qty of available objs. */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> __rte_cache_aligned</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>name 用于<strong>唯一标识</strong>每个 mempool_ops，alloc 用于 mempool_ops <strong>内部数据结构的创建</strong>，free 用于 mempool_ops <strong>内部数据结构的销毁</strong>，enqueue 负责入队列，dequeue 负责出队列，get_count 用以获取当前可用的对象数量。</p><p>总结起来有如下三部分功能：</p><ol><li>mempool_ops 内部数据结构的创建与释放功能</li><li>mempool_ops 对象的入队与出队功能</li><li>mempool_ops 底层可用对象数量的查询功能</li></ol><h1>以 ring 描述在 mempool_ops 框架下 mempool_ops 的使用过程</h1><p>每一个 mempool_ops 需要实例化一个 rte_mempool_ops 结构并将此结构注册到系统中，对单生产者与单消费者这种基于 ring 的模型而言它实例化的 rte_mempool_ops 定义如下；</p><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">rte_mempool_ops</span><span class="token plain"> ops_sp_sc </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;ring_sp_sc&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">alloc </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> common_ring_alloc</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">free </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> common_ring_free</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enqueue </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> common_ring_sp_enqueue</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">dequeue </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> common_ring_sc_dequeue</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_count </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> common_ring_get_count</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>使用如下命令注册：</p><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">MEMPOOL_REGISTER_OPS</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ops_sp_sc</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>MEMPOOL_REGISTER_OPS 通过 gcc 的构造函数声明，调用 rte_mempool_register_ops 函数将 ops_sp_sc mempool_ops 注册到系统中。</p><p>rte_mempool_register_ops 在进行一系列的内容检查后，将 ops_sp_sc 注册到 rte_mempool_ops_table 表中（<strong>在获取到互斥锁的前提下，保证对 rte_mempool_ops_table 的互斥访问</strong>）。</p><p>成功后，会获取到 <strong>ops_index</strong> （<strong>ops 在 rte_mempool_ops_table 中的下标</strong>），这个下标会被保存到 <strong>mempool</strong> 结构的 <strong>ops_index</strong> 字段中（<strong>通过调用 rte_mempool_set_ops_byname 函数设置</strong>）。</p><p>其功能定义如下：</p><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        * Index into rte_mempool_ops_table array of mempool ops</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        * structs, which contain callback function pointers.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        * We&#x27;re using an index here rather than pointers to the callbacks</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        * to facilitate any secondary processes that may want to use</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        * this mempool.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token class-name">int32_t</span><span class="token plain"> ops_index</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>mempool_ops 被调用的地方</h1><p>使用 mempool_ops 时，通过 rte_mempool_get 函数出队列过程函数调用图示如下：</p><p><img loading="lazy" src="https://img-blog.csdnimg.cn/20210615153814667.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0xvbmd5dV93bHo=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" class="img_ev3q">
当 cache 中没有缓存时，就调用底层 ops 中注册的 dequeue 接口来完成。</p><h1>dpdk-16.07 中相关 git commit</h1><p>相关的 commit 信息如下：</p><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">commit </span><span class="token number" style="color:#36acaa">449</span><span class="token plain">c49b93a6b87506c7bb07468e82b539efddca3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Author</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> David Hunt </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">david</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">hunt@intel</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">com</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Date</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">   Wed Jun </span><span class="token number" style="color:#36acaa">22</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">27</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">27</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2016</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token number" style="color:#36acaa">0100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mempool</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> support handler operations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Until now</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> the objects stored in a mempool were internally stored in a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ring</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> This patch introduces the possibility to </span><span class="token keyword" style="color:#00009f">register</span><span class="token plain"> external handlers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    replacing the ring</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    The </span><span class="token keyword" style="color:#00009f">default</span><span class="token plain"> behavior remains unchanged</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> but calling the new function</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">rte_mempool_set_ops_byname</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> right after </span><span class="token function" style="color:#d73a49">rte_mempool_create_empty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> allows</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    the user to change the handler that will be used when populating</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    the mempool</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    This patch also adds a set of </span><span class="token keyword" style="color:#00009f">default</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ops</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">function callbacks</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> based</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    on rte_ring</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Signed</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">off</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">by</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> David Hunt </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">david</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">hunt@intel</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">com</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Signed</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">off</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">by</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Olivier Matz </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">olivier</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">matz@</span><span class="token number" style="color:#36acaa">6</span><span class="token plain">wind</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">com</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Acked</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">by</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Shreyansh Jain </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">shreyansh</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">jain@nxp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">com</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Acked</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">by</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Olivier Matz </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">olivier</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">matz@</span><span class="token number" style="color:#36acaa">6</span><span class="token plain">wind</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">com</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>此接口在后面的版本有一些优化，但是主体框架没有大的变动。注册一个自己的 mempool_ops 的实例<strong>可以参照 vpp  dpdk_plugins 中的实现代码</strong>。</p><h1>19.11 中 dpdk 程序初始化后 rte_mempool_ops_table 的布局情况</h1><p>dpdk-19.11 中 dpdk 程序初始化后 rte_mempool_ops_table 结构示例如下图：
<img loading="lazy" src="https://img-blog.csdnimg.cn/20210615103819679.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0xvbmd5dV93bHo=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" class="img_ev3q">
上图中，rte_mempool_ops_table 的不同表项指向不同的 mempool_ops 实例。</p><p>使用静态库时，链接不同 <strong>mempool_ops</strong> 所在库的<strong>顺序决定了</strong> <strong>rte_mempool_ops_table</strong> 中不同 <strong>mempool_ops</strong> 的<strong>布局</strong>。如果 dpdk primary 进程与 secondary 进程<strong>链接</strong>不同 mempool_ops 构造函数所在<strong>库的顺序不同</strong>，则会有<strong>不同的</strong> rte_mempool_ops_table <strong>布局</strong>，当 mempool 需要在 primary 与 secondary 中共享时，不同的 rte_mempool_ops_table 布局就会带来严重的问题！</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="第一种布局方式dpdk-内部示例程序的布局">第一种布局方式——dpdk 内部示例程序的布局<a class="hash-link" href="#第一种布局方式dpdk-内部示例程序的布局" title="标题的直接链接">​</a></h2><p>这里以 dpdk-pdump 为代表，其链接参数可以查看如下文件：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">x86_64-native-linuxapp-gcc/build/app/pdump/.dpdk-pdump.cmd</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>此种方式下 rte_mempool_ops_table 的前 4 个元素布局情况见下图：<img loading="lazy" src="https://img-blog.csdnimg.cn/20210615110317285.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0xvbmd5dV93bHo=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" class="img_ev3q">
可以看到，mp_mc 这种基于 ring 的多生产者与多消费者占据 rte_mempool_ops_table 表中 ops 数组的第一个表项，examples 目录下的 dpdk primary 程序中 rte_mempool_ops_table 表的布局与 app 下的程序布局一致。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="使用-libdpdka-链接外部程序时的布局情况">使用 libdpdk.a 链接外部程序时的布局情况<a class="hash-link" href="#使用-libdpdka-链接外部程序时的布局情况" title="标题的直接链接">​</a></h2><p>libdpdk.a 中 mempool 相关静态库的链接顺序如下：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> ./x86_64-native-linux-gcc/lib/libdpdk.a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GROUP </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.librte_mempool_bucket.a librte_mempool_dpaa2.a librte_mempool_octeontx.a librte_mempool_octeontx2.a librte_mempool_ring.a librte_mempool_stack.a </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>此时程序运行后，rte_mempool_ops_table 表中 mempool_ops 的布局情况见下图：
<img loading="lazy" src="https://img-blog.csdnimg.cn/20210615111522370.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0xvbmd5dV93bHo=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" class="img_ev3q">
可以看到，此时 mempool_bucket_ops 占据 rte_mempool_ops_table 中 ops 的第一个元素，这与第一种情况是不同的。</p><h1>问题描述</h1><p>primary 进程使用 libdpdk.a 中的链接顺序，使用第二种 rte_mempool_ops_table 布局方式，secondary 进程使用 dpdk-pdump，使用此程序来抓取报文。</p><p>问题现象：</p><p><strong>打流情况下，dpdk-pdump 程序运行起来后会导致 primary 进程段错误。</strong></p><h1>dpdk-pdump dump 报文的原理浅析</h1><p><strong>dpdk-pdump</strong> 首先创建 <strong>pdump_tuples</strong> 中使能表项的不同字段，一个 <strong>pdump_tuples 表项</strong> 能够<strong>完整</strong>的描述一个待 dump 的目标接口。</p><p><strong>dpdk-pdump</strong> 会为每一个 pdump_tuples 创建<strong>单独的 pktmbuf_pool</strong> 并使用 <strong>mp_mc_ops</strong> 这种 <strong>mempool_ops</strong>，同时会根据配置的功能，来创建相应的 <strong>ring</strong>。</p><p><strong>pdump_tuples 及 vdev 接口初始化完成后</strong>，<strong>dpdk-pdump</strong> 会调　<strong>rte_pdump_enable_by_deviceid</strong> 来使能 dump 指定接口指定队列上指定收、方向报文的功能。</p><p><strong>rte_pdump_enable_by_deviceid</strong> 会使用 <strong>pdump_tuples</strong> 中配置表项的内容作为参数，构造一条<strong>请求</strong>，然后将这条请求通过<strong>本地套接字</strong>发送给 <strong>primary</strong> 进程。</p><p><strong>primary</strong> 进程收到这条消息后，进行解析并调用 <strong>pdump_server</strong> 函数，<strong>pdump_server</strong> 调用 <strong>set_pdump_rxtx_cbs</strong> 来向请求的 port 与 queue 的 rx、tx 方向注册回调函数，rx 这方为 <strong>pdump_rx</strong>，tx 这方为 <strong>pdump_tx</strong>。</p><p>完成了上述操作后，<strong>pdump_server</strong> 会向对方发送一个 <strong>reply</strong>，表明配置状态。</p><p>当程序调用 <strong>rte_eth_rx_burst</strong> 时，<strong>成功收到报文后</strong>，会<strong>遍历接收回调函数并执行</strong>，在这里就调用到了 <strong>pdump_rx</strong> 函数。</p><p><strong>pdump_r</strong>x 函数使用 <strong>dpdk-pdump</strong> 发送请求中指定的 <strong>mempool</strong> 来申请 <strong>mbuf</strong>，然后拷贝报文到 <strong>mbuf</strong> 中，成功后就尝试将报文投递到 dpdk-pdump 发送请求中指定的 ring 中，失败则直接释放报文。</p><p>由于 dpdk 程序在初始化的过程中已经执行了一些<strong>内存的共享操作</strong>，primary 进程能够<strong>直接使用 secondary 进程中的一些虚拟地址</strong>，这里的 mempool 的地址就是一个实例。</p><p>问题就出在这里！当 primary 进程收到包后，调用到 pdump_rx 函数时，在从 mempool 中申请 mbuf 的时候，由于 <strong>dpdk-pdump 与 primary 进程的 rte_mempool_ops_table 表中 mempool_ops 的布局不同</strong>，在 dpdk-pdump 对应 <strong>ops_mp_mc</strong> 这个 <strong>mempool_ops</strong> 的表项处，在 primary 进程中实际对应的是 <strong>bucket</strong> 的 <strong>mempool_ops</strong>，就造成了 primary 进程<strong>段错误</strong>！</p><h1>解决方案</h1><p>调整 libdpdk.a 中 mempool_ops 所在库的链接顺序，与 dpdk-pdump 保持一致，重新编译 primary 程序。</p><h1>总结</h1><p>本文从 rte_mempool_ops 着手描述，目的在于说明由于库链接顺序的区别导致 dpdk primary 进程与 secondary 进程中 mempool_ops 在 rte_mempool_ops_table 占据不同的表项，进一步造成程序段错误的问题。</p><p>使用 gcc 的 constructor 修饰符来声明构造函数，在使用静态库的情况下，<strong>链接顺序就决定了初始化的顺序，进而影响到了在不同程序中表单的布局</strong>，这一布局又随着多个程序之间的交互被误用，最终造成了严重的问题。</p><p>使用 constructor 修饰符<strong>让 mempool_ops 的动态添加</strong>变得非常简单，避免了硬编码。但是使用了 <strong>constructor</strong> 的同时也继承了 <strong>constructor</strong> 潜在的问题，即链接的顺序决定了初始化的顺序，这算是种隐式的依赖，不太容易发现！</p><p>正如一件事物有好有坏，一个技术也有好有坏，更准确点说应该是<strong>有优势也有限制条件</strong>。我们应当做到既清楚它的优势也清楚它的限制条件，正如我们需要明悟自己的长短一般，并不是那么容易！</p><p>本篇文章算是使用 <strong>groff</strong> 绘图的一个开端，绘出的图让人挺满意的，这是一个很好的开端，也是一个改变的点。</p><p>最后将 <strong>mempool_ops</strong> 中某张图片的 pic 代码贴到下面，仅供参考！</p><div class="language-pic codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pic codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">.PS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">define rte_mempool_ops { </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    box &quot;..........&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    box $1 fill 0.4;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    box $2 fill 0.6;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">boxht=0.4;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">boxwid=2.5;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">A:box &quot;sl&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">down;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">box &quot;num_ops&quot; with .nw at A.sw;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">B:box &quot;ops[0]&quot; fill 0.5;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">C:box &quot;ops[1]&quot; fill 0.5;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">D: box &quot;ops[2]&quot; fill 0.5;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">E: box &quot;ops[3]&quot; fill 0.5;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">F:box &quot;ops[...]&quot; fill 0.5;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">boxwid=1.8;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">H:box &quot;octeontx&quot; with .nw at A.se + (2, -4) fill 0.2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rte_mempool_ops(&quot;otx2_npa_enq&quot;, &quot;otx2_npa_deq&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">I:box &quot;dpaa&quot; with .nw at A.e + (2, 0.5) fill 0.2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rte_mempool_ops(&quot;dpaa_mbuf_free_bulk&quot;, &quot;dpaa_mbuf_alloc_bulk&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">J:box &quot;bucket&quot; with .nw at A.se + (2, 3) fill 0.2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rte_mempool_ops(&quot;bucket_enqueue&quot;, &quot;bucket_dequeue&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K:box &quot;dpaa2&quot; with .nw at A.se + (2, -1.5) fill 0.2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rte_mempool_ops(&quot;irte_hw_mbuf_free_bulk&quot;, &quot;rte_dpaa2_mbuf_alloc_bulk&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;\fBrte_mempool_ops_table\fR&quot; textwid 2 with .nw at A.c + (0, 0.4);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;\fB  mempool_octeontx_ops\fR&quot; textwid 2 with .nw at H.c + (0, 0.4);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;\fB  mempool_dpaa_ops\fR&quot; textwid 2 with .nw at I.c + (0, 0.4);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;\fB  mempool_bucket_ops\fR&quot; textwid 2 with .nw at J.c + (0, 0.4);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;\fB  mempool_dpaa2_ops\fR&quot; textwid 2 with .nw at K.c + (0, 0.4);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">line chop 0 chop 0 from B.e to J.w -&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">line chop 0 chop 0 from C.e to I.w -&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">line chop 0 chop 0 from D.e to K.w -&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">line chop 0 chop 0 from E.e to H.w -&gt;;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/longyuwlz/longyu.github.io/docs/技术博客/dpdk/dpdk 问题案例/编译问题/以 rte_mempool_ops_table 为例描述 dpdk 程序库链接顺序对程序执行的影响.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_eYIM" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_vbeJ"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/longyu.github.io/技术博客/dpdk/dpdk 问题案例/编译问题/dpdk库源码中包含内核头文件的问题"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">dpdk库源码中包含内核头文件的问题</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/longyu.github.io/技术博客/dpdk/dpdk 问题案例/网卡硬件/dpdk 问题分析：dpdk-20.11 ice 100G 网卡 rss_hash 配置无效问题"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">dpdk 问题分析：dpdk-20.11 ice 100G 网卡 rss_hash 配置无效问题</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#第一种布局方式dpdk-内部示例程序的布局" class="table-of-contents__link toc-highlight">第一种布局方式——dpdk 内部示例程序的布局</a></li><li><a href="#使用-libdpdka-链接外部程序时的布局情况" class="table-of-contents__link toc-highlight">使用 libdpdk.a 链接外部程序时的布局情况</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/longyuwlz" target="_blank" rel="noopener noreferrer" class="footer__link-item">longyuwlz<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/longyu.github.io/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/longyuwlz" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 龙瑜的文字世界, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/longyu.github.io/assets/js/runtime~main.0ebe0f88.js"></script>
<script src="/longyu.github.io/assets/js/main.14246a37.js"></script>
</body>
</html>