# 解决未进入中断服务程序的一般思路

1. GPIO 是否连接

2. GPIO 引脚是否配置，支持引脚复用功能的则需要判断是否选定使用的功能

1. 检查中断向量表

2. 对于支持重映射中断向量表的硬件，检查存储中断向量表起始地址的寄存器的值是否正确

3. 当你在程序中对向量表重新进行了映射时，检查起始地址的合法性与复制区域大小，可以读取复制完成后的新中断向量表的首尾中，检查获取到的中断服务程序地址与旧中断向量表中的内容是否对应

4. 中断向量表确认不存在问题后，开始检查中断配置状态

5. 总中断是否打开
	
6. 子中断是否打开

7. 中断号与 ISR 连接是否正确？（不支持动态修改中断向量表的硬件可以跳过）

8. 中断是否触发

9. 当前设定的中断优先级是否会造成影响

10. debug 正常 release 异常的情况，可能是 release 优化后程序乱序执行造成的问题。考虑是否需要在代码中添加必要的编译屏障（阻止编译器优化造成的乱序执行问题）或运行时的内存屏障。着重分析读写关键变量的情况。

能够使用编译屏障来解决问题，尽可能的使用编译屏障。能够使用不太严格的内存屏障来解决问题，就尽可能使用。在保证正常执行的情况下，考虑最优的性能。越严格的屏障带来更安全的保障的同时也增强了性能开销。


