# 使用 bash 内建功能完成变量值替换

某天，我需要编写一个 shell script 脚本来批量删除文件名中的特殊字符。一般的思路是首先遍历目录，依次获取到每一个待处理文件名，然后替换当前文件名变量值，最后再使用 mv 命令就可以了。

核心的命令行如下 (这里以移除‘-’为例)：

```sh
	NEWNAME=$(echo $FILENAME | sed 's/-//g')
	mv $FILENAME $NEWNAME
```
这是很常见的一种方式，也是最容易在网上找到的命令行。

我现在对这个命令行进行改进，第一次改进是使用 tr 命令来代替 sed。

修改后的命令如下：
```sh
	NEWNAME=$(echo $FILENAME | tr  -d '-')
	mv $FILENAME $NEWNAME
```
tr 是专门用于转换或删除字符的命令，这里就是 tr 命令的舞台。

使用 tr 命令代替 sed 命令更贴近特定命令做特定的事情这一理念。可仔细想想，这里是对变量的值进行修改，为什么不能直接使用 bash 提供的操作变量的方法完成呢？这才是最贴近这个问题的解决方式吧！

再次对这个命令行进行修改，此时可以将两行合并为一行来完成。

内容如下：
```sh
	mv $FILENAME ${FILENAME//-/}
```
使用  ${parameter/pattern/string} 模式替换功能直接修改变量，这是最贴近问题，也是最高效的方式。注意如果 pattern 以 / 开始，所有的匹配项都会进行替换，否则只替换最长匹配项。

